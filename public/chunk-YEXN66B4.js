import{A as JE,E as XE,F as eI,G as tI,H as nI,I as bh,J as Eh,Ja as ey,L as In,a as HE,b as _h,c as qE,d as GE,h as WE,j as KE,jb as ty,k as ku,p as Ym,q as QE,r as ZE,u as Jm,x as Tt,y as YE,ya as Xm,z as _r}from"./chunk-WRDE4YEV.js";import{a as G,b as De,d as Y1,f as J1,h as Zm,i as F}from"./chunk-5KHZBZE7.js";var xM=Y1(($r,$b)=>{"use strict";(function(n,e){typeof $r=="object"&&typeof $b<"u"?$b.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Sweetalert2=e())})($r,function(){"use strict";function n(d,h,y){if(typeof d=="function"?d===h:d.has(h))return arguments.length<3?h:y;throw new TypeError("Private element is not present on this object")}function e(d,h){if(h.has(d))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t(d,h){return d.get(n(d,h))}function r(d,h,y){e(d,h),h.set(d,y)}function i(d,h,y){return d.set(n(d,h),y),y}let o=100,s={},a=()=>{s.previousActiveElement instanceof HTMLElement?(s.previousActiveElement.focus(),s.previousActiveElement=null):document.body&&document.body.focus()},c=d=>new Promise(h=>{if(!d)return h();let y=window.scrollX,_=window.scrollY;s.restoreFocusTimeout=setTimeout(()=>{a(),h()},o),window.scrollTo(y,_)}),l="swal2-",p=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((d,h)=>(d[h]=l+h,d),{}),b=["success","warning","info","question","error"].reduce((d,h)=>(d[h]=l+h,d),{}),x="SweetAlert2:",N=d=>d.charAt(0).toUpperCase()+d.slice(1),M=d=>{console.warn(`${x} ${typeof d=="object"?d.join(" "):d}`)},j=d=>{console.error(`${x} ${d}`)},W=[],H=d=>{W.includes(d)||(W.push(d),M(d))},se=function(d){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;H(`"${d}" is deprecated and will be removed in the next major release.${h?` Use "${h}" instead.`:""}`)},ce=d=>typeof d=="function"?d():d,ee=d=>d&&typeof d.toPromise=="function",D=d=>ee(d)?d.toPromise():Promise.resolve(d),E=d=>d&&Promise.resolve(d)===d,I=()=>document.body.querySelector(`.${p.container}`),T=d=>{let h=I();return h?h.querySelector(d):null},S=d=>T(`.${d}`),A=()=>S(p.popup),C=()=>S(p.icon),Wn=()=>S(p["icon-content"]),Ti=()=>S(p.title),cu=()=>S(p["html-container"]),Si=()=>S(p.image),qr=()=>S(p["progress-steps"]),Ai=()=>S(p["validation-message"]),wn=()=>T(`.${p.actions} .${p.confirm}`),xi=()=>T(`.${p.actions} .${p.cancel}`),Ht=()=>T(`.${p.actions} .${p.deny}`),Nt=()=>S(p["input-label"]),Mi=()=>T(`.${p.loader}`),Kn=()=>S(p.actions),Ad=()=>S(p.footer),dr=()=>S(p["timer-progress-bar"]),uu=()=>S(p.close),Rm=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Ri=()=>{let d=A();if(!d)return[];let h=d.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),y=Array.from(h).sort((Z,we)=>{let xe=parseInt(Z.getAttribute("tabindex")||"0"),et=parseInt(we.getAttribute("tabindex")||"0");return xe>et?1:xe<et?-1:0}),_=d.querySelectorAll(Rm),P=Array.from(_).filter(Z=>Z.getAttribute("tabindex")!=="-1");return[...new Set(y.concat(P))].filter(Z=>Lt(Z))},Ni=()=>_n(document.body,p.shown)&&!_n(document.body,p["toast-shown"])&&!_n(document.body,p["no-backdrop"]),Pi=()=>{let d=A();return d?_n(d,p.toast):!1},lu=()=>{let d=A();return d?d.hasAttribute("data-loading"):!1},Vt=(d,h)=>{if(d.textContent="",h){let _=new DOMParser().parseFromString(h,"text/html"),P=_.querySelector("head");P&&Array.from(P.childNodes).forEach(we=>{d.appendChild(we)});let Z=_.querySelector("body");Z&&Array.from(Z.childNodes).forEach(we=>{we instanceof HTMLVideoElement||we instanceof HTMLAudioElement?d.appendChild(we.cloneNode(!0)):d.appendChild(we)})}},_n=(d,h)=>{if(!h)return!1;let y=h.split(/\s+/);for(let _=0;_<y.length;_++)if(!d.classList.contains(y[_]))return!1;return!0},xd=(d,h)=>{Array.from(d.classList).forEach(y=>{!Object.values(p).includes(y)&&!Object.values(b).includes(y)&&!Object.values(h.showClass||{}).includes(y)&&d.classList.remove(y)})},qt=(d,h,y)=>{if(xd(d,h),!h.customClass)return;let _=h.customClass[y];if(_){if(typeof _!="string"&&!_.forEach){M(`Invalid type of customClass.${y}! Expected string or iterable object, got "${typeof _}"`);return}Te(d,_)}},ta=(d,h)=>{if(!h)return null;switch(h){case"select":case"textarea":case"file":return d.querySelector(`.${p.popup} > .${p[h]}`);case"checkbox":return d.querySelector(`.${p.popup} > .${p.checkbox} input`);case"radio":return d.querySelector(`.${p.popup} > .${p.radio} input:checked`)||d.querySelector(`.${p.popup} > .${p.radio} input:first-child`);case"range":return d.querySelector(`.${p.popup} > .${p.range} input`);default:return d.querySelector(`.${p.popup} > .${p.input}`)}},du=d=>{if(d.focus(),d.type!=="file"){let h=d.value;d.value="",d.value=h}},hu=(d,h,y)=>{!d||!h||(typeof h=="string"&&(h=h.split(/\s+/).filter(Boolean)),h.forEach(_=>{Array.isArray(d)?d.forEach(P=>{y?P.classList.add(_):P.classList.remove(_)}):y?d.classList.add(_):d.classList.remove(_)}))},Te=(d,h)=>{hu(d,h,!0)},bn=(d,h)=>{hu(d,h,!1)},hr=(d,h)=>{let y=Array.from(d.children);for(let _=0;_<y.length;_++){let P=y[_];if(P instanceof HTMLElement&&_n(P,h))return P}},Qn=(d,h,y)=>{y===`${parseInt(y)}`&&(y=parseInt(y)),y||parseInt(y)===0?d.style.setProperty(h,typeof y=="number"?`${y}px`:y):d.style.removeProperty(h)},nt=function(d){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";d&&(d.style.display=h)},pt=d=>{d&&(d.style.display="none")},gt=function(d){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";d&&new MutationObserver(()=>{fr(d,d.innerHTML,h)}).observe(d,{childList:!0,subtree:!0})},Pt=(d,h,y,_)=>{let P=d.querySelector(h);P&&P.style.setProperty(y,_)},fr=function(d,h){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";h?nt(d,y):pt(d)},Lt=d=>!!(d&&(d.offsetWidth||d.offsetHeight||d.getClientRects().length)),Md=()=>!Lt(wn())&&!Lt(Ht())&&!Lt(xi()),Rd=d=>d.scrollHeight>d.clientHeight,Oi=d=>{let h=window.getComputedStyle(d),y=parseFloat(h.getPropertyValue("animation-duration")||"0"),_=parseFloat(h.getPropertyValue("transition-duration")||"0");return y>0||_>0},na=function(d){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=dr();y&&Lt(y)&&(h&&(y.style.transition="none",y.style.width="100%"),setTimeout(()=>{y.style.transition=`width ${d/1e3}s linear`,y.style.width="0%"},10))},Nd=()=>{let d=dr();if(!d)return;let h=parseInt(window.getComputedStyle(d).width);d.style.removeProperty("transition"),d.style.width="100%";let y=parseInt(window.getComputedStyle(d).width),_=h/y*100;d.style.width=`${_}%`},fu=()=>typeof window>"u"||typeof document>"u",Nm=`
 <div aria-labelledby="${p.title}" aria-describedby="${p["html-container"]}" class="${p.popup}" tabindex="-1">
   <button type="button" class="${p.close}"></button>
   <ul class="${p["progress-steps"]}"></ul>
   <div class="${p.icon}"></div>
   <img class="${p.image}" />
   <h2 class="${p.title}" id="${p.title}"></h2>
   <div class="${p["html-container"]}" id="${p["html-container"]}"></div>
   <input class="${p.input}" id="${p.input}" />
   <input type="file" class="${p.file}" />
   <div class="${p.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${p.select}" id="${p.select}"></select>
   <div class="${p.radio}"></div>
   <label class="${p.checkbox}">
     <input type="checkbox" id="${p.checkbox}" />
     <span class="${p.label}"></span>
   </label>
   <textarea class="${p.textarea}" id="${p.textarea}"></textarea>
   <div class="${p["validation-message"]}" id="${p["validation-message"]}"></div>
   <div class="${p.actions}">
     <div class="${p.loader}"></div>
     <button type="button" class="${p.confirm}"></button>
     <button type="button" class="${p.deny}"></button>
     <button type="button" class="${p.cancel}"></button>
   </div>
   <div class="${p.footer}"></div>
   <div class="${p["timer-progress-bar-container"]}">
     <div class="${p["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Pm=()=>{let d=I();return d?(d.remove(),bn([document.documentElement,document.body],[p["no-backdrop"],p["toast-shown"],p["has-column"]]),!0):!1},Zn=()=>{s.currentInstance.resetValidationMessage()},Pd=()=>{let d=A(),h=hr(d,p.input),y=hr(d,p.file),_=d.querySelector(`.${p.range} input`),P=d.querySelector(`.${p.range} output`),Z=hr(d,p.select),we=d.querySelector(`.${p.checkbox} input`),xe=hr(d,p.textarea);h.oninput=Zn,y.onchange=Zn,Z.onchange=Zn,we.onchange=Zn,xe.oninput=Zn,_.oninput=()=>{Zn(),P.value=_.value},_.onchange=()=>{Zn(),P.value=_.value}},Od=d=>typeof d=="string"?document.querySelector(d):d,Uo=d=>{let h=A();h.setAttribute("role",d.toast?"alert":"dialog"),h.setAttribute("aria-live",d.toast?"polite":"assertive"),d.toast||h.setAttribute("aria-modal","true")},pu=d=>{window.getComputedStyle(d).direction==="rtl"&&Te(I(),p.rtl)},gu=d=>{let h=Pm();if(fu()){j("SweetAlert2 requires document to initialize");return}let y=document.createElement("div");y.className=p.container,h&&Te(y,p["no-transition"]),Vt(y,Nm);let _=Od(d.target);_.appendChild(y),Uo(d),pu(_),Pd()},Yn=(d,h)=>{d instanceof HTMLElement?h.appendChild(d):typeof d=="object"?kd(d,h):d&&Vt(h,d)},kd=(d,h)=>{d.jquery?ra(h,d):Vt(h,d.toString())},ra=(d,h)=>{if(d.textContent="",0 in h)for(let y=0;y in h;y++)d.appendChild(h[y].cloneNode(!0));else d.appendChild(h.cloneNode(!0))},Fd=(d,h)=>{let y=Kn(),_=Mi();!y||!_||(!h.showConfirmButton&&!h.showDenyButton&&!h.showCancelButton?pt(y):nt(y),qt(y,h,"actions"),$o(y,_,h),Vt(_,h.loaderHtml||""),qt(_,h,"loader"))};function $o(d,h,y){let _=wn(),P=Ht(),Z=xi();!_||!P||!Z||(It(_,"confirm",y),It(P,"deny",y),It(Z,"cancel",y),Vd(_,P,Z,y),y.reverseButtons&&(y.toast?(d.insertBefore(Z,_),d.insertBefore(P,_)):(d.insertBefore(Z,h),d.insertBefore(P,h),d.insertBefore(_,h))))}function Vd(d,h,y,_){if(!_.buttonsStyling){bn([d,h,y],p.styled);return}Te([d,h,y],p.styled),_.confirmButtonColor&&(d.style.backgroundColor=_.confirmButtonColor,Te(d,p["default-outline"])),_.denyButtonColor&&(h.style.backgroundColor=_.denyButtonColor,Te(h,p["default-outline"])),_.cancelButtonColor&&(y.style.backgroundColor=_.cancelButtonColor,Te(y,p["default-outline"]))}function It(d,h,y){let _=N(h);fr(d,y[`show${_}Button`],"inline-block"),Vt(d,y[`${h}ButtonText`]||""),d.setAttribute("aria-label",y[`${h}ButtonAriaLabel`]||""),d.className=p[h],qt(d,y,`${h}Button`)}let Ld=(d,h)=>{let y=uu();y&&(Vt(y,h.closeButtonHtml||""),qt(y,h,"closeButton"),fr(y,h.showCloseButton),y.setAttribute("aria-label",h.closeButtonAriaLabel||""))},zo=(d,h)=>{let y=I();y&&(Ho(y,h.backdrop),Om(y,h.position),km(y,h.grow),qt(y,h,"container"))};function Ho(d,h){typeof h=="string"?d.style.background=h:h||Te([document.documentElement,document.body],p["no-backdrop"])}function Om(d,h){h&&(h in p?Te(d,p[h]):(M('The "position" parameter is not valid, defaulting to "center"'),Te(d,p.center)))}function km(d,h){h&&Te(d,p[`grow-${h}`])}var Ne={innerParams:new WeakMap,domCache:new WeakMap};let Fm=["input","file","range","select","radio","checkbox","textarea"],Vm=(d,h)=>{let y=A();if(!y)return;let _=Ne.innerParams.get(d),P=!_||h.input!==_.input;Fm.forEach(Z=>{let we=hr(y,p[Z]);we&&(mu(Z,h.inputAttributes),we.className=p[Z],P&&pt(we))}),h.input&&(P&&ia(h),oa(h))},ia=d=>{if(!d.input)return;if(!We[d.input]){j(`Unexpected type of input! Expected ${Object.keys(We).join(" | ")}, got "${d.input}"`);return}let h=yu(d.input);if(!h)return;let y=We[d.input](h,d);nt(h),d.inputAutoFocus&&setTimeout(()=>{du(y)})},jd=d=>{for(let h=0;h<d.attributes.length;h++){let y=d.attributes[h].name;["id","type","value","style"].includes(y)||d.removeAttribute(y)}},mu=(d,h)=>{let y=A();if(!y)return;let _=ta(y,d);if(_){jd(_);for(let P in h)_.setAttribute(P,h[P])}},oa=d=>{if(!d.input)return;let h=yu(d.input);h&&qt(h,d,"input")},On=(d,h)=>{!d.placeholder&&h.inputPlaceholder&&(d.placeholder=h.inputPlaceholder)},ki=(d,h,y)=>{if(y.inputLabel){let _=document.createElement("label"),P=p["input-label"];_.setAttribute("for",d.id),_.className=P,typeof y.customClass=="object"&&Te(_,y.customClass.inputLabel),_.innerText=y.inputLabel,h.insertAdjacentElement("beforebegin",_)}},yu=d=>{let h=A();if(h)return hr(h,p[d]||p.input)},Fi=(d,h)=>{["string","number"].includes(typeof h)?d.value=`${h}`:E(h)||M(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof h}"`)},We={};We.text=We.email=We.password=We.number=We.tel=We.url=We.search=We.date=We["datetime-local"]=We.time=We.week=We.month=(d,h)=>(Fi(d,h.inputValue),ki(d,d,h),On(d,h),d.type=h.input,d),We.file=(d,h)=>(ki(d,d,h),On(d,h),d),We.range=(d,h)=>{let y=d.querySelector("input"),_=d.querySelector("output");return Fi(y,h.inputValue),y.type=h.input,Fi(_,h.inputValue),ki(y,d,h),d},We.select=(d,h)=>{if(d.textContent="",h.inputPlaceholder){let y=document.createElement("option");Vt(y,h.inputPlaceholder),y.value="",y.disabled=!0,y.selected=!0,d.appendChild(y)}return ki(d,d,h),d},We.radio=d=>(d.textContent="",d),We.checkbox=(d,h)=>{let y=ta(A(),"checkbox");y.value="1",y.checked=!!h.inputValue;let _=d.querySelector("span");return Vt(_,h.inputPlaceholder||h.inputLabel),y},We.textarea=(d,h)=>{Fi(d,h.inputValue),On(d,h),ki(d,d,h);let y=_=>parseInt(window.getComputedStyle(_).marginLeft)+parseInt(window.getComputedStyle(_).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let _=parseInt(window.getComputedStyle(A()).width),P=()=>{if(!document.body.contains(d))return;let Z=d.offsetWidth+y(d);Z>_?A().style.width=`${Z}px`:Qn(A(),"width",h.width)};new MutationObserver(P).observe(d,{attributes:!0,attributeFilter:["style"]})}}),d};let Bd=(d,h)=>{let y=cu();y&&(gt(y),qt(y,h,"htmlContainer"),h.html?(Yn(h.html,y),nt(y,"block")):h.text?(y.textContent=h.text,nt(y,"block")):pt(y),Vm(d,h))},Ud=(d,h)=>{let y=Ad();y&&(gt(y),fr(y,h.footer,"block"),h.footer&&Yn(h.footer,y),qt(y,h,"footer"))},Lm=(d,h)=>{let y=Ne.innerParams.get(d),_=C();if(_){if(y&&h.icon===y.icon){pr(_,h),qo(_,h);return}if(!h.icon&&!h.iconHtml){pt(_);return}if(h.icon&&Object.keys(b).indexOf(h.icon)===-1){j(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${h.icon}"`),pt(_);return}nt(_),pr(_,h),qo(_,h),Te(_,h.showClass&&h.showClass.icon)}},qo=(d,h)=>{for(let[y,_]of Object.entries(b))h.icon!==y&&bn(d,_);Te(d,h.icon&&b[h.icon]),wu(d,h),$d(),qt(d,h,"icon")},$d=()=>{let d=A();if(!d)return;let h=window.getComputedStyle(d).getPropertyValue("background-color"),y=d.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let _=0;_<y.length;_++)y[_].style.backgroundColor=h},vu=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Go=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,pr=(d,h)=>{if(!h.icon&&!h.iconHtml)return;let y=d.innerHTML,_="";h.iconHtml?_=zd(h.iconHtml):h.icon==="success"?(_=vu,y=y.replace(/ style=".*?"/g,"")):h.icon==="error"?_=Go:h.icon&&(_=zd({question:"?",warning:"!",info:"i"}[h.icon])),y.trim()!==_.trim()&&Vt(d,_)},wu=(d,h)=>{if(h.iconColor){d.style.color=h.iconColor,d.style.borderColor=h.iconColor;for(let y of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Pt(d,y,"background-color",h.iconColor);Pt(d,".swal2-success-ring","border-color",h.iconColor)}},zd=d=>`<div class="${p["icon-content"]}">${d}</div>`,Hd=(d,h)=>{let y=Si();if(y){if(!h.imageUrl){pt(y);return}nt(y,""),y.setAttribute("src",h.imageUrl),y.setAttribute("alt",h.imageAlt||""),Qn(y,"width",h.imageWidth),Qn(y,"height",h.imageHeight),y.className=p.image,qt(y,h,"image")}},qd=(d,h)=>{let y=I(),_=A();if(!(!y||!_)){if(h.toast){Qn(y,"width",h.width),_.style.width="100%";let P=Mi();P&&_.insertBefore(P,C())}else Qn(_,"width",h.width);Qn(_,"padding",h.padding),h.color&&(_.style.color=h.color),h.background&&(_.style.background=h.background),pt(Ai()),Gd(_,h)}},Gd=(d,h)=>{let y=h.showClass||{};d.className=`${p.popup} ${Lt(d)?y.popup:""}`,h.toast?(Te([document.documentElement,document.body],p["toast-shown"]),Te(d,p.toast)):Te(d,p.modal),qt(d,h,"popup"),typeof h.customClass=="string"&&Te(d,h.customClass),h.icon&&Te(d,p[`icon-${h.icon}`])},_u=(d,h)=>{let y=qr();if(!y)return;let{progressSteps:_,currentProgressStep:P}=h;if(!_||_.length===0||P===void 0){pt(y);return}nt(y),y.textContent="",P>=_.length&&M("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),_.forEach((Z,we)=>{let xe=bu(Z);if(y.appendChild(xe),we===P&&Te(xe,p["active-progress-step"]),we!==_.length-1){let et=Wd(h);y.appendChild(et)}})},bu=d=>{let h=document.createElement("li");return Te(h,p["progress-step"]),Vt(h,d),h},Wd=d=>{let h=document.createElement("li");return Te(h,p["progress-step-line"]),d.progressStepsDistance&&Qn(h,"width",d.progressStepsDistance),h},Kd=(d,h)=>{let y=Ti();y&&(gt(y),fr(y,h.title||h.titleText,"block"),h.title&&Yn(h.title,y),h.titleText&&(y.innerText=h.titleText),qt(y,h,"title"))},Qd=(d,h)=>{qd(d,h),zo(d,h),_u(d,h),Lm(d,h),Hd(d,h),Kd(d,h),Ld(d,h),Bd(d,h),Fd(d,h),Ud(d,h);let y=A();typeof h.didRender=="function"&&y&&h.didRender(y),s.eventEmitter.emit("didRender",y)},jm=()=>Lt(A()),Eu=()=>{var d;return(d=wn())===null||d===void 0?void 0:d.click()},Zd=()=>{var d;return(d=Ht())===null||d===void 0?void 0:d.click()},Bm=()=>{var d;return(d=xi())===null||d===void 0?void 0:d.click()},dn=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),kn=d=>{d.keydownTarget&&d.keydownHandlerAdded&&(d.keydownTarget.removeEventListener("keydown",d.keydownHandler,{capture:d.keydownListenerCapture}),d.keydownHandlerAdded=!1)},sa=(d,h,y)=>{kn(d),h.toast||(d.keydownHandler=_=>aa(h,_,y),d.keydownTarget=h.keydownListenerCapture?window:A(),d.keydownListenerCapture=h.keydownListenerCapture,d.keydownTarget.addEventListener("keydown",d.keydownHandler,{capture:d.keydownListenerCapture}),d.keydownHandlerAdded=!0)},Vi=(d,h)=>{var y;let _=Ri();if(_.length){d=d+h,d===_.length?d=0:d===-1&&(d=_.length-1),_[d].focus();return}(y=A())===null||y===void 0||y.focus()},Iu=["ArrowRight","ArrowDown"],He=["ArrowLeft","ArrowUp"],aa=(d,h,y)=>{d&&(h.isComposing||h.keyCode===229||(d.stopKeydownPropagation&&h.stopPropagation(),h.key==="Enter"?Wo(h,d):h.key==="Tab"?Ko(h):[...Iu,...He].includes(h.key)?Um(h.key):h.key==="Escape"&&Yd(h,d,y)))},Wo=(d,h)=>{if(!ce(h.allowEnterKey))return;let y=ta(A(),h.input);if(d.target&&y&&d.target instanceof HTMLElement&&d.target.outerHTML===y.outerHTML){if(["textarea","file"].includes(h.input))return;Eu(),d.preventDefault()}},Ko=d=>{let h=d.target,y=Ri(),_=-1;for(let P=0;P<y.length;P++)if(h===y[P]){_=P;break}d.shiftKey?Vi(_,-1):Vi(_,1),d.stopPropagation(),d.preventDefault()},Um=d=>{let h=Kn(),y=wn(),_=Ht(),P=xi();if(!h||!y||!_||!P)return;let Z=[y,_,P];if(document.activeElement instanceof HTMLElement&&!Z.includes(document.activeElement))return;let we=Iu.includes(d)?"nextElementSibling":"previousElementSibling",xe=document.activeElement;if(xe){for(let et=0;et<h.children.length;et++){if(xe=xe[we],!xe)return;if(xe instanceof HTMLButtonElement&&Lt(xe))break}xe instanceof HTMLButtonElement&&xe.focus()}},Yd=(d,h,y)=>{ce(h.allowEscapeKey)&&(d.preventDefault(),y(dn.esc))};var Li={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let $m=()=>{let d=I();Array.from(document.body.children).forEach(y=>{y.contains(d)||(y.hasAttribute("aria-hidden")&&y.setAttribute("data-previous-aria-hidden",y.getAttribute("aria-hidden")||""),y.setAttribute("aria-hidden","true"))})},Jd=()=>{Array.from(document.body.children).forEach(h=>{h.hasAttribute("data-previous-aria-hidden")?(h.setAttribute("aria-hidden",h.getAttribute("data-previous-aria-hidden")||""),h.removeAttribute("data-previous-aria-hidden")):h.removeAttribute("aria-hidden")})},Xd=typeof window<"u"&&!!window.GestureEvent,Qo=()=>{if(Xd&&!_n(document.body,p.iosfix)){let d=document.body.scrollTop;document.body.style.top=`${d*-1}px`,Te(document.body,p.iosfix),gr()}},gr=()=>{let d=I();if(!d)return;let h;d.ontouchstart=y=>{h=eh(y)},d.ontouchmove=y=>{h&&(y.preventDefault(),y.stopPropagation())}},eh=d=>{let h=d.target,y=I(),_=cu();return!y||!_||th(d)||nh(d)?!1:h===y||!Rd(y)&&h instanceof HTMLElement&&h.tagName!=="INPUT"&&h.tagName!=="TEXTAREA"&&!(Rd(_)&&_.contains(h))},th=d=>d.touches&&d.touches.length&&d.touches[0].touchType==="stylus",nh=d=>d.touches&&d.touches.length>1,ji=()=>{if(_n(document.body,p.iosfix)){let d=parseInt(document.body.style.top,10);bn(document.body,p.iosfix),document.body.style.top="",document.body.scrollTop=d*-1}},zm=()=>{let d=document.createElement("div");d.className=p["scrollbar-measure"],document.body.appendChild(d);let h=d.getBoundingClientRect().width-d.clientWidth;return document.body.removeChild(d),h},Bi=null,Hm=d=>{Bi===null&&(document.body.scrollHeight>window.innerHeight||d==="scroll")&&(Bi=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Bi+zm()}px`)},mr=()=>{Bi!==null&&(document.body.style.paddingRight=`${Bi}px`,Bi=null)};function rh(d,h,y,_){Pi()?Ke(d,_):(c(y).then(()=>Ke(d,_)),kn(s)),Xd?(h.setAttribute("style","display:none !important"),h.removeAttribute("class"),h.innerHTML=""):h.remove(),Ni()&&(mr(),ji(),Jd()),qm()}function qm(){bn([document.documentElement,document.body],[p.shown,p["height-auto"],p["no-backdrop"],p["toast-shown"]])}function hn(d){d=Zo(d);let h=Li.swalPromiseResolve.get(this),y=ca(this);this.isAwaitingPromise?d.isDismissed||(Jn(this),h(d)):y&&h(d)}let ca=d=>{let h=A();if(!h)return!1;let y=Ne.innerParams.get(d);if(!y||_n(h,y.hideClass.popup))return!1;bn(h,y.showClass.popup),Te(h,y.hideClass.popup);let _=I();return bn(_,y.showClass.backdrop),Te(_,y.hideClass.backdrop),ih(d,h,y),!0};function Cu(d){let h=Li.swalPromiseReject.get(this);Jn(this),h&&h(d)}let Jn=d=>{d.isAwaitingPromise&&(delete d.isAwaitingPromise,Ne.innerParams.get(d)||d._destroy())},Zo=d=>typeof d>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},d),ih=(d,h,y)=>{var _;let P=I(),Z=Oi(h);typeof y.willClose=="function"&&y.willClose(h),(_=s.eventEmitter)===null||_===void 0||_.emit("willClose",h),Z?Du(d,h,P,y.returnFocus,y.didClose):rh(d,P,y.returnFocus,y.didClose)},Du=(d,h,y,_,P)=>{s.swalCloseEventFinishedCallback=rh.bind(null,d,y,_,P);let Z=function(we){if(we.target===h){var xe;(xe=s.swalCloseEventFinishedCallback)===null||xe===void 0||xe.call(s),delete s.swalCloseEventFinishedCallback,h.removeEventListener("animationend",Z),h.removeEventListener("transitionend",Z)}};h.addEventListener("animationend",Z),h.addEventListener("transitionend",Z)},Ke=(d,h)=>{setTimeout(()=>{var y;typeof h=="function"&&h.bind(d.params)(),(y=s.eventEmitter)===null||y===void 0||y.emit("didClose"),d._destroy&&d._destroy()})},Ui=d=>{let h=A();if(h||new wh,h=A(),!h)return;let y=Mi();Pi()?pt(C()):Gm(h,d),nt(y),h.setAttribute("data-loading","true"),h.setAttribute("aria-busy","true"),h.focus()},Gm=(d,h)=>{let y=Kn(),_=Mi();!y||!_||(!h&&Lt(wn())&&(h=wn()),nt(y),h&&(pt(h),_.setAttribute("data-button-to-replace",h.className),y.insertBefore(_,h)),Te([d,y],p.loading))},oh=(d,h)=>{h.input==="select"||h.input==="radio"?Xn(d,h):["text","email","number","tel","textarea"].some(y=>y===h.input)&&(ee(h.inputValue)||E(h.inputValue))&&(Ui(wn()),uh(d,h))},sh=(d,h)=>{let y=d.getInput();if(!y)return null;switch(h.input){case"checkbox":return ah(y);case"radio":return ua(y);case"file":return ch(y);default:return h.inputAutoTrim?y.value.trim():y.value}},ah=d=>d.checked?1:0,ua=d=>d.checked?d.value:null,ch=d=>d.files&&d.files.length?d.getAttribute("multiple")!==null?d.files:d.files[0]:null,Xn=(d,h)=>{let y=A();if(!y)return;let _=P=>{h.input==="select"?Wm(y,Jo(P),h):h.input==="radio"&&Yo(y,Jo(P),h)};ee(h.inputOptions)||E(h.inputOptions)?(Ui(wn()),D(h.inputOptions).then(P=>{d.hideLoading(),_(P)})):typeof h.inputOptions=="object"?_(h.inputOptions):j(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof h.inputOptions}`)},uh=(d,h)=>{let y=d.getInput();y&&(pt(y),D(h.inputValue).then(_=>{y.value=h.input==="number"?`${parseFloat(_)||0}`:`${_}`,nt(y),y.focus(),d.hideLoading()}).catch(_=>{j(`Error in inputValue promise: ${_}`),y.value="",nt(y),y.focus(),d.hideLoading()}))};function Wm(d,h,y){let _=hr(d,p.select);if(!_)return;let P=(Z,we,xe)=>{let et=document.createElement("option");et.value=xe,Vt(et,we),et.selected=la(xe,y.inputValue),Z.appendChild(et)};h.forEach(Z=>{let we=Z[0],xe=Z[1];if(Array.isArray(xe)){let et=document.createElement("optgroup");et.label=we,et.disabled=!1,_.appendChild(et),xe.forEach(pa=>P(et,pa[1],pa[0]))}else P(_,xe,we)}),_.focus()}function Yo(d,h,y){let _=hr(d,p.radio);if(!_)return;h.forEach(Z=>{let we=Z[0],xe=Z[1],et=document.createElement("input"),pa=document.createElement("label");et.type="radio",et.name=p.radio,et.value=we,la(we,y.inputValue)&&(et.checked=!0);let Qm=document.createElement("span");Vt(Qm,xe),Qm.className=p.label,pa.appendChild(et),pa.appendChild(Qm),_.appendChild(pa)});let P=_.querySelectorAll("input");P.length&&P[0].focus()}let Jo=d=>{let h=[];return d instanceof Map?d.forEach((y,_)=>{let P=y;typeof P=="object"&&(P=Jo(P)),h.push([_,P])}):Object.keys(d).forEach(y=>{let _=d[y];typeof _=="object"&&(_=Jo(_)),h.push([y,_])}),h},la=(d,h)=>!!h&&h.toString()===d.toString(),da=d=>{let h=Ne.innerParams.get(d);d.disableButtons(),h.input?dh(d,"confirm"):Xo(d,!0)},lh=d=>{let h=Ne.innerParams.get(d);d.disableButtons(),h.returnInputValueOnDeny?dh(d,"deny"):Gr(d,!1)},ha=(d,h)=>{d.disableButtons(),h(dn.cancel)},dh=(d,h)=>{let y=Ne.innerParams.get(d);if(!y.input){j(`The "input" parameter is needed to be set when using returnInputValueOn${N(h)}`);return}let _=d.getInput(),P=sh(d,y);y.inputValidator?hh(d,P,h):_&&!_.checkValidity()?(d.enableButtons(),d.showValidationMessage(y.validationMessage||_.validationMessage)):h==="deny"?Gr(d,P):Xo(d,P)},hh=(d,h,y)=>{let _=Ne.innerParams.get(d);d.disableInput(),Promise.resolve().then(()=>D(_.inputValidator(h,_.validationMessage))).then(Z=>{d.enableButtons(),d.enableInput(),Z?d.showValidationMessage(Z):y==="deny"?Gr(d,h):Xo(d,h)})},Gr=(d,h)=>{let y=Ne.innerParams.get(d||void 0);y.showLoaderOnDeny&&Ui(Ht()),y.preDeny?(d.isAwaitingPromise=!0,Promise.resolve().then(()=>D(y.preDeny(h,y.validationMessage))).then(P=>{P===!1?(d.hideLoading(),Jn(d)):d.close({isDenied:!0,value:typeof P>"u"?h:P})}).catch(P=>Su(d||void 0,P))):d.close({isDenied:!0,value:h})},Tu=(d,h)=>{d.close({isConfirmed:!0,value:h})},Su=(d,h)=>{d.rejectPromise(h)},Xo=(d,h)=>{let y=Ne.innerParams.get(d||void 0);y.showLoaderOnConfirm&&Ui(),y.preConfirm?(d.resetValidationMessage(),d.isAwaitingPromise=!0,Promise.resolve().then(()=>D(y.preConfirm(h,y.validationMessage))).then(P=>{Lt(Ai())||P===!1?(d.hideLoading(),Jn(d)):Tu(d,typeof P>"u"?h:P)}).catch(P=>Su(d||void 0,P))):Tu(d,h)};function $i(){let d=Ne.innerParams.get(this);if(!d)return;let h=Ne.domCache.get(this);pt(h.loader),Pi()?d.icon&&nt(C()):fh(h),bn([h.popup,h.actions],p.loading),h.popup.removeAttribute("aria-busy"),h.popup.removeAttribute("data-loading"),h.confirmButton.disabled=!1,h.denyButton.disabled=!1,h.cancelButton.disabled=!1}let fh=d=>{let h=d.popup.getElementsByClassName(d.loader.getAttribute("data-button-to-replace"));h.length?nt(h[0],"inline-block"):Md()&&pt(d.actions)};function es(){let d=Ne.innerParams.get(this),h=Ne.domCache.get(this);return h?ta(h.popup,d.input):null}function Au(d,h,y){let _=Ne.domCache.get(d);h.forEach(P=>{_[P].disabled=y})}function xu(d,h){let y=A();if(!(!y||!d))if(d.type==="radio"){let _=y.querySelectorAll(`[name="${p.radio}"]`);for(let P=0;P<_.length;P++)_[P].disabled=h}else d.disabled=h}function yr(){Au(this,["confirmButton","denyButton","cancelButton"],!1)}function Mu(){Au(this,["confirmButton","denyButton","cancelButton"],!0)}function Ru(){xu(this.getInput(),!1)}function Nu(){xu(this.getInput(),!0)}function Pu(d){let h=Ne.domCache.get(this),y=Ne.innerParams.get(this);Vt(h.validationMessage,d),h.validationMessage.className=p["validation-message"],y.customClass&&y.customClass.validationMessage&&Te(h.validationMessage,y.customClass.validationMessage),nt(h.validationMessage);let _=this.getInput();_&&(_.setAttribute("aria-invalid","true"),_.setAttribute("aria-describedby",p["validation-message"]),du(_),Te(_,p.inputerror))}function ts(){let d=Ne.domCache.get(this);d.validationMessage&&pt(d.validationMessage);let h=this.getInput();h&&(h.removeAttribute("aria-invalid"),h.removeAttribute("aria-describedby"),bn(h,p.inputerror))}let mt={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},ph=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],gh={allowEnterKey:void 0},zi=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],u=d=>Object.prototype.hasOwnProperty.call(mt,d),f=d=>ph.indexOf(d)!==-1,m=d=>gh[d],v=d=>{u(d)||M(`Unknown parameter "${d}"`)},R=d=>{zi.includes(d)&&M(`The parameter "${d}" is incompatible with toasts`)},k=d=>{let h=m(d);h&&se(d,h)},q=d=>{d.backdrop===!1&&d.allowOutsideClick&&M('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(let h in d)v(h),d.toast&&R(h),k(h)};function Ve(d){let h=A(),y=Ne.innerParams.get(this);if(!h||_n(h,y.hideClass.popup)){M("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let _=Ct(d),P=Object.assign({},y,_);Qd(this,P),Ne.innerParams.set(this,P),Object.defineProperties(this,{params:{value:Object.assign({},this.params,d),writable:!1,enumerable:!0}})}let Ct=d=>{let h={};return Object.keys(d).forEach(y=>{f(y)?h[y]=d[y]:M(`Invalid parameter to update: ${y}`)}),h};function Ae(){let d=Ne.domCache.get(this),h=Ne.innerParams.get(this);if(!h){Dt(this);return}d.popup&&s.swalCloseEventFinishedCallback&&(s.swalCloseEventFinishedCallback(),delete s.swalCloseEventFinishedCallback),typeof h.didDestroy=="function"&&h.didDestroy(),s.eventEmitter.emit("didDestroy"),Ot(this)}let Ot=d=>{Dt(d),delete d.params,delete s.keydownHandler,delete s.keydownTarget,delete s.currentInstance},Dt=d=>{d.isAwaitingPromise?(vr(Ne,d),d.isAwaitingPromise=!0):(vr(Li,d),vr(Ne,d),delete d.isAwaitingPromise,delete d.disableButtons,delete d.enableButtons,delete d.getInput,delete d.disableInput,delete d.enableInput,delete d.hideLoading,delete d.disableLoading,delete d.showValidationMessage,delete d.resetValidationMessage,delete d.close,delete d.closePopup,delete d.closeModal,delete d.closeToast,delete d.rejectPromise,delete d.update,delete d._destroy)},vr=(d,h)=>{for(let y in d)d[y].delete(h)};var En=Object.freeze({__proto__:null,_destroy:Ae,close:hn,closeModal:hn,closePopup:hn,closeToast:hn,disableButtons:Mu,disableInput:Nu,disableLoading:$i,enableButtons:yr,enableInput:Ru,getInput:es,handleAwaitingPromise:Jn,hideLoading:$i,rejectPromise:Cu,resetValidationMessage:ts,showValidationMessage:Pu,update:Ve});let fa=(d,h,y)=>{d.toast?Ou(d,h,y):(d1(h),h1(h),f1(d,h,y))},Ou=(d,h,y)=>{h.popup.onclick=()=>{d&&(l1(d)||d.timer||d.input)||y(dn.close)}},l1=d=>!!(d.showConfirmButton||d.showDenyButton||d.showCancelButton||d.showCloseButton),mh=!1,d1=d=>{d.popup.onmousedown=()=>{d.container.onmouseup=function(h){d.container.onmouseup=()=>{},h.target===d.container&&(mh=!0)}}},h1=d=>{d.container.onmousedown=h=>{h.target===d.container&&h.preventDefault(),d.popup.onmouseup=function(y){d.popup.onmouseup=()=>{},(y.target===d.popup||y.target instanceof HTMLElement&&d.popup.contains(y.target))&&(mh=!0)}}},f1=(d,h,y)=>{h.container.onclick=_=>{if(mh){mh=!1;return}_.target===h.container&&ce(d.allowOutsideClick)&&y(dn.backdrop)}},p1=d=>typeof d=="object"&&d.jquery,VE=d=>d instanceof Element||p1(d),g1=d=>{let h={};return typeof d[0]=="object"&&!VE(d[0])?Object.assign(h,d[0]):["title","html","icon"].forEach((y,_)=>{let P=d[_];typeof P=="string"||VE(P)?h[y]=P:P!==void 0&&j(`Unexpected type of ${y}! Expected "string" or "Element", got ${typeof P}`)}),h};function m1(){for(var d=arguments.length,h=new Array(d),y=0;y<d;y++)h[y]=arguments[y];return new this(...h)}function y1(d){class h extends this{_main(_,P){return super._main(_,Object.assign({},d,P))}}return h}let v1=()=>s.timeout&&s.timeout.getTimerLeft(),LE=()=>{if(s.timeout)return Nd(),s.timeout.stop()},jE=()=>{if(s.timeout){let d=s.timeout.start();return na(d),d}},w1=()=>{let d=s.timeout;return d&&(d.running?LE():jE())},_1=d=>{if(s.timeout){let h=s.timeout.increase(d);return na(h,!0),h}},b1=()=>!!(s.timeout&&s.timeout.isRunning()),BE=!1,Km={};function E1(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Km[d]=this,BE||(document.body.addEventListener("click",I1),BE=!0)}let I1=d=>{for(let h=d.target;h&&h!==document;h=h.parentNode)for(let y in Km){let _=h.getAttribute(y);if(_){Km[y].fire({template:_});return}}};class C1{constructor(){this.events={}}_getHandlersByEventName(h){return typeof this.events[h]>"u"&&(this.events[h]=[]),this.events[h]}on(h,y){let _=this._getHandlersByEventName(h);_.includes(y)||_.push(y)}once(h,y){var _=this;let P=function(){_.removeListener(h,P);for(var Z=arguments.length,we=new Array(Z),xe=0;xe<Z;xe++)we[xe]=arguments[xe];y.apply(_,we)};this.on(h,P)}emit(h){for(var y=arguments.length,_=new Array(y>1?y-1:0),P=1;P<y;P++)_[P-1]=arguments[P];this._getHandlersByEventName(h).forEach(Z=>{try{Z.apply(this,_)}catch(we){console.error(we)}})}removeListener(h,y){let _=this._getHandlersByEventName(h),P=_.indexOf(y);P>-1&&_.splice(P,1)}removeAllListeners(h){this.events[h]!==void 0&&(this.events[h].length=0)}reset(){this.events={}}}s.eventEmitter=new C1;var D1=Object.freeze({__proto__:null,argsToParams:g1,bindClickHandler:E1,clickCancel:Bm,clickConfirm:Eu,clickDeny:Zd,enableLoading:Ui,fire:m1,getActions:Kn,getCancelButton:xi,getCloseButton:uu,getConfirmButton:wn,getContainer:I,getDenyButton:Ht,getFocusableElements:Ri,getFooter:Ad,getHtmlContainer:cu,getIcon:C,getIconContent:Wn,getImage:Si,getInputLabel:Nt,getLoader:Mi,getPopup:A,getProgressSteps:qr,getTimerLeft:v1,getTimerProgressBar:dr,getTitle:Ti,getValidationMessage:Ai,increaseTimer:_1,isDeprecatedParameter:m,isLoading:lu,isTimerRunning:b1,isUpdatableParameter:f,isValidParameter:u,isVisible:jm,mixin:y1,off:(d,h)=>{if(!d){s.eventEmitter.reset();return}h?s.eventEmitter.removeListener(d,h):s.eventEmitter.removeAllListeners(d)},on:(d,h)=>{s.eventEmitter.on(d,h)},once:(d,h)=>{s.eventEmitter.once(d,h)},resumeTimer:jE,showLoading:Ui,stopTimer:LE,toggleTimer:w1});class T1{constructor(h,y){this.callback=h,this.remaining=y,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(h){let y=this.running;return y&&this.stop(),this.remaining+=h,y&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let UE=["swal-title","swal-html","swal-footer"],S1=d=>{let h=typeof d.template=="string"?document.querySelector(d.template):d.template;if(!h)return{};let y=h.content;return k1(y),Object.assign(A1(y),x1(y),M1(y),R1(y),N1(y),P1(y),O1(y,UE))},A1=d=>{let h={};return Array.from(d.querySelectorAll("swal-param")).forEach(_=>{ns(_,["name","value"]);let P=_.getAttribute("name"),Z=_.getAttribute("value");!P||!Z||(typeof mt[P]=="boolean"?h[P]=Z!=="false":typeof mt[P]=="object"?h[P]=JSON.parse(Z):h[P]=Z)}),h},x1=d=>{let h={};return Array.from(d.querySelectorAll("swal-function-param")).forEach(_=>{let P=_.getAttribute("name"),Z=_.getAttribute("value");!P||!Z||(h[P]=new Function(`return ${Z}`)())}),h},M1=d=>{let h={};return Array.from(d.querySelectorAll("swal-button")).forEach(_=>{ns(_,["type","color","aria-label"]);let P=_.getAttribute("type");!P||!["confirm","cancel","deny"].includes(P)||(h[`${P}ButtonText`]=_.innerHTML,h[`show${N(P)}Button`]=!0,_.hasAttribute("color")&&(h[`${P}ButtonColor`]=_.getAttribute("color")),_.hasAttribute("aria-label")&&(h[`${P}ButtonAriaLabel`]=_.getAttribute("aria-label")))}),h},R1=d=>{let h={},y=d.querySelector("swal-image");return y&&(ns(y,["src","width","height","alt"]),y.hasAttribute("src")&&(h.imageUrl=y.getAttribute("src")||void 0),y.hasAttribute("width")&&(h.imageWidth=y.getAttribute("width")||void 0),y.hasAttribute("height")&&(h.imageHeight=y.getAttribute("height")||void 0),y.hasAttribute("alt")&&(h.imageAlt=y.getAttribute("alt")||void 0)),h},N1=d=>{let h={},y=d.querySelector("swal-icon");return y&&(ns(y,["type","color"]),y.hasAttribute("type")&&(h.icon=y.getAttribute("type")),y.hasAttribute("color")&&(h.iconColor=y.getAttribute("color")),h.iconHtml=y.innerHTML),h},P1=d=>{let h={},y=d.querySelector("swal-input");y&&(ns(y,["type","label","placeholder","value"]),h.input=y.getAttribute("type")||"text",y.hasAttribute("label")&&(h.inputLabel=y.getAttribute("label")),y.hasAttribute("placeholder")&&(h.inputPlaceholder=y.getAttribute("placeholder")),y.hasAttribute("value")&&(h.inputValue=y.getAttribute("value")));let _=Array.from(d.querySelectorAll("swal-input-option"));return _.length&&(h.inputOptions={},_.forEach(P=>{ns(P,["value"]);let Z=P.getAttribute("value");if(!Z)return;let we=P.innerHTML;h.inputOptions[Z]=we})),h},O1=(d,h)=>{let y={};for(let _ in h){let P=h[_],Z=d.querySelector(P);Z&&(ns(Z,[]),y[P.replace(/^swal-/,"")]=Z.innerHTML.trim())}return y},k1=d=>{let h=UE.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(d.children).forEach(y=>{let _=y.tagName.toLowerCase();h.includes(_)||M(`Unrecognized element <${_}>`)})},ns=(d,h)=>{Array.from(d.attributes).forEach(y=>{h.indexOf(y.name)===-1&&M([`Unrecognized attribute "${y.name}" on <${d.tagName.toLowerCase()}>.`,`${h.length?`Allowed attributes are: ${h.join(", ")}`:"To set the value, use HTML within the element."}`])})},$E=10,F1=d=>{let h=I(),y=A();typeof d.willOpen=="function"&&d.willOpen(y),s.eventEmitter.emit("willOpen",y);let P=window.getComputedStyle(document.body).overflowY;j1(h,y,d),setTimeout(()=>{V1(h,y)},$E),Ni()&&(L1(h,d.scrollbarPadding,P),$m()),!Pi()&&!s.previousActiveElement&&(s.previousActiveElement=document.activeElement),typeof d.didOpen=="function"&&setTimeout(()=>d.didOpen(y)),s.eventEmitter.emit("didOpen",y),bn(h,p["no-transition"])},yh=d=>{let h=A();if(d.target!==h)return;let y=I();h.removeEventListener("animationend",yh),h.removeEventListener("transitionend",yh),y.style.overflowY="auto"},V1=(d,h)=>{Oi(h)?(d.style.overflowY="hidden",h.addEventListener("animationend",yh),h.addEventListener("transitionend",yh)):d.style.overflowY="auto"},L1=(d,h,y)=>{Qo(),h&&y!=="hidden"&&Hm(y),setTimeout(()=>{d.scrollTop=0})},j1=(d,h,y)=>{Te(d,y.showClass.backdrop),y.animation?(h.style.setProperty("opacity","0","important"),nt(h,"grid"),setTimeout(()=>{Te(h,y.showClass.popup),h.style.removeProperty("opacity")},$E)):nt(h,"grid"),Te([document.documentElement,document.body],p.shown),y.heightAuto&&y.backdrop&&!y.toast&&Te([document.documentElement,document.body],p["height-auto"])};var zE={email:(d,h)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(d)?Promise.resolve():Promise.resolve(h||"Invalid email address"),url:(d,h)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(d)?Promise.resolve():Promise.resolve(h||"Invalid URL")};function B1(d){d.inputValidator||(d.input==="email"&&(d.inputValidator=zE.email),d.input==="url"&&(d.inputValidator=zE.url))}function U1(d){(!d.target||typeof d.target=="string"&&!document.querySelector(d.target)||typeof d.target!="string"&&!d.target.appendChild)&&(M('Target parameter is not valid, defaulting to "body"'),d.target="body")}function $1(d){B1(d),d.showLoaderOnConfirm&&!d.preConfirm&&M(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),U1(d),typeof d.title=="string"&&(d.title=d.title.split(`
`).join("<br />")),gu(d)}let wr;var vh=new WeakMap;class at{constructor(){if(r(this,vh,void 0),typeof window>"u")return;wr=this;for(var h=arguments.length,y=new Array(h),_=0;_<h;_++)y[_]=arguments[_];let P=Object.freeze(this.constructor.argsToParams(y));this.params=P,this.isAwaitingPromise=!1,i(vh,this,this._main(wr.params))}_main(h){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(q(Object.assign({},y,h)),s.currentInstance){let Z=Li.swalPromiseResolve.get(s.currentInstance),{isAwaitingPromise:we}=s.currentInstance;s.currentInstance._destroy(),we||Z({isDismissed:!0}),Ni()&&Jd()}s.currentInstance=wr;let _=H1(h,y);$1(_),Object.freeze(_),s.timeout&&(s.timeout.stop(),delete s.timeout),clearTimeout(s.restoreFocusTimeout);let P=q1(wr);return Qd(wr,_),Ne.innerParams.set(wr,_),z1(wr,P,_)}then(h){return t(vh,this).then(h)}finally(h){return t(vh,this).finally(h)}}let z1=(d,h,y)=>new Promise((_,P)=>{let Z=we=>{d.close({isDismissed:!0,dismiss:we})};Li.swalPromiseResolve.set(d,_),Li.swalPromiseReject.set(d,P),h.confirmButton.onclick=()=>{da(d)},h.denyButton.onclick=()=>{lh(d)},h.cancelButton.onclick=()=>{ha(d,Z)},h.closeButton.onclick=()=>{Z(dn.close)},fa(y,h,Z),sa(s,y,Z),oh(d,y),F1(y),G1(s,y,Z),W1(h,y),setTimeout(()=>{h.container.scrollTop=0})}),H1=(d,h)=>{let y=S1(d),_=Object.assign({},mt,h,y,d);return _.showClass=Object.assign({},mt.showClass,_.showClass),_.hideClass=Object.assign({},mt.hideClass,_.hideClass),_.animation===!1&&(_.showClass={backdrop:"swal2-noanimation"},_.hideClass={}),_},q1=d=>{let h={popup:A(),container:I(),actions:Kn(),confirmButton:wn(),denyButton:Ht(),cancelButton:xi(),loader:Mi(),closeButton:uu(),validationMessage:Ai(),progressSteps:qr()};return Ne.domCache.set(d,h),h},G1=(d,h,y)=>{let _=dr();pt(_),h.timer&&(d.timeout=new T1(()=>{y("timer"),delete d.timeout},h.timer),h.timerProgressBar&&(nt(_),qt(_,h,"timerProgressBar"),setTimeout(()=>{d.timeout&&d.timeout.running&&na(h.timer)})))},W1=(d,h)=>{if(!h.toast){if(!ce(h.allowEnterKey)){se("allowEnterKey"),Z1();return}K1(d)||Q1(d,h)||Vi(-1,1)}},K1=d=>{let h=Array.from(d.popup.querySelectorAll("[autofocus]"));for(let y of h)if(y instanceof HTMLElement&&Lt(y))return y.focus(),!0;return!1},Q1=(d,h)=>h.focusDeny&&Lt(d.denyButton)?(d.denyButton.focus(),!0):h.focusCancel&&Lt(d.cancelButton)?(d.cancelButton.focus(),!0):h.focusConfirm&&Lt(d.confirmButton)?(d.confirmButton.focus(),!0):!1,Z1=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let d=new Date,h=localStorage.getItem("swal-initiation");h?(d.getTime()-Date.parse(h))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let y=document.createElement("audio");y.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",y.loop=!0,document.body.appendChild(y),setTimeout(()=>{y.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${d}`)}at.prototype.disableButtons=Mu,at.prototype.enableButtons=yr,at.prototype.getInput=es,at.prototype.disableInput=Nu,at.prototype.enableInput=Ru,at.prototype.hideLoading=$i,at.prototype.disableLoading=$i,at.prototype.showValidationMessage=Pu,at.prototype.resetValidationMessage=ts,at.prototype.close=hn,at.prototype.closePopup=hn,at.prototype.closeModal=hn,at.prototype.closeToast=hn,at.prototype.rejectPromise=Cu,at.prototype.update=Ve,at.prototype._destroy=Ae,Object.assign(at,D1),Object.keys(En).forEach(d=>{at[d]=function(){return wr&&wr[d]?wr[d](...arguments):null}}),at.DismissReason=dn,at.version="11.14.5";let wh=at;return wh.default=wh,wh});typeof $r<"u"&&$r.Sweetalert2&&($r.swal=$r.sweetAlert=$r.Swal=$r.SweetAlert=$r.Sweetalert2);typeof document<"u"&&function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});function rI(n,e){return Object.is(n,e)}var St=null,Ih=!1,Ch=1,Wr=Symbol("SIGNAL");function Pe(n){let e=St;return St=n,e}function iI(){return St}var Vu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function iy(n){if(Ih)throw new Error("");if(St===null)return;St.consumerOnSignalRead(n);let e=St.nextProducerIndex++;if(Ah(St),e<St.producerNode.length&&St.producerNode[e]!==n&&Fu(St)){let t=St.producerNode[e];Sh(t,St.producerIndexOfThis[e])}St.producerNode[e]!==n&&(St.producerNode[e]=n,St.producerIndexOfThis[e]=Fu(St)?cI(n,St,e):0),St.producerLastReadVersion[e]=n.version}function X1(){Ch++}function oI(n){if(!(Fu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ch)){if(!n.producerMustRecompute(n)&&!sy(n)){n.dirty=!1,n.lastCleanEpoch=Ch;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Ch}}function sI(n){if(n.liveConsumerNode===void 0)return;let e=Ih;Ih=!0;try{for(let t of n.liveConsumerNode)t.dirty||eN(t)}finally{Ih=e}}function aI(){return St?.consumerAllowSignalWrites!==!1}function eN(n){n.dirty=!0,sI(n),n.consumerMarkedDirty?.(n)}function Th(n){return n&&(n.nextProducerIndex=0),Pe(n)}function oy(n,e){if(Pe(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Fu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Sh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function sy(n){Ah(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(oI(t),r!==t.version))return!0}return!1}function ay(n){if(Ah(n),Fu(n))for(let e=0;e<n.producerNode.length;e++)Sh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function cI(n,e,t){if(uI(n),n.liveConsumerNode.length===0&&lI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=cI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Sh(n,e){if(uI(n),n.liveConsumerNode.length===1&&lI(n))for(let r=0;r<n.producerNode.length;r++)Sh(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ah(i),i.producerIndexOfThis[r]=e}}function Fu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ah(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function uI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function lI(n){return n.producerNode!==void 0}function dI(n){let e=Object.create(tN);e.computation=n;let t=()=>{if(oI(e),iy(e),e.value===Dh)throw e.error;return e.value};return t[Wr]=e,t}var ny=Symbol("UNSET"),ry=Symbol("COMPUTING"),Dh=Symbol("ERRORED"),tN=De(G({},Vu),{value:ny,dirty:!0,error:null,equal:rI,producerMustRecompute(n){return n.value===ny||n.value===ry},producerRecomputeValue(n){if(n.value===ry)throw new Error("Detected cycle in computations.");let e=n.value;n.value=ry;let t=Th(n),r;try{r=n.computation()}catch(i){r=Dh,n.error=i}finally{oy(n,t)}if(e!==ny&&e!==Dh&&r!==Dh&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function nN(){throw new Error}var hI=nN;function fI(){hI()}function pI(n){hI=n}var rN=null;function gI(n){let e=Object.create(yI);e.value=n;let t=()=>(iy(e),e.value);return t[Wr]=e,t}function cy(n,e){aI()||fI(),n.equal(n.value,e)||(n.value=e,iN(n))}function mI(n,e){aI()||fI(),cy(n,e(n.value))}var yI=De(G({},Vu),{equal:rI,value:void 0});function iN(n){n.version++,X1(),sI(n),rN?.()}function he(n){return typeof n=="function"}function ga(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var xh=ga(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function rs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var rt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(he(r))try{r()}catch(o){e=o instanceof xh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{vI(o)}catch(s){e=e??[],s instanceof xh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new xh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)vI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&rs(t,e)}remove(e){let{_finalizers:t}=this;t&&rs(t,e),e instanceof n&&e._removeParent(this)}};rt.EMPTY=(()=>{let n=new rt;return n.closed=!0,n})();var uy=rt.EMPTY;function Mh(n){return n instanceof rt||n&&"closed"in n&&he(n.remove)&&he(n.add)&&he(n.unsubscribe)}function vI(n){he(n)?n():n.unsubscribe()}var er={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ma={setTimeout(n,e,...t){let{delegate:r}=ma;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ma;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Rh(n){ma.setTimeout(()=>{let{onUnhandledError:e}=er;if(e)e(n);else throw n})}function Lu(){}var wI=ly("C",void 0,void 0);function _I(n){return ly("E",void 0,n)}function bI(n){return ly("N",n,void 0)}function ly(n,e,t){return{kind:n,value:e,error:t}}var is=null;function ya(n){if(er.useDeprecatedSynchronousErrorHandling){let e=!is;if(e&&(is={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=is;if(is=null,t)throw r}}else n()}function EI(n){er.useDeprecatedSynchronousErrorHandling&&is&&(is.errorThrown=!0,is.error=n)}var os=class extends rt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Mh(e)&&e.add(this)):this.destination=aN}static create(e,t,r){return new Kr(e,t,r)}next(e){this.isStopped?hy(bI(e),this):this._next(e)}error(e){this.isStopped?hy(_I(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hy(wI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},oN=Function.prototype.bind;function dy(n,e){return oN.call(n,e)}var fy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Nh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Nh(r)}else Nh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Nh(t)}}},Kr=class extends os{constructor(e,t,r){super();let i;if(he(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&er.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&dy(e.next,o),error:e.error&&dy(e.error,o),complete:e.complete&&dy(e.complete,o)}):i=e}this.destination=new fy(i)}};function Nh(n){er.useDeprecatedSynchronousErrorHandling?EI(n):Rh(n)}function sN(n){throw n}function hy(n,e){let{onStoppedNotification:t}=er;t&&ma.setTimeout(()=>t(n,e))}var aN={closed:!0,next:Lu,error:sN,complete:Lu};var va=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Xt(n){return n}function Ph(...n){return py(n)}function py(n){return n.length===0?Xt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=uN(t)?t:new Kr(t,r,i);return ya(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=II(r),new r((i,o)=>{let s=new Kr({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[va](){return this}pipe(...t){return py(t)(this)}toPromise(t){return t=II(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function II(n){var e;return(e=n??er.Promise)!==null&&e!==void 0?e:Promise}function cN(n){return n&&he(n.next)&&he(n.error)&&he(n.complete)}function uN(n){return n&&n instanceof os||cN(n)&&Mh(n)}function gy(n){return he(n?.lift)}function _e(n){return e=>{if(gy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function be(n,e,t,r,i){return new my(n,e,t,r,i)}var my=class extends os{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function wa(){return _e((n,e)=>{let t=null;n._refCount++;let r=be(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var _a=class extends Ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,gy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rt;let t=this.getSubject();e.add(this.source.subscribe(be(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rt.EMPTY)}return e}refCount(){return wa()(this)}};var CI=ga(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ye=(()=>{class n extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Oh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new CI}next(t){ya(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ya(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ya(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?uy:(this.currentObservers=null,o.push(t),new rt(()=>{this.currentObservers=null,rs(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ie;return t.source=this,t}}return n.create=(e,t)=>new Oh(e,t),n})(),Oh=class extends Ye{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:uy}};var jt=class extends Ye{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ju={now(){return(ju.delegate||Date).now()},delegate:void 0};var kh=class extends Ye{constructor(e=1/0,t=1/0,r=ju){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Fh=class extends rt{constructor(e,t){super()}schedule(e,t=0){return this}};var Bu={setInterval(n,e,...t){let{delegate:r}=Bu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Bu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ba=class extends Fh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Bu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Bu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,rs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ea=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ea.now=ju.now;var Ia=class extends Ea{constructor(e,t=Ea.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var yy=new Ia(ba);var Vh=class extends ba{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Lh=class extends Ia{};var vy=new Lh(Vh);var en=new Ie(n=>n.complete());function DI(n){return n&&he(n.schedule)}function wy(n){return n[n.length-1]}function jh(n){return he(wy(n))?n.pop():void 0}function br(n){return DI(wy(n))?n.pop():void 0}function TI(n,e){return typeof wy(n)=="number"?n.pop():e}var Bh=n=>n&&typeof n.length=="number"&&typeof n!="function";function Uh(n){return he(n?.then)}function $h(n){return he(n[va])}function zh(n){return Symbol.asyncIterator&&he(n?.[Symbol.asyncIterator])}function Hh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function lN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var qh=lN();function Gh(n){return he(n?.[qh])}function Wh(n){return qE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield _h(t.read());if(i)return yield _h(void 0);yield yield _h(r)}}finally{t.releaseLock()}})}function Kh(n){return he(n?.getReader)}function Qe(n){if(n instanceof Ie)return n;if(n!=null){if($h(n))return dN(n);if(Bh(n))return hN(n);if(Uh(n))return fN(n);if(zh(n))return SI(n);if(Gh(n))return pN(n);if(Kh(n))return gN(n)}throw Hh(n)}function dN(n){return new Ie(e=>{let t=n[va]();if(he(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function hN(n){return new Ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function fN(n){return new Ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Rh)})}function pN(n){return new Ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function SI(n){return new Ie(e=>{mN(n,e).catch(t=>e.error(t))})}function gN(n){return SI(Wh(n))}function mN(n,e){var t,r,i,o;return HE(this,void 0,void 0,function*(){try{for(t=GE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function fn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Hi(n,e=0){return _e((t,r)=>{t.subscribe(be(r,i=>fn(r,n,()=>r.next(i),e),()=>fn(r,n,()=>r.complete(),e),i=>fn(r,n,()=>r.error(i),e)))})}function qi(n,e=0){return _e((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function AI(n,e){return Qe(n).pipe(qi(e),Hi(e))}function xI(n,e){return Qe(n).pipe(qi(e),Hi(e))}function MI(n,e){return new Ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function RI(n,e){return new Ie(t=>{let r;return fn(t,e,()=>{r=n[qh](),fn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>he(r?.return)&&r.return()})}function Qh(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ie(t=>{fn(t,e,()=>{let r=n[Symbol.asyncIterator]();fn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function NI(n,e){return Qh(Wh(n),e)}function PI(n,e){if(n!=null){if($h(n))return AI(n,e);if(Bh(n))return MI(n,e);if(Uh(n))return xI(n,e);if(zh(n))return Qh(n,e);if(Gh(n))return RI(n,e);if(Kh(n))return NI(n,e)}throw Hh(n)}function ze(n,e){return e?PI(n,e):Qe(n)}function ue(...n){let e=br(n);return ze(n,e)}function Ca(n,e){let t=he(n)?n:()=>n,r=i=>i.error(t());return new Ie(e?i=>e.schedule(r,0,i):r)}function _y(n){return!!n&&(n instanceof Ie||he(n.lift)&&he(n.subscribe))}var Qr=ga(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function le(n,e){return _e((t,r)=>{let i=0;t.subscribe(be(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:yN}=Array;function vN(n,e){return yN(e)?n(...e):n(e)}function Zh(n){return le(e=>vN(n,e))}var{isArray:wN}=Array,{getPrototypeOf:_N,prototype:bN,keys:EN}=Object;function Yh(n){if(n.length===1){let e=n[0];if(wN(e))return{args:e,keys:null};if(IN(e)){let t=EN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function IN(n){return n&&typeof n=="object"&&_N(n)===bN}function Jh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Uu(...n){let e=br(n),t=jh(n),{args:r,keys:i}=Yh(n);if(r.length===0)return ze([],e);let o=new Ie(CN(r,e,i?s=>Jh(i,s):Xt));return t?o.pipe(Zh(t)):o}function CN(n,e,t=Xt){return r=>{OI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)OI(e,()=>{let l=ze(n[c],e),g=!1;l.subscribe(be(r,p=>{o[c]=p,g||(g=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function OI(n,e,t){n?fn(t,n,e):e()}function kI(n,e,t,r,i,o,s,a){let c=[],l=0,g=0,p=!1,w=()=>{p&&!c.length&&!l&&e.complete()},b=N=>l<r?x(N):c.push(N),x=N=>{o&&e.next(N),l++;let M=!1;Qe(t(N,g++)).subscribe(be(e,j=>{i?.(j),o?b(j):e.next(j)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<r;){let j=c.shift();s?fn(e,s,()=>x(j)):x(j)}w()}catch(j){e.error(j)}}))};return n.subscribe(be(e,b,()=>{p=!0,w()})),()=>{a?.()}}function yt(n,e,t=1/0){return he(e)?yt((r,i)=>le((o,s)=>e(r,o,i,s))(Qe(n(r,i))),t):(typeof e=="number"&&(t=e),_e((r,i)=>kI(r,i,n,t)))}function Gi(n=1/0){return yt(Xt,n)}function FI(){return Gi(1)}function Da(...n){return FI()(ze(n,br(n)))}function Xh(n){return new Ie(e=>{Qe(n()).subscribe(e)})}function by(...n){let e=jh(n),{args:t,keys:r}=Yh(n),i=new Ie(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let g=0;g<s;g++){let p=!1;Qe(t[g]).subscribe(be(o,w=>{p||(p=!0,l--),a[g]=w},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(r?Jh(r,a):a),o.complete())}))}});return e?i.pipe(Zh(e)):i}function DN(...n){let e=br(n),t=TI(n,1/0),r=n;return r.length?r.length===1?Qe(r[0]):Gi(t)(ze(r,e)):en}function tn(n,e){return _e((t,r)=>{let i=0;t.subscribe(be(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Zr(n){return _e((e,t)=>{let r=null,i=!1,o;r=e.subscribe(be(t,void 0,void 0,s=>{o=Qe(n(s,Zr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function VI(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(be(s,g=>{let p=l++;c=a?n(c,g,p):(a=!0,g),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Yr(n,e){return he(e)?yt(n,e,1):yt(n,1)}function Wi(n){return _e((e,t)=>{let r=!1;e.subscribe(be(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Jr(n){return n<=0?()=>en:_e((e,t)=>{let r=0;e.subscribe(be(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ey(n){return le(()=>n)}function LI(n,e=Xt){return n=n??TN,_e((t,r)=>{let i,o=!0;t.subscribe(be(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function TN(n,e){return n===e}function ef(n=SN){return _e((e,t)=>{let r=!1;e.subscribe(be(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function SN(){return new Qr}function ss(n){return _e((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Er(n,e){let t=arguments.length>=2;return r=>r.pipe(n?tn((i,o)=>n(i,o,r)):Xt,Jr(1),t?Wi(e):ef(()=>new Qr))}function Ta(n){return n<=0?()=>en:_e((e,t)=>{let r=[];e.subscribe(be(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Iy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?tn((i,o)=>n(i,o,r)):Xt,Ta(1),t?Wi(e):ef(()=>new Qr))}function jI(){return _e((n,e)=>{let t,r=!1;n.subscribe(be(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function tf(n,e){return _e(VI(n,e,arguments.length>=2,!0))}function BI(n={}){let{connector:e=()=>new Ye,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,g=!1,p=!1,w=()=>{a?.unsubscribe(),a=void 0},b=()=>{w(),s=c=void 0,g=p=!1},x=()=>{let N=s;b(),N?.unsubscribe()};return _e((N,M)=>{l++,!p&&!g&&w();let j=c=c??e();M.add(()=>{l--,l===0&&!p&&!g&&(a=Cy(x,i))}),j.subscribe(M),!s&&l>0&&(s=new Kr({next:W=>j.next(W),error:W=>{p=!0,w(),a=Cy(b,t,W),j.error(W)},complete:()=>{g=!0,w(),a=Cy(b,r),j.complete()}}),Qe(N).subscribe(s))})(o)}}function Cy(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Kr({next:()=>{r.unsubscribe(),n()}});return Qe(e(...t)).subscribe(r)}function AN(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,BI({connector:()=>new kh(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function nf(...n){let e=br(n);return _e((t,r)=>{(e?Da(n,t,e):Da(n,t)).subscribe(r)})}function Bt(n,e){return _e((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(be(r,c=>{i?.unsubscribe();let l=0,g=o++;Qe(n(c,g)).subscribe(i=be(r,p=>r.next(e?e(c,p,g,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function xN(n,e){return he(e)?Bt(()=>n,e):Bt(()=>n)}function Dy(n){return _e((e,t)=>{Qe(n).subscribe(be(t,()=>t.complete(),Lu)),!t.closed&&e.subscribe(t)})}function vt(n,e,t){let r=he(n)||e||t?{next:n,error:e,complete:t}:n;return r?_e((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(be(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Xt}var TC="https://g.co/ng/security#xss",oe=class extends Error{constructor(e,t){super(Lf(e,t)),this.code=e}};function Lf(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Zu(n){return{toString:n}.toString()}var rf="__parameters__";function MN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function SC(n,e,t){return Zu(()=>{let r=MN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,g){let p=c.hasOwnProperty(rf)?c[rf]:Object.defineProperty(c,rf,{value:[]})[rf];for(;p.length<=g;)p.push(null);return(p[g]=p[g]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var jy=globalThis;function qe(n){for(let e in n)if(n[e]===qe)return e;throw Error("Could not find renamed property on target object.")}function RN(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function rn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(rn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function UI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var NN=qe({__forward_ref__:qe});function $t(n){return n.__forward_ref__=$t,n.toString=function(){return rn(this())},n}function nn(n){return AC(n)?n():n}function AC(n){return typeof n=="function"&&n.hasOwnProperty(NN)&&n.__forward_ref__===$t}function X(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Mr(n){return{providers:n.providers||[],imports:n.imports||[]}}function jf(n){return $I(n,MC)||$I(n,RC)}function xC(n){return jf(n)!==null}function $I(n,e){return n.hasOwnProperty(e)?n[e]:null}function PN(n){let e=n&&(n[MC]||n[RC]);return e||null}function zI(n){return n&&(n.hasOwnProperty(HI)||n.hasOwnProperty(ON))?n[HI]:null}var MC=qe({\u0275prov:qe}),HI=qe({\u0275inj:qe}),RC=qe({ngInjectableDef:qe}),ON=qe({ngInjectorDef:qe}),te=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=X({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function NC(n){return n&&!!n.\u0275providers}var kN=qe({\u0275cmp:qe}),FN=qe({\u0275dir:qe}),VN=qe({\u0275pipe:qe}),LN=qe({\u0275mod:qe}),gf=qe({\u0275fac:qe}),zu=qe({__NG_ELEMENT_ID__:qe}),qI=qe({__NG_ENV_ID__:qe});function Bf(n){return typeof n=="string"?n:n==null?"":String(n)}function jN(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Bf(n)}function BN(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new oe(-200,n)}function Fv(n,e){throw new oe(-201,!1)}var Ce=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ce||{}),By;function PC(){return By}function Fn(n){let e=By;return By=n,e}function OC(n,e,t){let r=jf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Ce.Optional)return null;if(e!==void 0)return e;Fv(n,"Injector")}var UN={},Hu=UN,Uy="__NG_DI_FLAG__",mf="ngTempTokenPath",$N="ngTokenPath",zN=/\n/gm,HN="\u0275",GI="__source",Ra;function qN(){return Ra}function Ki(n){let e=Ra;return Ra=n,e}function GN(n,e=Ce.Default){if(Ra===void 0)throw new oe(-203,!1);return Ra===null?OC(n,void 0,e):Ra.get(n,e&Ce.Optional?null:void 0,e)}function ne(n,e=Ce.Default){return(PC()||GN)(nn(n),e)}function $(n,e=Ce.Default){return ne(n,Uf(e))}function Uf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function $y(n){let e=[];for(let t=0;t<n.length;t++){let r=nn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new oe(900,!1);let i,o=Ce.Default;for(let s=0;s<r.length;s++){let a=r[s],c=WN(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ne(i,o))}else e.push(ne(r))}return e}function kC(n,e){return n[Uy]=e,n.prototype[Uy]=e,n}function WN(n){return n[Uy]}function KN(n,e,t,r){let i=n[mf];throw e[GI]&&i.unshift(e[GI]),n.message=QN(`
`+n.message,i,t,r),n[$N]=i,n[mf]=null,n}function QN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==HN?n.slice(2):n;let i=rn(e);if(Array.isArray(e))i=e.map(rn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):rn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(zN,`
  `)}`}var Wt=kC(SC("Optional"),8);var Vv=kC(SC("SkipSelf"),4);function Pa(n,e){let t=n.hasOwnProperty(gf);return t?n[gf]:null}function ZN(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function YN(n){return n.flat(Number.POSITIVE_INFINITY)}function Lv(n,e){n.forEach(t=>Array.isArray(t)?Lv(t,e):e(t))}function FC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function yf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function JN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function XN(n,e,t){let r=Yu(n,e);return r>=0?n[r|1]=t:(r=~r,JN(n,r,e,t)),r}function Ty(n,e){let t=Yu(n,e);if(t>=0)return n[t|1]}function Yu(n,e){return eP(n,e,1)}function eP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Oa={},Vn=[],ka=new te(""),VC=new te("",-1),LC=new te(""),vf=class{get(e,t=Hu){if(t===Hu){let r=new Error(`NullInjectorError: No provider for ${rn(e)}!`);throw r.name="NullInjectorError",r}return t}},jC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(jC||{}),Dr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Dr||{}),Yi=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Yi||{});function tP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function zy(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];nP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function BC(n){return n===3||n===4||n===6}function nP(n){return n.charCodeAt(0)===64}function qu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?WI(n,t,i,null,e[++r]):WI(n,t,i,null,null))}}return n}function WI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var UC="ng-template";function rP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&tP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(jv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function jv(n){return n.type===4&&n.value!==UC}function iP(n,e,t){let r=n.type===4&&!t?UC:n.value;return e===r}function oP(n,e,t){let r=4,i=n.attrs,o=i!==null?cP(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!tr(r)&&!tr(c))return!1;if(s&&tr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!iP(n,c,t)||c===""&&e.length===1){if(tr(r))return!1;s=!0}}else if(r&8){if(i===null||!rP(n,i,c,t)){if(tr(r))return!1;s=!0}}else{let l=e[++a],g=sP(c,i,jv(n),t);if(g===-1){if(tr(r))return!1;s=!0;continue}if(l!==""){let p;if(g>o?p="":p=i[g+1].toLowerCase(),r&2&&l!==p){if(tr(r))return!1;s=!0}}}}return tr(r)||s}function tr(n){return(n&1)===0}function sP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return uP(e,n)}function aP(n,e,t=!1){for(let r=0;r<e.length;r++)if(oP(n,e[r],t))return!0;return!1}function cP(n){for(let e=0;e<n.length;e++){let t=n[e];if(BC(t))return e}return n.length}function uP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function KI(n,e){return n?":not("+e.trim()+")":e}function lP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!tr(s)&&(e+=KI(o,i),i=""),r=s,o=o||!tr(r);t++}return i!==""&&(e+=KI(o,i)),e}function dP(n){return n.map(lP).join(",")}function hP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!tr(i))break;i=o}r++}return{attrs:e,classes:t}}function pn(n){return Zu(()=>{let e=GC(n),t=De(G({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===jC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Dr.Emulated,styles:n.styles||Vn,_:null,schemas:n.schemas||null,tView:null,id:""});WC(t);let r=n.dependencies;return t.directiveDefs=ZI(r,!1),t.pipeDefs=ZI(r,!0),t.id=gP(t),t})}function fP(n){return Ji(n)||$C(n)}function pP(n){return n!==null}function Rr(n){return Zu(()=>({type:n.type,bootstrap:n.bootstrap||Vn,declarations:n.declarations||Vn,imports:n.imports||Vn,exports:n.exports||Vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function QI(n,e){if(n==null)return Oa;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Yi.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Yi.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ue(n){return Zu(()=>{let e=GC(n);return WC(e),e})}function Ji(n){return n[kN]||null}function $C(n){return n[FN]||null}function zC(n){return n[VN]||null}function HC(n){let e=Ji(n)||$C(n)||zC(n);return e!==null?e.standalone:!1}function qC(n,e){let t=n[LN]||null;if(!t&&e===!0)throw new Error(`Type ${rn(n)} does not have '\u0275mod' property.`);return t}function GC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Oa,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Vn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:QI(n.inputs,e),outputs:QI(n.outputs),debugInfo:null}}function WC(n){n.features?.forEach(e=>e(n))}function ZI(n,e){if(!n)return null;let t=e?zC:fP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(pP)}function gP(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function jn(n){return{\u0275providers:n}}function mP(...n){return{\u0275providers:KC(!0,n),\u0275fromNgModule:!0}}function KC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Lv(e,s=>{let a=s;Hy(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&QC(i,o),t}function QC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Bv(i,o=>{e(o,r)})}}function Hy(n,e,t,r){if(n=nn(n),!n)return!1;let i=null,o=zI(n),s=!o&&Ji(n);if(!o&&!s){let c=n.ngModule;if(o=zI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Hy(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Lv(o.imports,g=>{Hy(g,e,t,r)&&(l||=[],l.push(g))})}finally{}l!==void 0&&QC(l,e)}if(!a){let l=Pa(i)||(()=>new i);e({provide:i,useFactory:l,deps:Vn},i),e({provide:LC,useValue:i,multi:!0},i),e({provide:ka,useValue:()=>ne(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Bv(c,g=>{e(g,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Bv(n,e){for(let t of n)NC(t)&&(t=t.\u0275providers),Array.isArray(t)?Bv(t,e):e(t)}var yP=qe({provide:String,useValue:qe});function ZC(n){return n!==null&&typeof n=="object"&&yP in n}function vP(n){return!!(n&&n.useExisting)}function wP(n){return!!(n&&n.useFactory)}function Fa(n){return typeof n=="function"}function _P(n){return!!n.useClass}var $f=new te(""),uf={},bP={},Sy;function Uv(){return Sy===void 0&&(Sy=new vf),Sy}var on=class{},Gu=class extends on{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gy(e,s=>this.processProvider(s)),this.records.set(VC,Sa(void 0,this)),i.has("environment")&&this.records.set(on,Sa(void 0,this));let o=this.records.get($f);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(LC,Vn,Ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Pe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ki(this),r=Fn(void 0),i;try{return e()}finally{Ki(t),Fn(r)}}get(e,t=Hu,r=Ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(qI))return e[qI](this);r=Uf(r);let i,o=Ki(this),s=Fn(void 0);try{if(!(r&Ce.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=TP(e)&&jf(e);l&&this.injectableDefInScope(l)?c=Sa(qy(e),uf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Ce.Self?Uv():this.parent;return t=r&Ce.Optional&&t===Hu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[mf]=a[mf]||[]).unshift(rn(e)),o)throw a;return KN(a,e,"R3InjectorError",this.source)}else throw a}finally{Fn(s),Ki(o)}}resolveInjectorInitializers(){let e=Pe(null),t=Ki(this),r=Fn(void 0),i;try{let o=this.get(ka,Vn,Ce.Self);for(let s of o)s()}finally{Ki(t),Fn(r),Pe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(rn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(e){e=nn(e);let t=Fa(e)?e:nn(e&&e.provide),r=IP(e);if(!Fa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Sa(void 0,uf,!0),i.factory=()=>$y(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Pe(null);try{return t.value===uf&&(t.value=bP,t.value=t.factory()),typeof t.value=="object"&&t.value&&DP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Pe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=nn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function qy(n){let e=jf(n),t=e!==null?e.factory:Pa(n);if(t!==null)return t;if(n instanceof te)throw new oe(204,!1);if(n instanceof Function)return EP(n);throw new oe(204,!1)}function EP(n){if(n.length>0)throw new oe(204,!1);let t=PN(n);return t!==null?()=>t.factory(n):()=>new n}function IP(n){if(ZC(n))return Sa(void 0,n.useValue);{let e=YC(n);return Sa(e,uf)}}function YC(n,e,t){let r;if(Fa(n)){let i=nn(n);return Pa(i)||qy(i)}else if(ZC(n))r=()=>nn(n.useValue);else if(wP(n))r=()=>n.useFactory(...$y(n.deps||[]));else if(vP(n))r=()=>ne(nn(n.useExisting));else{let i=nn(n&&(n.useClass||n.provide));if(CP(n))r=()=>new i(...$y(n.deps));else return Pa(i)||qy(i)}return r}function Sa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function CP(n){return!!n.deps}function DP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function TP(n){return typeof n=="function"||typeof n=="object"&&n instanceof te}function Gy(n,e){for(let t of n)Array.isArray(t)?Gy(t,e):t&&NC(t)?Gy(t.\u0275providers,e):e(t)}function Bn(n,e){n instanceof Gu&&n.assertNotDestroyed();let t,r=Ki(n),i=Fn(void 0);try{return e()}finally{Ki(r),Fn(i)}}function JC(){return PC()!==void 0||qN()!=null}function SP(n){if(!JC())throw new oe(-203,!1)}function AP(n){return typeof n=="function"}var ri=0,Ee=1,de=2,Gt=3,nr=4,ir=5,wf=6,_f=7,rr=8,Va=9,Tr=10,ct=11,Wu=12,YI=13,qa=14,Sr=15,cs=16,Aa=17,Xr=18,zf=19,XC=20,Qi=21,Ay=22,Ln=23,Ar=25,eD=1;var us=7,bf=8,La=9,Cn=10,Ef=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ef||{});function Zi(n){return Array.isArray(n)&&typeof n[eD]=="object"}function ii(n){return Array.isArray(n)&&n[eD]===!0}function $v(n){return(n.flags&4)!==0}function Hf(n){return n.componentOffset>-1}function qf(n){return(n.flags&1)===1}function Xi(n){return!!n.template}function Wy(n){return(n[de]&512)!==0}var Ky=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function tD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function gn(){return nD}function nD(n){return n.type.prototype.ngOnChanges&&(n.setInput=MP),xP}gn.ngInherit=!0;function xP(){let n=iD(this),e=n?.current;if(e){let t=n.previous;if(t===Oa)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function MP(n,e,t,r,i){let o=this.declaredInputs[r],s=iD(n)||RP(n,{previous:Oa,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Ky(l&&l.currentValue,t,c===Oa),tD(n,e,i,t)}var rD="__ngSimpleChanges__";function iD(n){return n[rD]||null}function RP(n,e){return n[rD]=e}var JI=null;var Ir=function(n,e,t){JI?.(n,e,t)},oD="svg",NP="math";function xr(n){for(;Array.isArray(n);)n=n[ri];return n}function sD(n,e){return xr(e[n])}function Un(n,e){return xr(e[n.index])}function aD(n,e){return n.data[e]}function PP(n,e){return n[e]}function no(n,e){let t=e[n];return Zi(t)?t:t[ri]}function OP(n){return(n[de]&4)===4}function zv(n){return(n[de]&128)===128}function kP(n){return ii(n[Gt])}function ja(n,e){return e==null?null:n[e]}function cD(n){n[Aa]=0}function uD(n){n[de]&1024||(n[de]|=1024,zv(n)&&Wf(n))}function FP(n,e){for(;n>0;)e=e[qa],n--;return e}function Gf(n){return!!(n[de]&9216||n[Ln]?.dirty)}function Qy(n){n[Tr].changeDetectionScheduler?.notify(8),n[de]&64&&(n[de]|=1024),Gf(n)&&Wf(n)}function Wf(n){n[Tr].changeDetectionScheduler?.notify(0);let e=ls(n);for(;e!==null&&!(e[de]&8192||(e[de]|=8192,!zv(e)));)e=ls(e)}function lD(n,e){if((n[de]&256)===256)throw new oe(911,!1);n[Qi]===null&&(n[Qi]=[]),n[Qi].push(e)}function VP(n,e){if(n[Qi]===null)return;let t=n[Qi].indexOf(e);t!==-1&&n[Qi].splice(t,1)}function ls(n){let e=n[Gt];return ii(e)?e[Gt]:e}var me={lFrame:wD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var dD=!1;function LP(){return me.lFrame.elementDepthCount}function jP(){me.lFrame.elementDepthCount++}function BP(){me.lFrame.elementDepthCount--}function hD(){return me.bindingsEnabled}function UP(){return me.skipHydrationRootTNode!==null}function $P(n){return me.skipHydrationRootTNode===n}function zP(){me.skipHydrationRootTNode=null}function ke(){return me.lFrame.lView}function kt(){return me.lFrame.tView}function Dn(n){return me.lFrame.contextLView=n,n[rr]}function Tn(n){return me.lFrame.contextLView=null,n}function Kt(){let n=fD();for(;n!==null&&n.type===64;)n=n.parent;return n}function fD(){return me.lFrame.currentTNode}function HP(){let n=me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ys(n,e){let t=me.lFrame;t.currentTNode=n,t.isParent=e}function Hv(){return me.lFrame.isParent}function pD(){me.lFrame.isParent=!1}function qP(){return me.lFrame.contextLView}function gD(){return dD}function XI(n){dD=n}function GP(){let n=me.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function WP(n){return me.lFrame.bindingIndex=n}function Kf(){return me.lFrame.bindingIndex++}function KP(n){let e=me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function QP(){return me.lFrame.inI18n}function ZP(n,e){let t=me.lFrame;t.bindingIndex=t.bindingRootIndex=n,Zy(e)}function YP(){return me.lFrame.currentDirectiveIndex}function Zy(n){me.lFrame.currentDirectiveIndex=n}function JP(n){let e=me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function mD(){return me.lFrame.currentQueryIndex}function qv(n){me.lFrame.currentQueryIndex=n}function XP(n){let e=n[Ee];return e.type===2?e.declTNode:e.type===1?n[ir]:null}function yD(n,e,t){if(t&Ce.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Ce.Host);)if(i=XP(o),i===null||(o=o[qa],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=me.lFrame=vD();return r.currentTNode=e,r.lView=n,!0}function Gv(n){let e=vD(),t=n[Ee];me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function vD(){let n=me.lFrame,e=n===null?null:n.child;return e===null?wD(n):e}function wD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function _D(){let n=me.lFrame;return me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var bD=_D;function Wv(){let n=_D();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function eO(n){return(me.lFrame.contextLView=FP(n,me.lFrame.contextLView))[rr]}function Ga(){return me.lFrame.selectedIndex}function ds(n){me.lFrame.selectedIndex=n}function Qf(){let n=me.lFrame;return aD(n.tView,n.selectedIndex)}function i8(){me.lFrame.currentNamespace=oD}function o8(){tO()}function tO(){me.lFrame.currentNamespace=null}function nO(){return me.lFrame.currentNamespace}var ED=!0;function Zf(){return ED}function Yf(n){ED=n}function rO(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=nD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Jf(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:g}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),g!=null&&(n.destroyHooks??=[]).push(t,g)}}function lf(n,e,t){ID(n,e,3,t)}function df(n,e,t,r){(n[de]&3)===t&&ID(n,e,t,r)}function xy(n,e){let t=n[de];(t&3)===e&&(t&=16383,t+=1,n[de]=t)}function ID(n,e,t,r){let i=r!==void 0?n[Aa]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Aa]+=65536),(a<o||o==-1)&&(iO(n,t,e,c),n[Aa]=(n[Aa]&4294901760)+c+2),c++}function eC(n,e){Ir(4,n,e);let t=Pe(null);try{e.call(n)}finally{Pe(t),Ir(5,n,e)}}function iO(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[de]>>14<n[Aa]>>16&&(n[de]&3)===e&&(n[de]+=16384,eC(a,o)):eC(a,o)}var Na=-1,hs=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function oO(n){return n instanceof hs}function sO(n){return(n.flags&8)!==0}function aO(n){return(n.flags&16)!==0}var My={},Yy=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Uf(r);let i=this.injector.get(e,My,r);return i!==My||t===My?i:this.parentInjector.get(e,t,r)}};function CD(n){return n!==Na}function If(n){return n&32767}function cO(n){return n>>16}function Cf(n,e){let t=cO(n),r=e;for(;t>0;)r=r[qa],t--;return r}var Jy=!0;function tC(n){let e=Jy;return Jy=n,e}var uO=256,DD=uO-1,TD=5,lO=0,Cr={};function dO(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(zu)&&(r=t[zu]),r==null&&(r=t[zu]=lO++);let i=r&DD,o=1<<i;e.data[n+(i>>TD)]|=o}function Df(n,e){let t=SD(n,e);if(t!==-1)return t;let r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,Ry(r.data,n),Ry(e,null),Ry(r.blueprint,null));let i=Kv(n,e),o=n.injectorIndex;if(CD(i)){let s=If(i),a=Cf(i,e),c=a[Ee].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Ry(n,e){n.push(0,0,0,0,0,0,0,0,e)}function SD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Kv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=ND(i),r===null)return Na;if(t++,i=i[qa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Na}function Xy(n,e,t){dO(n,e,t)}function hO(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(BC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function AD(n,e,t){if(t&Ce.Optional||n!==void 0)return n;Fv(e,"NodeInjector")}function xD(n,e,t,r){if(t&Ce.Optional&&r===void 0&&(r=null),!(t&(Ce.Self|Ce.Host))){let i=n[Va],o=Fn(void 0);try{return i?i.get(e,r,t&Ce.Optional):OC(e,r,t&Ce.Optional)}finally{Fn(o)}}return AD(r,e,t)}function MD(n,e,t,r=Ce.Default,i){if(n!==null){if(e[de]&2048&&!(r&Ce.Self)){let s=mO(n,e,t,r,Cr);if(s!==Cr)return s}let o=RD(n,e,t,r,Cr);if(o!==Cr)return o}return xD(e,t,r,i)}function RD(n,e,t,r,i){let o=pO(t);if(typeof o=="function"){if(!yD(e,n,r))return r&Ce.Host?AD(i,t,r):xD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Ce.Optional))Fv(t);else return s}finally{bD()}}else if(typeof o=="number"){let s=null,a=SD(n,e),c=Na,l=r&Ce.Host?e[Sr][ir]:null;for((a===-1||r&Ce.SkipSelf)&&(c=a===-1?Kv(n,e):e[a+8],c===Na||!rC(r,!1)?a=-1:(s=e[Ee],a=If(c),e=Cf(c,e)));a!==-1;){let g=e[Ee];if(nC(o,a,g.data)){let p=fO(a,e,t,s,r,l);if(p!==Cr)return p}c=e[a+8],c!==Na&&rC(r,e[Ee].data[a+8]===l)&&nC(o,a,e)?(s=g,a=If(c),e=Cf(c,e)):a=-1}}return i}function fO(n,e,t,r,i,o){let s=e[Ee],a=s.data[n+8],c=r==null?Hf(a)&&Jy:r!=s&&(a.type&3)!==0,l=i&Ce.Host&&o===a,g=hf(a,s,t,c,l);return g!==null?fs(e,s,g,a):Cr}function hf(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,g=o>>20,p=r?a:a+g,w=i?a+g:l;for(let b=p;b<w;b++){let x=s[b];if(b<c&&t===x||b>=c&&x.type===t)return b}if(i){let b=s[c];if(b&&Xi(b)&&b.type===t)return c}return null}function fs(n,e,t,r){let i=n[t],o=e.data;if(oO(i)){let s=i;s.resolving&&BN(jN(o[t]));let a=tC(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Fn(s.injectImpl):null,g=yD(n,r,Ce.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&rO(t,o[t],e)}finally{l!==null&&Fn(l),tC(a),s.resolving=!1,bD()}}return i}function pO(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(zu)?n[zu]:void 0;return typeof e=="number"?e>=0?e&DD:gO:e}function nC(n,e,t){let r=1<<n;return!!(t[e+(n>>TD)]&r)}function rC(n,e){return!(n&Ce.Self)&&!(n&Ce.Host&&e)}var as=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return MD(this._tNode,this._lView,e,Uf(r),t)}};function gO(){return new as(Kt(),ke())}function mn(n){return Zu(()=>{let e=n.prototype.constructor,t=e[gf]||ev(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[gf]||ev(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ev(n){return AC(n)?()=>{let e=ev(nn(n));return e&&e()}:Pa(n)}function mO(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[de]&2048&&!(s[de]&512);){let a=RD(o,s,t,r|Ce.Self,Cr);if(a!==Cr)return a;let c=o.parent;if(!c){let l=s[XC];if(l){let g=l.get(t,Cr,r);if(g!==Cr)return g}c=ND(s),s=s[qa]}o=c}return i}function ND(n){let e=n[Ee],t=e.type;return t===2?e.declTNode:t===1?n[ir]:null}function Qv(n){return hO(Kt(),n)}function iC(n,e=null,t=null,r){let i=PD(n,e,t,r);return i.resolveInjectorInitializers(),i}function PD(n,e=null,t=null,r,i=new Set){let o=[t||Vn,mP(n)];return r=r||(typeof n=="object"?void 0:rn(n)),new Gu(o,e||Uv(),r||null,i)}var Ut=class n{static{this.THROW_IF_NOT_FOUND=Hu}static{this.NULL=new vf}static create(e,t){if(Array.isArray(e))return iC({name:""},t,e,"");{let r=e.name??"";return iC({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=X({token:n,providedIn:"any",factory:()=>ne(VC)})}static{this.__NG_ELEMENT_ID__=-1}};var yO=new te("");yO.__NG_ELEMENT_ID__=n=>{let e=Kt();if(e===null)throw new oe(204,!1);if(e.type&2)return e.value;if(n&Ce.Optional)return null;throw new oe(204,!1)};var vO="ngOriginalError";function Ny(n){return n[vO]}var OD=!0,Zv=(()=>{class n{static{this.__NG_ELEMENT_ID__=wO}static{this.__NG_ENV_ID__=t=>t}}return n})(),tv=class extends Zv{constructor(e){super(),this._lView=e}onDestroy(e){return lD(this._lView,e),()=>VP(this._lView,e)}};function wO(){return new tv(ke())}var ro=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new jt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}}return n})();var nv=class extends Ye{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,JC()&&(this.destroyRef=$(Zv,{optional:!0})??void 0,this.pendingTasks=$(ro,{optional:!0})??void 0)}emit(e){let t=Pe(null);try{super.next(e)}finally{Pe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof rt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Le=nv;function Tf(...n){}function kD(n){let e,t;function r(){n=Tf;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function oC(n){return queueMicrotask(()=>n()),()=>{n=Tf}}var Yv="isAngularZone",Sf=Yv+"_ID",_O=0,Oe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Le(!1),this.onMicrotaskEmpty=new Le(!1),this.onStable=new Le(!1),this.onError=new Le(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=OD}=e;if(typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,IO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Yv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new oe(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,bO,Tf,Tf);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},bO={};function Jv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function EO(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){kD(()=>{n.callbackScheduled=!1,rv(n),n.isCheckStableRunning=!0,Jv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),rv(n)}function IO(n){let e=()=>{EO(n)},t=_O++;n._inner=n._inner.fork({name:"angular",properties:{[Yv]:!0,[Sf]:t,[Sf+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(CO(c))return r.invokeTask(o,s,a,c);try{return sC(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),aC(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return sC(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!DO(c)&&e(),aC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,rv(n),Jv(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function rv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function sC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function aC(n){n._nesting--,Jv(n)}var iv=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Le,this.onMicrotaskEmpty=new Le,this.onStable=new Le,this.onError=new Le}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function CO(n){return FD(n,"__ignore_ng_zone__")}function DO(n){return FD(n,"__scheduler_tick__")}function FD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ei=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ny(e);for(;t&&Ny(t);)t=Ny(t);return t||null}},TO=new te("",{providedIn:"root",factory:()=>{let n=$(Oe),e=$(ei);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function SO(){return Wa(Kt(),ke())}function Wa(n,e){return new Sn(Un(n,e))}var Sn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=SO}}return n})();function AO(n){return n instanceof Sn?n.nativeElement:n}function xO(){return this._results[Symbol.iterator]()}var ov=class n{get changes(){return this._changes??=new Le}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=xO)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=YN(e);(this._changesDetected=!ZN(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function VD(n){return(n.flags&128)===128}var LD=new Map,MO=0;function RO(){return MO++}function NO(n){LD.set(n[zf],n)}function sv(n){LD.delete(n[zf])}var cC="__ngContext__";function eo(n,e){Zi(e)?(n[cC]=e[zf],NO(e)):n[cC]=e}function jD(n){return UD(n[Wu])}function BD(n){return UD(n[nr])}function UD(n){for(;n!==null&&!ii(n);)n=n[nr];return n}var av;function $D(n){av=n}function PO(){if(av!==void 0)return av;if(typeof document<"u")return document;throw new oe(210,!1)}var Xv=new te("",{providedIn:"root",factory:()=>OO}),OO="ng",ew=new te(""),$n=new te("",{providedIn:"platform",factory:()=>"unknown"});var tw=new te("",{providedIn:"root",factory:()=>PO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var kO="h",FO="b";var VO=()=>null;function nw(n,e,t=!1){return VO(n,e,t)}var zD=!1,LO=new te("",{providedIn:"root",factory:()=>zD});var of;function jO(){if(of===void 0&&(of=null,jy.trustedTypes))try{of=jy.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return of}function uC(n){return jO()?.createScriptURL(n)||n}var Af=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${TC})`}};function Ju(n){return n instanceof Af?n.changingThisBreaksApplicationSecurity:n}function rw(n,e){let t=BO(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${TC})`)}return t===e}function BO(n){return n instanceof Af&&n.getTypeName()||null}var UO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function HD(n){return n=String(n),n.match(UO)?n:"unsafe:"+n}var Xf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Xf||{});function $O(n){let e=GD();return e?e.sanitize(Xf.URL,n)||"":rw(n,"URL")?Ju(n):HD(Bf(n))}function zO(n){let e=GD();if(e)return uC(e.sanitize(Xf.RESOURCE_URL,n)||"");if(rw(n,"ResourceURL"))return uC(Ju(n));throw new oe(904,!1)}function HO(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?zO:$O}function qD(n,e,t){return HO(e,t)(n)}function GD(){let n=ke();return n&&n[Tr].sanitizer}var qO=/^>|^->|<!--|-->|--!>|<!-$/g,GO=/(<|>)/g,WO="\u200B$1\u200B";function KO(n){return n.replace(qO,e=>e.replace(GO,WO))}function WD(n){return n instanceof Function?n():n}function QO(n){return(n??$(Ut)).get($n)==="browser"}var ti=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ti||{}),ZO;function iw(n,e){return ZO(n,e)}function xa(n,e,t,r,i){if(r!=null){let o,s=!1;ii(r)?o=r:Zi(r)&&(s=!0,r=r[ri]);let a=xr(r);n===0&&t!==null?i==null?JD(e,t,a):xf(e,t,a,i||null,!0):n===1&&t!==null?xf(e,t,a,i||null,!0):n===2?hk(e,a,s):n===3&&e.destroyNode(a),o!=null&&pk(e,n,o,t,i)}}function YO(n,e){return n.createText(e)}function JO(n,e,t){n.setValue(e,t)}function XO(n,e){return n.createComment(KO(e))}function KD(n,e,t){return n.createElement(e,t)}function ek(n,e){QD(n,e),e[ri]=null,e[ir]=null}function tk(n,e,t,r,i,o){r[ri]=i,r[ir]=e,tp(n,r,t,1,i,o)}function QD(n,e){e[Tr].changeDetectionScheduler?.notify(9),tp(n,e,e[ct],2,null,null)}function nk(n){let e=n[Wu];if(!e)return Py(n[Ee],n);for(;e;){let t=null;if(Zi(e))t=e[Wu];else{let r=e[Cn];r&&(t=r)}if(!t){for(;e&&!e[nr]&&e!==n;)Zi(e)&&Py(e[Ee],e),e=e[Gt];e===null&&(e=n),Zi(e)&&Py(e[Ee],e),t=e&&e[nr]}e=t}}function rk(n,e,t,r){let i=Cn+r,o=t.length;r>0&&(t[i-1][nr]=e),r<o-Cn?(e[nr]=t[i],FC(t,Cn+r,e)):(t.push(e),e[nr]=null),e[Gt]=t;let s=e[cs];s!==null&&t!==s&&ZD(s,e);let a=e[Xr];a!==null&&a.insertView(n),Qy(e),e[de]|=128}function ZD(n,e){let t=n[La],r=e[Gt];if(Zi(r))n[de]|=Ef.HasTransplantedViews;else{let i=r[Gt][Sr];e[Sr]!==i&&(n[de]|=Ef.HasTransplantedViews)}t===null?n[La]=[e]:t.push(e)}function ow(n,e){let t=n[La],r=t.indexOf(e);t.splice(r,1)}function cv(n,e){if(n.length<=Cn)return;let t=Cn+e,r=n[t];if(r){let i=r[cs];i!==null&&i!==n&&ow(i,r),e>0&&(n[t-1][nr]=r[nr]);let o=yf(n,Cn+e);ek(r[Ee],r);let s=o[Xr];s!==null&&s.detachView(o[Ee]),r[Gt]=null,r[nr]=null,r[de]&=-129}return r}function YD(n,e){if(!(e[de]&256)){let t=e[ct];t.destroyNode&&tp(n,e,t,3,null,null),nk(e)}}function Py(n,e){if(e[de]&256)return;let t=Pe(null);try{e[de]&=-129,e[de]|=256,e[Ln]&&ay(e[Ln]),ok(n,e),ik(n,e),e[Ee].type===1&&e[ct].destroy();let r=e[cs];if(r!==null&&ii(e[Gt])){r!==e[Gt]&&ow(r,e);let i=e[Xr];i!==null&&i.detachView(n)}sv(e)}finally{Pe(t)}}function ik(n,e){let t=n.cleanup,r=e[_f];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[_f]=null);let i=e[Qi];if(i!==null){e[Qi]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function ok(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof hs)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Ir(4,a,c);try{c.call(a)}finally{Ir(5,a,c)}}else{Ir(4,i,o);try{o.call(i)}finally{Ir(5,i,o)}}}}}function sk(n,e,t){return ak(n,e.parent,t)}function ak(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ri];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Dr.None||o===Dr.Emulated)return null}return Un(r,t)}}function xf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function JD(n,e,t){n.appendChild(e,t)}function lC(n,e,t,r,i){r!==null?xf(n,e,t,r,i):JD(n,e,t)}function XD(n,e){return n.parentNode(e)}function ck(n,e){return n.nextSibling(e)}function uk(n,e,t){return dk(n,e,t)}function lk(n,e,t){return n.type&40?Un(n,t):null}var dk=lk,dC;function ep(n,e,t,r){let i=sk(n,r,e),o=e[ct],s=r.parent||e[ir],a=uk(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)lC(o,i,t[c],a,!1);else lC(o,i,t,a,!1);dC!==void 0&&dC(o,r,e,t,i)}function $u(n,e){if(e!==null){let t=e.type;if(t&3)return Un(e,n);if(t&4)return uv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return $u(n,r);{let i=n[e.index];return ii(i)?uv(-1,i):xr(i)}}else{if(t&128)return $u(n,e.next);if(t&32)return iw(e,n)()||xr(n[e.index]);{let r=eT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ls(n[Sr]);return $u(i,r)}else return $u(n,e.next)}}}return null}function eT(n,e){if(e!==null){let r=n[Sr][ir],i=e.projection;return r.projection[i]}return null}function uv(n,e){let t=Cn+n+1;if(t<e.length){let r=e[t],i=r[Ee].firstChild;if(i!==null)return $u(r,i)}return e[us]}function hk(n,e,t){n.removeChild(null,e,t)}function sw(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&eo(xr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)sw(n,e,t.child,r,i,o,!1),xa(e,n,i,a,o);else if(c&32){let l=iw(t,r),g;for(;g=l();)xa(e,n,i,g,o);xa(e,n,i,a,o)}else c&16?fk(n,e,r,t,i,o):xa(e,n,i,a,o);t=s?t.projectionNext:t.next}}function tp(n,e,t,r,i,o){sw(t,r,n.firstChild,e,i,o,!1)}function fk(n,e,t,r,i,o){let s=t[Sr],c=s[ir].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let g=c[l];xa(e,n,i,g,o)}else{let l=c,g=s[Gt];VD(r)&&(l.flags|=128),sw(n,e,l,g,i,o,!0)}}function pk(n,e,t,r,i){let o=t[us],s=xr(t);o!==s&&xa(e,n,r,o,i);for(let a=Cn;a<t.length;a++){let c=t[a];tp(c[Ee],c,n,e,r,o)}}function gk(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:ti.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ti.Important),n.setStyle(t,r,i,o))}}function mk(n,e,t){n.setAttribute(e,"style",t)}function tT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function nT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&zy(n,e,r),i!==null&&tT(n,e,i),o!==null&&mk(n,e,o)}var io={};function fe(n=1){rT(kt(),ke(),Ga()+n,!1)}function rT(n,e,t,r){if(!r)if((e[de]&3)===3){let o=n.preOrderCheckHooks;o!==null&&lf(e,o,t)}else{let o=n.preOrderHooks;o!==null&&df(e,o,0,t)}ds(t)}function re(n,e=Ce.Default){let t=ke();if(t===null)return ne(n,e);let r=Kt();return MD(r,t,nn(n),e)}function iT(){let n="invalid";throw new Error(n)}function oT(n,e,t,r,i,o){let s=Pe(null);try{let a=null;i&Yi.SignalBased&&(a=e[r][Wr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Yi.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):tD(e,a,r,o)}finally{Pe(s)}}function yk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ds(~i);else{let o=i,s=t[++r],a=t[++r];ZP(s,o);let c=e[o];a(2,c)}}}finally{ds(-1)}}function np(n,e,t,r,i,o,s,a,c,l,g){let p=e.blueprint.slice();return p[ri]=i,p[de]=r|4|128|8|64,(l!==null||n&&n[de]&2048)&&(p[de]|=2048),cD(p),p[Gt]=p[qa]=n,p[rr]=t,p[Tr]=s||n&&n[Tr],p[ct]=a||n&&n[ct],p[Va]=c||n&&n[Va]||null,p[ir]=o,p[zf]=RO(),p[wf]=g,p[XC]=l,p[Sr]=e.type==2?n[Sr]:p,p}function Xu(n,e,t,r,i){let o=n.data[e];if(o===null)o=vk(n,e,t,r,i),QP()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=HP();o.injectorIndex=s===null?-1:s.injectorIndex}return ys(o,!0),o}function vk(n,e,t,r,i){let o=fD(),s=Hv(),a=s?o:o&&o.parent,c=n.data[e]=Ck(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function sT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function aT(n,e,t,r,i){let o=Ga(),s=r&2;try{ds(-1),s&&e.length>Ar&&rT(n,e,Ar,!1),Ir(s?2:0,i),t(r,i)}finally{ds(o),Ir(s?3:1,i)}}function aw(n,e,t){if($v(e)){let r=Pe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Pe(r)}}}function cw(n,e,t){hD()&&(Mk(n,e,t,Un(t,e)),(t.flags&64)===64&&lT(n,e,t))}function uw(n,e,t=Un){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function cT(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=lw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function lw(n,e,t,r,i,o,s,a,c,l,g){let p=Ar+r,w=p+i,b=wk(p,w),x=typeof l=="function"?l():l;return b[Ee]={type:n,blueprint:b,template:t,queries:null,viewQuery:a,declTNode:e,data:b.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:x,incompleteFirstPass:!1,ssrId:g}}function wk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:io);return t}function _k(n,e,t,r){let o=r.get(LO,zD)||t===Dr.ShadowDom,s=n.selectRootElement(e,o);return bk(s),s}function bk(n){Ek(n)}var Ek=()=>null;function Ik(n,e,t,r){let i=fT(e);i.push(t),n.firstCreatePass&&pT(n).push(r,i.length-1)}function Ck(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return UP()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function hC(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Yi.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?fC(r,t,l,a,c):fC(r,t,l,a)}return r}function fC(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function Dk(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let g=r;g<i;g++){let p=o[g],w=t?t.get(p):null,b=w?w.inputs:null,x=w?w.outputs:null;c=hC(0,p.inputs,g,c,b),l=hC(1,p.outputs,g,l,x);let N=c!==null&&s!==null&&!jv(e)?Uk(c,g,s):null;a.push(N)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function Tk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function dw(n,e,t,r,i,o,s,a){let c=Un(e,t),l=e.inputs,g;!a&&l!=null&&(g=l[r])?(fw(n,t,g,r,i),Hf(e)&&Sk(t,e.index)):e.type&3?(r=Tk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function Sk(n,e){let t=no(e,n);t[de]&16||(t[de]|=64)}function hw(n,e,t,r){if(hD()){let i=r===null?null:{"":-1},o=Nk(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&uT(n,e,t,s,i,a),i&&Pk(t,r,i)}t.mergedAttrs=qu(t.mergedAttrs,t.attrs)}function uT(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Xy(Df(t,e),n,r[l].type);kk(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let g=r[l];g.providersResolver&&g.providersResolver(g)}let s=!1,a=!1,c=sT(n,e,r.length,null);for(let l=0;l<r.length;l++){let g=r[l];t.mergedAttrs=qu(t.mergedAttrs,g.hostAttrs),Fk(n,t,e,c,g),Ok(c,g,i),g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let p=g.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}Dk(n,t,o)}function Ak(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;xk(s)!=a&&s.push(a),s.push(t,r,o)}}function xk(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Mk(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Hf(t)&&Vk(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Df(t,e),eo(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=fs(e,n,a,t);if(eo(l,e),s!==null&&Bk(e,a-i,l,c,t,s),Xi(c)){let g=no(t.index,e);g[rr]=fs(e,n,a,t)}}}function lT(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=YP();try{ds(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Zy(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Rk(c,l)}}finally{ds(-1),Zy(s)}}function Rk(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Nk(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(aP(e,s.selectors,!1))if(r||(r=[]),Xi(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;lv(n,e,c)}else r.unshift(s),lv(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function lv(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Pk(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new oe(-301,!1);r.push(e[i],o)}}}function Ok(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Xi(e)&&(t[""]=n)}}function kk(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Fk(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Pa(i.type,!0)),s=new hs(o,Xi(i),re);n.blueprint[r]=s,t[r]=s,Ak(n,e,r,sT(n,t,i.hostVars,io),i)}function Vk(n,e,t){let r=Un(e,n),i=cT(t),o=n[Tr].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=rp(n,np(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function Lk(n,e,t,r,i,o){let s=Un(n,e);jk(e[ct],s,o,n.value,t,r,i)}function jk(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Bf(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Bk(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],g=s[a++],p=s[a++];oT(r,t,c,l,g,p)}}function Uk(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function dT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function hT(n,e){let t=n.contentQueries;if(t!==null){let r=Pe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];qv(o),a.contentQueries(2,e[s],s)}}}finally{Pe(r)}}}function rp(n,e){return n[Wu]?n[YI][nr]=e:n[Wu]=e,n[YI]=e,e}function dv(n,e,t){qv(0);let r=Pe(null);try{e(n,t)}finally{Pe(r)}}function fT(n){return n[_f]??=[]}function pT(n){return n.cleanup??=[]}function gT(n,e){let t=n[Va],r=t?t.get(ei,null):null;r&&r.handleError(e)}function fw(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],g=n.data[s];oT(g,l,r,a,c,i)}}function $k(n,e,t){let r=sD(e,n);JO(n[ct],r,t)}function zk(n,e){let t=no(e,n),r=t[Ee];Hk(r,t);let i=t[ri];i!==null&&t[wf]===null&&(t[wf]=nw(i,t[Va])),pw(r,t,t[rr])}function Hk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function pw(n,e,t){Gv(e);try{let r=n.viewQuery;r!==null&&dv(1,r,t);let i=n.template;i!==null&&aT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Xr]?.finishViewCreation(n),n.staticContentQueries&&hT(n,e),n.staticViewQueries&&dv(2,n.viewQuery,t);let o=n.components;o!==null&&qk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[de]&=-5,Wv()}}function qk(n,e){for(let t=0;t<e.length;t++)zk(n,e[t])}function Gk(n,e,t,r){let i=Pe(null);try{let o=e.tView,a=n[de]&4096?4096:16,c=np(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[cs]=l;let g=n[Xr];return g!==null&&(c[Xr]=g.createEmbeddedView(o)),pw(o,c,t),c}finally{Pe(i)}}function pC(n,e){return!e||e.firstChild===null||VD(n)}function Wk(n,e,t,r=!0){let i=e[Ee];if(rk(i,e,n,t),r){let s=uv(t,n),a=e[ct],c=XD(a,n[us]);c!==null&&tk(i,n[ir],a,e,c,s)}let o=e[wf];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Mf(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(xr(o)),ii(o)&&Kk(o,r);let s=t.type;if(s&8)Mf(n,e,t.child,r);else if(s&32){let a=iw(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=eT(e,t);if(Array.isArray(a))r.push(...a);else{let c=ls(e[Sr]);Mf(c[Ee],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Kk(n,e){for(let t=Cn;t<n.length;t++){let r=n[t],i=r[Ee].firstChild;i!==null&&Mf(r[Ee],r,i,e)}n[us]!==n[ri]&&e.push(n[us])}var mT=[];function Qk(n){return n[Ln]??Zk(n)}function Zk(n){let e=mT.pop()??Object.create(Jk);return e.lView=n,e}function Yk(n){n.lView[Ln]!==n&&(n.lView=null,mT.push(n))}var Jk=De(G({},Vu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Wf(n.lView)},consumerOnSignalRead(){this.lView[Ln]=this}});function Xk(n){let e=n[Ln]??Object.create(eF);return e.lView=n,e}var eF=De(G({},Vu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ls(n.lView);for(;e&&!yT(e[Ee]);)e=ls(e);e&&uD(e)},consumerOnSignalRead(){this.lView[Ln]=this}});function yT(n){return n.type!==2}var tF=100;function vT(n,e=!0,t=0){let r=n[Tr],i=r.rendererFactory,o=!1;o||i.begin?.();try{nF(n,t)}catch(s){throw e&&gT(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function nF(n,e){let t=gD();try{XI(!0),hv(n,e);let r=0;for(;Gf(n);){if(r===tF)throw new oe(103,!1);r++,hv(n,1)}}finally{XI(t)}}function rF(n,e,t,r){let i=e[de];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Tr].inlineEffectRunner?.flush(),Gv(e);let a=!0,c=null,l=null;o||(yT(n)?(l=Qk(e),c=Th(l)):iI()===null?(a=!1,l=Xk(e),c=Th(l)):e[Ln]&&(ay(e[Ln]),e[Ln]=null));try{cD(e),WP(n.bindingStartIndex),t!==null&&aT(n,e,t,2,r);let g=(i&3)===3;if(!o)if(g){let b=n.preOrderCheckHooks;b!==null&&lf(e,b,null)}else{let b=n.preOrderHooks;b!==null&&df(e,b,0,null),xy(e,0)}if(s||iF(e),wT(e,0),n.contentQueries!==null&&hT(n,e),!o)if(g){let b=n.contentCheckHooks;b!==null&&lf(e,b)}else{let b=n.contentHooks;b!==null&&df(e,b,1),xy(e,1)}yk(n,e);let p=n.components;p!==null&&bT(e,p,0);let w=n.viewQuery;if(w!==null&&dv(2,w,r),!o)if(g){let b=n.viewCheckHooks;b!==null&&lf(e,b)}else{let b=n.viewHooks;b!==null&&df(e,b,2),xy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ay]){for(let b of e[Ay])b();e[Ay]=null}o||(e[de]&=-73)}catch(g){throw o||Wf(e),g}finally{l!==null&&(oy(l,c),a&&Yk(l)),Wv()}}function wT(n,e){for(let t=jD(n);t!==null;t=BD(t))for(let r=Cn;r<t.length;r++){let i=t[r];_T(i,e)}}function iF(n){for(let e=jD(n);e!==null;e=BD(e)){if(!(e[de]&Ef.HasTransplantedViews))continue;let t=e[La];for(let r=0;r<t.length;r++){let i=t[r];uD(i)}}}function oF(n,e,t){let r=no(e,n);_T(r,t)}function _T(n,e){zv(n)&&hv(n,e)}function hv(n,e){let r=n[Ee],i=n[de],o=n[Ln],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&sy(o)),s||=!1,o&&(o.dirty=!1),n[de]&=-9217,s)rF(r,n,r.template,n[rr]);else if(i&8192){wT(n,1);let a=r.components;a!==null&&bT(n,a,1)}}function bT(n,e,t){for(let r=0;r<e.length;r++)oF(n,e[r],t)}function gw(n,e){let t=gD()?64:1088;for(n[Tr].changeDetectionScheduler?.notify(e);n;){n[de]|=t;let r=ls(n);if(Wy(n)&&!r)return n;n=r}return null}var ps=class{get rootNodes(){let e=this._lView,t=e[Ee];return Mf(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[rr]}set context(e){this._lView[rr]=e}get destroyed(){return(this._lView[de]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Gt];if(ii(e)){let t=e[bf],r=t?t.indexOf(this):-1;r>-1&&(cv(e,r),yf(t,r))}this._attachedToViewContainer=!1}YD(this._lView[Ee],this._lView)}onDestroy(e){lD(this._lView,e)}markForCheck(){gw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[de]&=-129}reattach(){Qy(this._lView),this._lView[de]|=128}detectChanges(){this._lView[de]|=1024,vT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Wy(this._lView),t=this._lView[cs];t!==null&&!e&&ow(t,this._lView),QD(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=e;let t=Wy(this._lView),r=this._lView[cs];r!==null&&!t&&ZD(r,this._lView),Qy(this._lView)}},gs=(()=>{class n{static{this.__NG_ELEMENT_ID__=cF}}return n})(),sF=gs,aF=class extends sF{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Gk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ps(i)}};function cF(){return ip(Kt(),ke())}function ip(n,e){return n.type&4?new aF(e,n,Wa(n,e)):null}var a8=new RegExp(`^(\\d+)*(${FO}|${kO})*(.*)`);var uF=()=>null;function gC(n,e){return uF(n,e)}var Ba=class{},op=new te("",{providedIn:"root",factory:()=>!1});var ET=new te(""),IT=new te(""),fv=class{},Rf=class{};function lF(n){let e=Error(`No component factory found for ${rn(n)}.`);return e[dF]=n,e}var dF="ngComponent";var pv=class{resolveComponentFactory(e){throw lF(e)}},Ua=class{static{this.NULL=new pv}},$a=class{},oi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>hF()}}return n})();function hF(){let n=ke(),e=Kt(),t=no(e.index,n);return(Zi(t)?t:n)[ct]}var fF=(()=>{class n{static{this.\u0275prov=X({token:n,providedIn:"root",factory:()=>null})}}return n})();function Nf(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=UI(i,a);else if(o==2){let c=a,l=e[++s];r=UI(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Pf=class extends Ua{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ji(e);return new za(t,this.ngModule)}};function mC(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Yi.None;e?t.push({propName:s,templateName:r,isSignal:(a&Yi.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function pF(n){let e=n.toLowerCase();return e==="svg"?oD:e==="math"?NP:null}var za=class extends Rf{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=mC(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return mC(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=dP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Pe(null);try{i=i||this.ngModule;let s=i instanceof on?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Yy(e,s):e,c=a.get($a,null);if(c===null)throw new oe(407,!1);let l=a.get(fF,null),g=a.get(Ba,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:g},w=c.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",x=r?_k(w,r,this.componentDef.encapsulation,a):KD(w,b,pF(b)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let M=null;x!==null&&(M=nw(x,a,!0));let j=lw(0,null,null,1,0,null,null,null,null,null,null),W=np(null,j,null,N,null,null,p,w,a,null,M);Gv(W);let H,se,ce=null;try{let ee=this.componentDef,D,E=null;ee.findHostDirectiveDefs?(D=[],E=new Map,ee.findHostDirectiveDefs(ee,D,E),D.push(ee)):D=[ee];let I=gF(W,x);ce=mF(I,x,ee,D,W,p,w),se=aD(j,Ar),x&&wF(w,ee,x,r),t!==void 0&&_F(se,this.ngContentSelectors,t),H=vF(ce,ee,D,E,W,[bF]),pw(j,W,null)}catch(ee){throw ce!==null&&sv(ce),sv(W),ee}finally{Wv()}return new gv(this.componentType,H,Wa(se,W),W,se)}finally{Pe(o)}}},gv=class extends fv{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ps(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;fw(o[Ee],o,i,e,t),this.previousInputValues.set(e,t);let s=no(this._tNode.index,o);gw(s,1)}}get injector(){return new as(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function gF(n,e){let t=n[Ee],r=Ar;return n[r]=e,Xu(t,r,2,"#host",null)}function mF(n,e,t,r,i,o,s){let a=i[Ee];yF(r,n,e,s);let c=null;e!==null&&(c=nw(e,i[Va]));let l=o.rendererFactory.createRenderer(e,t),g=16;t.signals?g=4096:t.onPush&&(g=64);let p=np(i,cT(t),null,g,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&lv(a,n,r.length-1),rp(i,p),i[n.index]=p}function yF(n,e,t,r){for(let i of n)e.mergedAttrs=qu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Nf(e,e.mergedAttrs,!0),t!==null&&nT(r,t,e))}function vF(n,e,t,r,i,o){let s=Kt(),a=i[Ee],c=Un(s,i);uT(a,i,s,t,null,r);for(let g=0;g<t.length;g++){let p=s.directiveStart+g,w=fs(i,a,p,s);eo(w,i)}lT(a,i,s),c&&eo(c,i);let l=fs(i,a,s.directiveStart+s.componentOffset,s);if(n[rr]=i[rr]=l,o!==null)for(let g of o)g(l,e);return aw(a,s,i),l}function wF(n,e,t,r){if(r)zy(n,t,["ng-version","18.2.8"]);else{let{attrs:i,classes:o}=hP(e.selectors[0]);i&&zy(n,t,i),o&&o.length>0&&tT(n,t,o.join(" "))}}function _F(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function bF(){let n=Kt();Jf(ke()[Ee],n)}var oo=(()=>{class n{static{this.__NG_ELEMENT_ID__=EF}}return n})();function EF(){let n=Kt();return DT(n,ke())}var IF=oo,CT=class extends IF{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Wa(this._hostTNode,this._hostLView)}get injector(){return new as(this._hostTNode,this._hostLView)}get parentInjector(){let e=Kv(this._hostTNode,this._hostLView);if(CD(e)){let t=Cf(e,this._hostLView),r=If(e),i=t[Ee].data[r+8];return new as(i,t)}else return new as(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=yC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Cn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=gC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,pC(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!AP(e),a;if(s)a=t;else{let x=t||{};a=x.index,r=x.injector,i=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef}let c=s?e:new za(Ji(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let N=(s?l:this.parentInjector).get(on,null);N&&(o=N)}let g=Ji(c.componentType??{}),p=gC(this._lContainer,g?.id??null),w=p?.firstChild??null,b=c.create(l,i,w,o);return this.insertImpl(b.hostView,a,pC(this._hostTNode,p)),b}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(kP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Gt],l=new CT(c,c[ir],c[Gt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Wk(s,i,o,r),e.attachToViewContainerRef(),FC(Oy(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=yC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=cv(this._lContainer,t);r&&(yf(Oy(this._lContainer),t),YD(r[Ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=cv(this._lContainer,t);return r&&yf(Oy(this._lContainer),t)!=null?new ps(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function yC(n){return n[bf]}function Oy(n){return n[bf]||(n[bf]=[])}function DT(n,e){let t,r=e[n.index];return ii(r)?t=r:(t=dT(r,e,null,n),e[n.index]=t,rp(e,t)),DF(t,e,n,r),new CT(t,n,e)}function CF(n,e){let t=n[ct],r=t.createComment(""),i=Un(e,n),o=XD(t,i);return xf(t,o,r,ck(t,i),!1),r}var DF=AF,TF=()=>!1;function SF(n,e,t){return TF(n,e,t)}function AF(n,e,t,r){if(n[us])return;let i;t.type&8?i=xr(r):i=CF(e,t),n[us]=i}var mv=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},yv=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)mw(e,t).matches!==null&&this.queries[t].setDirty()}},vv=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=FF(e):this.predicate=e}},wv=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},_v=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,xF(t,o)),this.matchTNodeWithReadOption(e,t,hf(t,e,o,!1,!1))}else r===gs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,hf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Sn||i===oo||i===gs&&t.type&4)this.addMatch(t.index,-2);else{let o=hf(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function xF(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function MF(n,e){return n.type&11?Wa(n,e):n.type&4?ip(n,e):null}function RF(n,e,t,r){return t===-1?MF(e,n):t===-2?NF(n,e,r):fs(n,n[Ee],t,e)}function NF(n,e,t){if(t===Sn)return Wa(e,n);if(t===gs)return ip(e,n);if(t===oo)return DT(e,n)}function TT(n,e,t,r){let i=e[Xr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let g=o[l];a.push(RF(e,g,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function bv(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=TT(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],g=e[-c];for(let p=Cn;p<g.length;p++){let w=g[p];w[cs]===w[Gt]&&bv(w[Ee],w,l,r)}if(g[La]!==null){let p=g[La];for(let w=0;w<p.length;w++){let b=p[w];bv(b[Ee],b,l,r)}}}}}return r}function PF(n,e){return n[Xr].queries[e].queryList}function OF(n,e,t){let r=new ov((t&4)===4);return Ik(n,e,r,r.destroy),(e[Xr]??=new yv).queries.push(new mv(r))-1}function kF(n,e,t){let r=kt();return r.firstCreatePass&&(VF(r,new vv(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),OF(r,ke(),e)}function FF(n){return n.split(",").map(e=>e.trim())}function VF(n,e,t){n.queries===null&&(n.queries=new wv),n.queries.track(new _v(e,t))}function mw(n,e){return n.queries.getByIndex(e)}function LF(n,e){let t=n[Ee],r=mw(t,e);return r.crossesNgTemplate?bv(t,n,e,[]):TT(t,n,r,e)}var vC=new Set;function vs(n){vC.has(n)||(vC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function jF(n){return typeof n=="function"&&n[Wr]!==void 0}function Ka(n,e){vs("NgSignals");let t=gI(n),r=t[Wr];return e?.equal&&(r.equal=e.equal),t.set=i=>cy(r,i),t.update=i=>mI(r,i),t.asReadonly=BF.bind(t),t}function BF(){let n=this[Wr];if(n.readonlyFn===void 0){let e=()=>this();e[Wr]=n,n.readonlyFn=e}return n.readonlyFn}function ST(n){return jF(n)&&typeof n.set=="function"}function UF(n){return Object.getPrototypeOf(n.prototype).constructor}function At(n){let e=UF(n.type),t=!0,r=[n];for(;e;){let i;if(Xi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new oe(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=sf(n.inputs),s.inputTransforms=sf(n.inputTransforms),s.declaredInputs=sf(n.declaredInputs),s.outputs=sf(n.outputs);let a=i.hostBindings;a&&GF(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&HF(n,c),l&&qF(n,l),$F(n,i),RN(n.outputs,i.outputs),Xi(i)&&i.data.animation){let g=n.data;g.animation=(g.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===At&&(t=!1)}}e=Object.getPrototypeOf(e)}zF(r)}function $F(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function zF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=qu(i.hostAttrs,t=qu(t,i.hostAttrs))}}function sf(n){return n===Oa?{}:n===Vn?[]:n}function HF(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function qF(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function GF(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function yw(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var to=class{},Ku=class{};var Ev=class extends to{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Pf(this);let o=qC(e);this._bootstrapComponents=WD(o.bootstrap),this._r3Injector=PD(e,t,[{provide:to,useValue:this},{provide:Ua,useValue:this.componentFactoryResolver},...r],rn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Iv=class extends Ku{constructor(e){super(),this.moduleType=e}create(e){return new Ev(this.moduleType,e,[])}};var Of=class extends to{constructor(e){super(),this.componentFactoryResolver=new Pf(this),this.instance=null;let t=new Gu([...e.providers,{provide:to,useValue:this},{provide:Ua,useValue:this.componentFactoryResolver}],e.parent||Uv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function sp(n,e,t=null){return new Of({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function AT(n){return KF(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function WF(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function KF(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function QF(n,e,t){return n[e]=t}function ZF(n,e){return n[e]}function el(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function YF(n){return(n.flags&32)===32}function JF(n,e,t,r,i,o,s,a,c){let l=e.consts,g=Xu(e,n,4,s||null,a||null);hw(e,t,g,ja(l,c)),Jf(e,g);let p=g.tView=lw(2,g,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,g),p.queries=e.queries.embeddedTView(g)),g}function XF(n,e,t,r,i,o,s,a,c,l){let g=t+Ar,p=e.firstCreatePass?JF(g,e,n,r,i,o,s,a,c):e.data[g];ys(p,!1);let w=eV(e,n,p,t);Zf()&&ep(e,n,w,p),eo(w,n);let b=dT(w,n,w,p);return n[g]=b,rp(n,b),SF(b,p,n),qf(p)&&cw(e,n,p),c!=null&&uw(n,p,l),p}function it(n,e,t,r,i,o,s,a){let c=ke(),l=kt(),g=ja(l.consts,o);return XF(c,l,n,e,t,r,i,g,s,a),it}var eV=tV;function tV(n,e,t,r){return Yf(!0),e[ct].createComment("")}var Ma=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ma||{}),xT=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Cv=class n{constructor(){this.ngZone=$(Oe),this.scheduler=$(Ba),this.errorHandler=$(ei,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ma.EarlyRead,Ma.Write,Ma.MixedReadWrite,Ma.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}},Dv=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function vw(n,e){!e?.injector&&SP(vw);let t=e?.injector??$(Ut);return QO(t)?(vs("NgAfterNextRender"),rV(n,t,e,!0)):iV}function nV(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function rV(n,e,t,r){let i=e.get(xT);i.impl??=e.get(Cv);let o=t?.phase??Ma.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Zv):null,a=new Dv(i.impl,nV(n,o),r,s);return i.impl.register(a),a}var iV={destroy(){}};function si(n,e,t,r){let i=ke(),o=Kf();if(el(i,o,e)){let s=kt(),a=Qf();Lk(a,i,n,e,t,r)}return si}function MT(n,e,t,r){return el(n,Kf(),t)?e+Bf(t)+r:io}function af(n,e){return n<<17|e<<2}function ms(n){return n>>17&32767}function oV(n){return(n&2)==2}function sV(n,e){return n&131071|e<<17}function Tv(n){return n|2}function Ha(n){return(n&131068)>>2}function ky(n,e){return n&-131069|e<<2}function aV(n){return(n&1)===1}function Sv(n){return n|1}function cV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ms(s),c=Ha(s);n[r]=t;let l=!1,g;if(Array.isArray(t)){let p=t;g=p[1],(g===null||Yu(p,g)>0)&&(l=!0)}else g=t;if(i)if(c!==0){let w=ms(n[a+1]);n[r+1]=af(w,a),w!==0&&(n[w+1]=ky(n[w+1],r)),n[a+1]=sV(n[a+1],r)}else n[r+1]=af(a,0),a!==0&&(n[a+1]=ky(n[a+1],r)),a=r;else n[r+1]=af(c,0),a===0?a=r:n[c+1]=ky(n[c+1],r),c=r;l&&(n[r+1]=Tv(n[r+1])),wC(n,g,r,!0),wC(n,g,r,!1),uV(e,g,n,r,o),s=af(a,c),o?e.classBindings=s:e.styleBindings=s}function uV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Yu(o,e)>=0&&(t[r+1]=Sv(t[r+1]))}function wC(n,e,t,r){let i=n[t+1],o=e===null,s=r?ms(i):Ha(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];lV(c,e)&&(a=!0,n[s+1]=r?Sv(l):Tv(l)),s=r?ms(l):Ha(l)}a&&(n[t+1]=r?Tv(i):Sv(i))}function lV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Yu(n,e)>=0:!1}function ye(n,e,t){let r=ke(),i=Kf();if(el(r,i,e)){let o=kt(),s=Qf();dw(o,s,r,n,e,r[ct],t,!1)}return ye}function _C(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";fw(n,t,o[s],s,r)}function ap(n,e){return dV(n,e,null,!0),ap}function dV(n,e,t,r){let i=ke(),o=kt(),s=KP(2);if(o.firstUpdatePass&&fV(o,n,s,r),e!==io&&el(i,s,e)){let a=o.data[Ga()];vV(o,a,i,i[ct],n,i[s+1]=wV(e,t),r,s)}}function hV(n,e){return e>=n.expandoStartIndex}function fV(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ga()],s=hV(n,t);_V(o,r)&&e===null&&!s&&(e=!1),e=pV(i,o,e,r),cV(i,o,e,t,s,r)}}function pV(n,e,t,r){let i=JP(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Fy(null,n,e,t,r),t=Qu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Fy(i,n,e,t,r),o===null){let c=gV(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Fy(null,n,e,c[1],r),c=Qu(c,e.attrs,r),mV(n,e,r,c))}else o=yV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function gV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ha(r)!==0)return n[ms(r)]}function mV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ms(i)]=r}function yV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Qu(r,s,t)}return Qu(r,e.attrs,t)}function Fy(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Qu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Qu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),XN(n,s,t?!0:e[++o]))}return n===void 0?null:n}function vV(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],g=aV(l)?bC(c,e,t,i,Ha(l),s):void 0;if(!kf(g)){kf(o)||oV(l)&&(o=bC(c,null,t,i,a,s));let p=sD(Ga(),t);gk(r,s,p,i,o)}}function bC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),g=l?c[1]:c,p=g===null,w=t[i+1];w===io&&(w=p?Vn:void 0);let b=p?Ty(w,r):g===r?w:void 0;if(l&&!kf(b)&&(b=Ty(c,r)),kf(b)&&(a=b,s))return a;let x=n[i+1];i=s?ms(x):Ha(x)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Ty(c,r))}return a}function kf(n){return n!==void 0}function wV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=rn(Ju(n)))),n}function _V(n,e){return(n.flags&(e?8:16))!==0}function bV(n,e,t,r,i,o){let s=e.consts,a=ja(s,i),c=Xu(e,n,2,r,a);return hw(e,t,c,ja(s,o)),c.attrs!==null&&Nf(c,c.attrs,!1),c.mergedAttrs!==null&&Nf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function z(n,e,t,r){let i=ke(),o=kt(),s=Ar+n,a=i[ct],c=o.firstCreatePass?bV(s,o,i,e,t,r):o.data[s],l=EV(o,i,c,a,e,n);i[s]=l;let g=qf(c);return ys(c,!0),nT(a,l,c),!YF(c)&&Zf()&&ep(o,i,l,c),LP()===0&&eo(l,i),jP(),g&&(cw(o,i,c),aw(o,c,i)),r!==null&&uw(i,c),z}function U(){let n=Kt();Hv()?pD():(n=n.parent,ys(n,!1));let e=n;$P(e)&&zP(),BP();let t=kt();return t.firstCreatePass&&(Jf(t,n),$v(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&sO(e)&&_C(t,e,ke(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&aO(e)&&_C(t,e,ke(),e.stylesWithoutHost,!1),U}function Je(n,e,t,r){return z(n,e,t,r),U(),Je}var EV=(n,e,t,r,i,o)=>(Yf(!0),KD(r,i,nO()));function IV(n,e,t,r,i){let o=e.consts,s=ja(o,r),a=Xu(e,n,8,"ng-container",s);s!==null&&Nf(a,s,!0);let c=ja(o,i);return hw(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function ww(n,e,t){let r=ke(),i=kt(),o=n+Ar,s=i.firstCreatePass?IV(o,i,r,e,t):i.data[o];ys(s,!0);let a=CV(i,r,s,n);return r[o]=a,Zf()&&ep(i,r,a,s),eo(a,r),qf(s)&&(cw(i,r,s),aw(i,s,r)),t!=null&&uw(r,s),ww}function _w(){let n=Kt(),e=kt();return Hv()?pD():(n=n.parent,ys(n,!1)),e.firstCreatePass&&(Jf(e,n),$v(n)&&e.queries.elementEnd(n)),_w}var CV=(n,e,t,r)=>(Yf(!0),XO(e[ct],""));function or(){return ke()}var Ff="en-US";var DV=Ff;function TV(n){typeof n=="string"&&(DV=n.toLowerCase().replace(/_/g,"-"))}var SV=(n,e,t)=>{};function je(n,e,t,r){let i=ke(),o=kt(),s=Kt();return RT(o,i,i[ct],s,n,e,r),je}function AV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[_f],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function RT(n,e,t,r,i,o,s){let a=qf(r),l=n.firstCreatePass&&pT(n),g=e[rr],p=fT(e),w=!0;if(r.type&3||s){let N=Un(r,e),M=s?s(N):N,j=p.length,W=s?se=>s(xr(se[r.index])):r.index,H=null;if(!s&&a&&(H=AV(n,e,i,r.index)),H!==null){let se=H.__ngLastListenerFn__||H;se.__ngNextListenerFn__=o,H.__ngLastListenerFn__=o,w=!1}else{o=IC(r,e,g,o),SV(N,i,o);let se=t.listen(M,i,o);p.push(o,se),l&&l.push(i,W,j,j+1)}}else o=IC(r,e,g,o);let b=r.outputs,x;if(w&&b!==null&&(x=b[i])){let N=x.length;if(N)for(let M=0;M<N;M+=2){let j=x[M],W=x[M+1],ce=e[j][W].subscribe(o),ee=p.length;p.push(o,ce),l&&l.push(i,r.index,ee,-(ee+1))}}}function EC(n,e,t,r){let i=Pe(null);try{return Ir(6,e,t),t(r)!==!1}catch(o){return gT(n,o),!1}finally{Ir(7,e,t),Pe(i)}}function IC(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?no(n.index,e):e;gw(s,5);let a=EC(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=EC(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function sr(n=1){return eO(n)}function xV(n,e,t){return NT(n,"",e,"",t),xV}function NT(n,e,t,r,i){let o=ke(),s=MT(o,e,t,r);if(s!==io){let a=kt(),c=Qf();dw(a,c,o,n,s,o[ct],i,!1)}return NT}function u8(n,e,t){kF(n,e,t)}function MV(n){let e=ke(),t=kt(),r=mD();qv(r+1);let i=mw(t,r);if(n.dirty&&OP(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=LF(e,r);n.reset(o,AO),n.notifyOnChanges()}return!0}return!1}function RV(){return PF(ke(),mD())}function PT(n){let e=qP();return PP(e,Ar+n)}function Y(n,e=""){let t=ke(),r=kt(),i=n+Ar,o=r.firstCreatePass?Xu(r,i,1,e,null):r.data[i],s=NV(r,t,o,e,n);t[i]=s,Zf()&&ep(r,t,s,o),ys(o,!1)}var NV=(n,e,t,r,i)=>(Yf(!0),YO(e[ct],r));function so(n){return OT("",n,""),so}function OT(n,e,t){let r=ke(),i=MT(r,n,e,t);return i!==io&&$k(r,Ga(),i),OT}function PV(n,e,t){ST(e)&&(e=e());let r=ke(),i=Kf();if(el(r,i,e)){let o=kt(),s=Qf();dw(o,s,r,n,e,r[ct],t,!1)}return PV}function l8(n,e){let t=ST(n);return t&&n.set(e),t}function OV(n,e){let t=ke(),r=kt(),i=Kt();return RT(r,t,t[ct],i,n,e),OV}function kV(n,e,t){let r=kt();if(r.firstCreatePass){let i=Xi(n);Av(t,r.data,r.blueprint,i,!0),Av(e,r.data,r.blueprint,i,!1)}}function Av(n,e,t,r,i){if(n=nn(n),Array.isArray(n))for(let o=0;o<n.length;o++)Av(n[o],e,t,r,i);else{let o=kt(),s=ke(),a=Kt(),c=Fa(n)?n:nn(n.provide),l=YC(n),g=a.providerIndexes&1048575,p=a.directiveStart,w=a.providerIndexes>>20;if(Fa(n)||!n.multi){let b=new hs(l,i,re),x=Ly(c,e,i?g:g+w,p);x===-1?(Xy(Df(a,s),o,c),Vy(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(b),s.push(b)):(t[x]=b,s[x]=b)}else{let b=Ly(c,e,g+w,p),x=Ly(c,e,g,g+w),N=b>=0&&t[b],M=x>=0&&t[x];if(i&&!M||!i&&!N){Xy(Df(a,s),o,c);let j=LV(i?VV:FV,t.length,i,r,l);!i&&M&&(t[x].providerFactory=j),Vy(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=kT(t[i?x:b],l,!i&&r);Vy(o,n,b>-1?b:x,j)}!i&&r&&M&&t[x].componentProviders++}}}function Vy(n,e,t,r){let i=Fa(e),o=_P(e);if(i||o){let c=(o?nn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let g=l.indexOf(t);g===-1?l.push(t,[r,c]):l[g+1].push(r,c)}else l.push(t,c)}}}function kT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ly(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function FV(n,e,t,r){return xv(this.multi,[])}function VV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=fs(t,t[Ee],this.providerFactory.index,r);o=a.slice(0,s),xv(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],xv(i,o);return o}function xv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function LV(n,e,t,r,i){let o=new hs(n,t,re);return o.multi=[],o.index=e,o.componentProviders=0,kT(o,i,r&&!t),o}function sn(n,e=[]){return t=>{t.providersResolver=(r,i)=>kV(r,i?i(n):n,e)}}var jV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=KC(!1,t.type),i=r.length>0?sp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=X({token:n,providedIn:"environment",factory:()=>new n(ne(on))})}}return n})();function yn(n){vs("NgStandalone"),n.getStandaloneInjector=e=>e.get(jV).getOrCreateStandaloneInjector(n)}function d8(n,e,t){let r=GP()+n,i=ke();return i[r]===io?QF(i,r,t?e.call(t):e()):ZF(i,r)}function FT(n,e){return ip(n,e)}var ni=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},VT=new ni("18.2.8");var cp=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var LT=new te("");function ws(n){return!!n&&typeof n.then=="function"}function jT(n){return!!n&&typeof n.subscribe=="function"}var up=new te(""),BT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=$(up,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ws(o))t.push(o);else if(jT(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),tl=new te("");function BV(){pI(()=>{throw new oe(600,!1)})}function UV(n){return n.isBoundToModule}var $V=10;function zV(n,e,t){try{let r=t();return ws(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var ao=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$(TO),this.afterRenderManager=$(xT),this.zonelessEnabled=$(op),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ye,this.afterTick=new Ye,this.componentTypes=[],this.components=[],this.isStable=$(ro).hasPendingTasks.pipe(le(t=>!t)),this._injector=$(on)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Rf;if(!this._injector.get(BT).done){let w=!i&&HC(t),b=!1;throw new oe(405,b)}let s;i?s=t:s=this._injector.get(Ua).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=UV(s)?void 0:this._injector.get(to),c=r||s.selector,l=s.create(Ut.NULL,[],c,a),g=l.location.nativeElement,p=l.injector.get(LT,null);return p?.registerApplication(g),l.onDestroy(()=>{this.detachView(l.hostView),ff(this.components,l),p?.unregisterApplication(g)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new oe(101,!1);let t=Pe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Pe(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get($a,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<$V;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)HV(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Gf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ff(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(tl,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ff(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new oe(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ff(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function HV(n,e,t,r){if(!t&&!Gf(n))return;vT(n,e,t&&!r?0:1)}var Mv=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},lp=(()=>{class n{compileModuleSync(t){return new Iv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=qC(t),o=WD(i.declarations).reduce((s,a)=>{let c=Ji(a);return c&&s.push(new za(c)),s},[]);return new Mv(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var qV=(()=>{class n{constructor(){this.zone=$(Oe),this.changeDetectionScheduler=$(Ba),this.applicationRef=$(ao)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GV=new te("",{factory:()=>!1});function UT({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Oe(De(G({},$T()),{scheduleInRootZone:t})),[{provide:Oe,useFactory:n},{provide:ka,multi:!0,useFactory:()=>{let r=$(qV,{optional:!0});return()=>r.initialize()}},{provide:ka,multi:!0,useFactory:()=>{let r=$(WV);return()=>{r.initialize()}}},e===!0?{provide:ET,useValue:!0}:[],{provide:IT,useValue:t??OD}]}function h8(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=UT({ngZoneFactory:()=>{let i=$T(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&vs("NgZone_CoalesceEvent"),new Oe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return jn([{provide:GV,useValue:!0},{provide:op,useValue:!1},r])}function $T(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var WV=(()=>{class n{constructor(){this.subscription=new rt,this.initialized=!1,this.zone=$(Oe),this.pendingTasks=$(ro)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Oe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Oe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var KV=(()=>{class n{constructor(){this.appRef=$(ao),this.taskService=$(ro),this.ngZone=$(Oe),this.zonelessEnabled=$(op),this.disableScheduling=$(ET,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new rt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Sf):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&($(IT,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof iv||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?oC:kD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Sf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,oC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QV(){return typeof $localize<"u"&&$localize.locale||Ff}var bw=new te("",{providedIn:"root",factory:()=>$(bw,Ce.Optional|Ce.SkipSelf)||QV()});var Rv=new te("");function cf(n){return!n.moduleRef}function ZV(n){let e=cf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Oe);return t.run(()=>{cf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ei,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),cf(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Rv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Rv);s.add(o),n.moduleRef.onDestroy(()=>{ff(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return zV(r,t,()=>{let o=e.get(BT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(bw,Ff);if(TV(s||Ff),cf(n)){let a=e.get(ao);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return YV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function YV(n,e){let t=n.injector.get(ao);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new oe(-403,!1);e.push(n)}var pf=null;function JV(n=[],e){return Ut.create({name:e,providers:[{provide:$f,useValue:"platform"},{provide:Rv,useValue:new Set([()=>pf=null])},...n]})}function XV(n=[]){if(pf)return pf;let e=JV(n);return pf=e,BV(),e2(e),e}function e2(n){n.get(ew,null)?.forEach(t=>t())}function f8(){return!1}var _s=(()=>{class n{static{this.__NG_ELEMENT_ID__=t2}}return n})();function t2(n){return n2(Kt(),ke(),(n&16)===16)}function n2(n,e,t){if(Hf(n)&&!t){let r=no(n.index,e);return new ps(r,r)}else if(n.type&175){let r=e[Sr];return new ps(r,e)}return null}var Nv=class{constructor(){}supports(e){return AT(e)}create(e){return new Pv(e)}},r2=(n,e)=>e,Pv=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||r2}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<CC(r,i,o)?t:r,a=CC(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,g=c-i;if(l!=g){for(let w=0;w<l;w++){let b=w<o.length?o[w]:o[w]=0,x=b+w;g<=x&&x<l&&(o[w]=b+1)}let p=s.previousIndex;o[p]=g-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!AT(e))throw new oe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,WF(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Ov(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Vf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Vf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ov=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},kv=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Vf=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new kv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function CC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function DC(){return new Ew([new Nv])}var Ew=(()=>{class n{static{this.\u0275prov=X({token:n,providedIn:"root",factory:DC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||DC()),deps:[[n,new Vv,new Wt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new oe(901,!1)}}return n})();function zT(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=XV(r),o=[UT({}),{provide:Ba,useExisting:KV},...t||[]],s=new Of({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return ZV({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function co(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Qa(n,e){vs("NgSignals");let t=dI(n);return e?.equal&&(t[Wr].equal=e.equal),t}function Nr(n){let e=Pe(null);try{return n()}finally{Pe(e)}}function HT(n){let e=Ji(n);if(!e)return null;let t=new za(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var QT=null;function ci(){return QT}function ZT(n){QT??=n}var dp=class{};var Zt=new te(""),Sw=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>$(o2),providedIn:"platform"})}}return n})(),YT=new te(""),o2=(()=>{class n extends Sw{constructor(){super(),this._doc=$(Zt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ci().getBaseHref(this._doc)}onPopState(t){let r=ci().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ci().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Aw(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function qT(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function ai(n){return n&&n[0]!=="?"?"?"+n:n}var ui=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>$(xw),providedIn:"root"})}}return n})(),JT=new te(""),xw=(()=>{class n extends ui{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??$(Zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Aw(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ai(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ai(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ai(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ne(Sw),ne(JT,8))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),XT=(()=>{class n extends ui{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Aw(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ai(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ai(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ne(Sw),ne(JT,8))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),Ya=(()=>{class n{constructor(t){this._subject=new Le,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=c2(qT(GT(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ai(r))}normalize(t){return n.stripTrailingSlash(a2(this._basePath,GT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ai(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ai(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=ai}static{this.joinWithSlash=Aw}static{this.stripTrailingSlash=qT}static{this.\u0275fac=function(r){return new(r||n)(ne(ui))}}static{this.\u0275prov=X({token:n,factory:()=>s2(),providedIn:"root"})}}return n})();function s2(){return new Ya(ne(ui))}function a2(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function GT(n){return n.replace(/\/index.html$/,"")}function c2(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function hp(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Iw=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},eS=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Iw(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),WT(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);WT(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(re(oo),re(gs),re(Ew))}}static{this.\u0275dir=Ue({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function WT(n,e){n.context.$implicit=e.item}var Pr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Cw,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){KT("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){KT("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(re(oo),re(gs))}}static{this.\u0275dir=Ue({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Cw=class{constructor(){this.$implicit=null,this.ngIf=null}};function KT(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${rn(e)}'.`)}var An=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Rr({type:n})}static{this.\u0275inj=Mr({})}}return n})(),Mw="browser",u2="server";function l2(n){return n===Mw}function fp(n){return n===u2}var tS=(()=>{class n{static{this.\u0275prov=X({token:n,providedIn:"root",factory:()=>l2($($n))?new Dw($(Zt),window):new Tw})}}return n})(),Dw=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=d2(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function d2(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Tw=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Za=class{};var rl=class{},gp=class{},li=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Nw=class{encodeKey(e){return nS(e)}encodeValue(e){return nS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function h2(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var f2=/%(\d[a-f0-9])/gi,p2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function nS(n){return encodeURIComponent(n).replace(f2,(e,t)=>p2[t]??e)}function pp(n){return`${n}`}var lo=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Nw,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=h2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(pp):[pp(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(pp(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(pp(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Pw=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function g2(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function rS(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function iS(n){return typeof Blob<"u"&&n instanceof Blob}function oS(n){return typeof FormData<"u"&&n instanceof FormData}function m2(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var nl=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(g2(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new li,this.context??=new Pw,!this.params)this.params=new lo,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||rS(this.body)||iS(this.body)||oS(this.body)||m2(this.body)?this.body:this.body instanceof lo?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||oS(this.body)?null:iS(this.body)?this.body.type||null:rS(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof lo?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,g=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((w,b)=>w.set(b,e.setHeaders[b]),l)),e.setParams&&(g=Object.keys(e.setParams).reduce((w,b)=>w.set(b,e.setParams[b]),g)),new n(t,r,s,{params:g,headers:l,context:p,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},ho=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ho||{}),il=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new li,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},mp=class n extends il{constructor(e={}){super(e),this.type=ho.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ol=class n extends il{constructor(e={}){super(e),this.type=ho.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},uo=class extends il{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},uS=200,y2=204;function Rw(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Fw=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof nl)o=t;else{let c;i.headers instanceof li?c=i.headers:c=new li(i.headers);let l;i.params&&(i.params instanceof lo?l=i.params:l=new lo({fromObject:i.params})),o=new nl(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=ue(o).pipe(Yr(c=>this.handler.handle(c)));if(t instanceof nl||i.observe==="events")return s;let a=s.pipe(tn(c=>c instanceof ol));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(le(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(le(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(le(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(le(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new lo().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Rw(i,r))}post(t,r,i={}){return this.request("POST",t,Rw(i,r))}put(t,r,i={}){return this.request("PUT",t,Rw(i,r))}static{this.\u0275fac=function(r){return new(r||n)(ne(rl))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),v2=/^\)\]\}',?\n/,w2="X-Request-URL";function sS(n){if(n.url)return n.url;let e=w2.toLocaleLowerCase();return n.headers.get(e)}var _2=(()=>{class n{constructor(){this.fetchImpl=$(Ow,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=$(Oe)}handle(t){return new Ie(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(kw,o=>r.error(new uo({error:o}))),()=>i.abort()})}doRequest(t,r,i){return F(this,null,function*(){let o=this.createRequestInit(t),s;try{let b=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,G({signal:r},o)));b2(b),i.next({type:ho.Sent}),s=yield b}catch(b){i.error(new uo({error:b,status:b.status??0,statusText:b.statusText,url:t.urlWithParams,headers:b.headers}));return}let a=new li(s.headers),c=s.statusText,l=sS(s)??t.urlWithParams,g=s.status,p=null;if(t.reportProgress&&i.next(new mp({headers:a,status:g,statusText:c,url:l})),s.body){let b=s.headers.get("content-length"),x=[],N=s.body.getReader(),M=0,j,W,H=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>F(this,null,function*(){for(;;){let{done:ce,value:ee}=yield N.read();if(ce)break;if(x.push(ee),M+=ee.length,t.reportProgress){W=t.responseType==="text"?(W??"")+(j??=new TextDecoder).decode(ee,{stream:!0}):void 0;let D=()=>i.next({type:ho.DownloadProgress,total:b?+b:void 0,loaded:M,partialText:W});H?H.run(D):D()}}}));let se=this.concatChunks(x,M);try{let ce=s.headers.get("Content-Type")??"";p=this.parseBody(t,se,ce)}catch(ce){i.error(new uo({error:ce,headers:new li(s.headers),status:s.status,statusText:s.statusText,url:sS(s)??t.urlWithParams}));return}}g===0&&(g=p?uS:0),g>=200&&g<300?(i.next(new ol({body:p,headers:a,status:g,statusText:c,url:l})),i.complete()):i.error(new uo({error:p,headers:a,status:g,statusText:c,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let o=new TextDecoder().decode(r).replace(v2,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),o=0;for(let s of t)i.set(s,o),o+=s.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),Ow=class{};function kw(){}function b2(n){n.then(kw,kw)}function E2(n,e){return e(n)}function I2(n,e,t){return(r,i)=>Bn(t,()=>e(r,o=>n(o,i)))}var lS=new te(""),C2=new te(""),D2=new te("",{providedIn:"root",factory:()=>!0});var aS=(()=>{class n extends rl{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=$(ro),this.contributeToStability=$(D2)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(lS),...this.injector.get(C2,[])]));this.chain=r.reduceRight((i,o)=>I2(i,o,this.injector),E2)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(ss(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(ne(gp),ne(on))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})();var T2=/^\)\]\}',?\n/;function S2(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var cS=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new oe(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?ze(r.\u0275loadImpl()):ue(null)).pipe(Bt(()=>new Ie(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((N,M)=>s.setRequestHeader(N,M.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let N=t.detectContentTypeHeader();N!==null&&s.setRequestHeader("Content-Type",N)}if(t.responseType){let N=t.responseType.toLowerCase();s.responseType=N!=="json"?N:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let N=s.statusText||"OK",M=new li(s.getAllResponseHeaders()),j=S2(s)||t.url;return c=new mp({headers:M,status:s.status,statusText:N,url:j}),c},g=()=>{let{headers:N,status:M,statusText:j,url:W}=l(),H=null;M!==y2&&(H=typeof s.response>"u"?s.responseText:s.response),M===0&&(M=H?uS:0);let se=M>=200&&M<300;if(t.responseType==="json"&&typeof H=="string"){let ce=H;H=H.replace(T2,"");try{H=H!==""?JSON.parse(H):null}catch(ee){H=ce,se&&(se=!1,H={error:ee,text:H})}}se?(o.next(new ol({body:H,headers:N,status:M,statusText:j,url:W||void 0})),o.complete()):o.error(new uo({error:H,headers:N,status:M,statusText:j,url:W||void 0}))},p=N=>{let{url:M}=l(),j=new uo({error:N,status:s.status||0,statusText:s.statusText||"Unknown Error",url:M||void 0});o.error(j)},w=!1,b=N=>{w||(o.next(l()),w=!0);let M={type:ho.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(M.total=N.total),t.responseType==="text"&&s.responseText&&(M.partialText=s.responseText),o.next(M)},x=N=>{let M={type:ho.UploadProgress,loaded:N.loaded};N.lengthComputable&&(M.total=N.total),o.next(M)};return s.addEventListener("load",g),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",b),a!==null&&s.upload&&s.upload.addEventListener("progress",x)),s.send(a),o.next({type:ho.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",g),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",b),a!==null&&s.upload&&s.upload.removeEventListener("progress",x)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(ne(Za))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),dS=new te(""),A2="XSRF-TOKEN",x2=new te("",{providedIn:"root",factory:()=>A2}),M2="X-XSRF-TOKEN",R2=new te("",{providedIn:"root",factory:()=>M2}),yp=class{},N2=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=hp(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(ne(Zt),ne($n),ne(x2))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})();function P2(n,e){let t=n.url.toLowerCase();if(!$(dS)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=$(yp).getToken(),i=$(R2);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function J8(...n){let e=[Fw,cS,aS,{provide:rl,useExisting:aS},{provide:gp,useFactory:()=>$(_2,{optional:!0})??$(cS)},{provide:lS,useValue:P2,multi:!0},{provide:dS,useValue:!0},{provide:yp,useClass:N2}];for(let t of n)e.push(...t.\u0275providers);return jn(e)}var jw=class extends dp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Bw=class n extends jw{static makeCurrent(){ZT(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=k2();return t==null?null:F2(t)}resetBaseElement(){sl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return hp(document.cookie,e)}},sl=null;function k2(){return sl=sl||document.querySelector("base"),sl?sl.getAttribute("href"):null}function F2(n){return new URL(n,document.baseURI).pathname}var V2=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),Uw=new te(""),gS=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new oe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(ne(Uw),ne(Oe))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),vp=class{constructor(e){this._doc=e}},Vw="ng-app-id",mS=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=fp(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Vw}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Vw),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Vw,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ne(Zt),ne(Xv),ne(tw,8),ne($n))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),Lw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},zw=/%COMP%/g,yS="%COMP%",L2=`_nghost-${yS}`,j2=`_ngcontent-${yS}`,B2=!0,U2=new te("",{providedIn:"root",factory:()=>B2});function $2(n){return j2.replace(zw,n)}function z2(n){return L2.replace(zw,n)}function vS(n,e){return e.map(t=>t.replace(zw,n))}var hS=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=fp(a),this.defaultRenderer=new al(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Dr.ShadowDom&&(r=De(G({},r),{encapsulation:Dr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof wp?i.applyToHost(t):i instanceof cl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Dr.Emulated:o=new wp(c,l,r,this.appId,g,s,a,p);break;case Dr.ShadowDom:return new $w(c,l,t,r,s,a,this.nonce,p);default:o=new cl(c,l,r,g,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ne(gS),ne(mS),ne(Xv),ne(U2),ne(Zt),ne($n),ne(Oe),ne(tw))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),al=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Lw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(fS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(fS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new oe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Lw[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Lw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ti.DashCase|ti.Important)?e.style.setProperty(t,r,i&ti.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ti.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=ci().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function fS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var $w=class extends al{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=vS(i.id,i.styles);for(let g of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=g,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cl=class extends al{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?vS(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},wp=class extends cl{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=$2(l),this.hostAttr=z2(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},H2=(()=>{class n extends vp{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(ne(Zt))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),pS=["alt","control","meta","shift"],q2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},G2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},W2=(()=>{class n extends vp{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ci().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),pS.forEach(l=>{let g=r.indexOf(l);g>-1&&(r.splice(g,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=q2[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),pS.forEach(s=>{if(s!==i){let a=G2[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(ne(Zt))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})();function IW(n,e){return zT(G({rootComponent:n},K2(e)))}function K2(n){return{appProviders:[...X2,...n?.providers??[]],platformProviders:J2}}function Q2(){Bw.makeCurrent()}function Z2(){return new ei}function Y2(){return $D(document),document}var J2=[{provide:$n,useValue:Mw},{provide:ew,useValue:Q2,multi:!0},{provide:Zt,useFactory:Y2,deps:[]}];var X2=[{provide:$f,useValue:"root"},{provide:ei,useFactory:Z2,deps:[]},{provide:Uw,useClass:H2,multi:!0,deps:[Zt,Oe,$n]},{provide:Uw,useClass:W2,multi:!0,deps:[Zt]},hS,mS,gS,{provide:$a,useExisting:hS},{provide:Za,useClass:V2,deps:[]},[]];var wS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(ne(Zt))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var tL="firebase",nL="10.14.1";In(tL,nL,"app");var Is=new ni("ANGULARFIRE2_VERSION");function bp(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ul=(n,e)=>{let t=e?[e]:Eh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Xa=class{constructor(){return ul(rL)}},rL="app-check";function Ja(){}var _p=class{zone;delegate;constructor(e,t=vy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Hw=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ja,{},Ja,Ja)),t.pipe(vt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ec=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new _p(Zone.current)),this.insideAngular=t.run(()=>new _p(Zone.current,yy)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ne(Oe))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ep(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function iL(n){return Ep().ngZone.runOutsideAngular(()=>n())}function Es(n){return Ep().ngZone.run(()=>n())}function oL(n){return sL(Ep())(n)}function sL(n){return function(t){return t=t.lift(new Hw(n.ngZone)),t.pipe(qi(n.outsideAngular),Hi(n.insideAngular))}}var aL=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Es(()=>n.apply(void 0,r))},an=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=Es(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ja,{},Ja,Ja))),r[o]=aL(r[o],t));let i=iL(()=>n.apply(this,r));if(!e)if(i instanceof Ie){let o=Ep();return i.pipe(qi(o.outsideAngular),Hi(o.insideAngular))}else return Es(()=>i);return i instanceof Ie?i.pipe(oL):i instanceof Promise?Es(()=>new Promise((o,s)=>i.then(a=>Es(()=>o(a)),a=>Es(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Es(()=>i)};var di=class{constructor(e){return e}},Cs=class{constructor(){return Eh()}};function cL(n){return n&&n.length===1?n[0]:new di(bh())}var qw=new te("angularfire2._apps"),uL={provide:di,useFactory:cL,deps:[[new Wt,qw]]},lL={provide:Cs,deps:[[new Wt,qw]]};function dL(n){return(e,t)=>{let r=t.get($n);In("angularfire",Is.full,"core"),In("angularfire",Is.full,"app"),In("angular",VT.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new di(i)}}function zW(n,...e){return jn([uL,lL,{provide:qw,useFactory:dL(n),multi:!0,deps:[Oe,Ut,ec,...e]}])}var HW=an(nI,!0);var _S="auth",Ds=class{constructor(e){return e}},ll=class{constructor(){return ul(_S)}};var Gw=new te("angularfire2.auth-instances");function uj(n,e){let t=bp(_S,n,e);return t&&new Ds(t)}function lj(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ds(r)}}var dj={provide:ll,deps:[[new Wt,Gw]]},hj={provide:Ds,useFactory:uj,deps:[[new Wt,Gw],di]};function V7(n,...e){return In("angularfire",Is.full,"auth"),jn([hj,dj,{provide:Gw,useFactory:lj(n),multi:!0,deps:[Oe,Ut,ec,Cs,[new Wt,Xa],...e]}])}var L7=an(ty,!0);var bS=an(Xm,!0);var ES=an(ey,!0);var IS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},CS={};var fo,Ww;(function(){var n;function e(D,E){function I(){}I.prototype=E.prototype,D.D=E.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(T,S,A){for(var C=Array(arguments.length-2),Wn=2;Wn<arguments.length;Wn++)C[Wn-2]=arguments[Wn];return E.prototype[S].apply(T,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,E,I){I||(I=0);var T=Array(16);if(typeof E=="string")for(var S=0;16>S;++S)T[S]=E.charCodeAt(I++)|E.charCodeAt(I++)<<8|E.charCodeAt(I++)<<16|E.charCodeAt(I++)<<24;else for(S=0;16>S;++S)T[S]=E[I++]|E[I++]<<8|E[I++]<<16|E[I++]<<24;E=D.g[0],I=D.g[1],S=D.g[2];var A=D.g[3],C=E+(A^I&(S^A))+T[0]+3614090360&4294967295;E=I+(C<<7&4294967295|C>>>25),C=A+(S^E&(I^S))+T[1]+3905402710&4294967295,A=E+(C<<12&4294967295|C>>>20),C=S+(I^A&(E^I))+T[2]+606105819&4294967295,S=A+(C<<17&4294967295|C>>>15),C=I+(E^S&(A^E))+T[3]+3250441966&4294967295,I=S+(C<<22&4294967295|C>>>10),C=E+(A^I&(S^A))+T[4]+4118548399&4294967295,E=I+(C<<7&4294967295|C>>>25),C=A+(S^E&(I^S))+T[5]+1200080426&4294967295,A=E+(C<<12&4294967295|C>>>20),C=S+(I^A&(E^I))+T[6]+2821735955&4294967295,S=A+(C<<17&4294967295|C>>>15),C=I+(E^S&(A^E))+T[7]+4249261313&4294967295,I=S+(C<<22&4294967295|C>>>10),C=E+(A^I&(S^A))+T[8]+1770035416&4294967295,E=I+(C<<7&4294967295|C>>>25),C=A+(S^E&(I^S))+T[9]+2336552879&4294967295,A=E+(C<<12&4294967295|C>>>20),C=S+(I^A&(E^I))+T[10]+4294925233&4294967295,S=A+(C<<17&4294967295|C>>>15),C=I+(E^S&(A^E))+T[11]+2304563134&4294967295,I=S+(C<<22&4294967295|C>>>10),C=E+(A^I&(S^A))+T[12]+1804603682&4294967295,E=I+(C<<7&4294967295|C>>>25),C=A+(S^E&(I^S))+T[13]+4254626195&4294967295,A=E+(C<<12&4294967295|C>>>20),C=S+(I^A&(E^I))+T[14]+2792965006&4294967295,S=A+(C<<17&4294967295|C>>>15),C=I+(E^S&(A^E))+T[15]+1236535329&4294967295,I=S+(C<<22&4294967295|C>>>10),C=E+(S^A&(I^S))+T[1]+4129170786&4294967295,E=I+(C<<5&4294967295|C>>>27),C=A+(I^S&(E^I))+T[6]+3225465664&4294967295,A=E+(C<<9&4294967295|C>>>23),C=S+(E^I&(A^E))+T[11]+643717713&4294967295,S=A+(C<<14&4294967295|C>>>18),C=I+(A^E&(S^A))+T[0]+3921069994&4294967295,I=S+(C<<20&4294967295|C>>>12),C=E+(S^A&(I^S))+T[5]+3593408605&4294967295,E=I+(C<<5&4294967295|C>>>27),C=A+(I^S&(E^I))+T[10]+38016083&4294967295,A=E+(C<<9&4294967295|C>>>23),C=S+(E^I&(A^E))+T[15]+3634488961&4294967295,S=A+(C<<14&4294967295|C>>>18),C=I+(A^E&(S^A))+T[4]+3889429448&4294967295,I=S+(C<<20&4294967295|C>>>12),C=E+(S^A&(I^S))+T[9]+568446438&4294967295,E=I+(C<<5&4294967295|C>>>27),C=A+(I^S&(E^I))+T[14]+3275163606&4294967295,A=E+(C<<9&4294967295|C>>>23),C=S+(E^I&(A^E))+T[3]+4107603335&4294967295,S=A+(C<<14&4294967295|C>>>18),C=I+(A^E&(S^A))+T[8]+1163531501&4294967295,I=S+(C<<20&4294967295|C>>>12),C=E+(S^A&(I^S))+T[13]+2850285829&4294967295,E=I+(C<<5&4294967295|C>>>27),C=A+(I^S&(E^I))+T[2]+4243563512&4294967295,A=E+(C<<9&4294967295|C>>>23),C=S+(E^I&(A^E))+T[7]+1735328473&4294967295,S=A+(C<<14&4294967295|C>>>18),C=I+(A^E&(S^A))+T[12]+2368359562&4294967295,I=S+(C<<20&4294967295|C>>>12),C=E+(I^S^A)+T[5]+4294588738&4294967295,E=I+(C<<4&4294967295|C>>>28),C=A+(E^I^S)+T[8]+2272392833&4294967295,A=E+(C<<11&4294967295|C>>>21),C=S+(A^E^I)+T[11]+1839030562&4294967295,S=A+(C<<16&4294967295|C>>>16),C=I+(S^A^E)+T[14]+4259657740&4294967295,I=S+(C<<23&4294967295|C>>>9),C=E+(I^S^A)+T[1]+2763975236&4294967295,E=I+(C<<4&4294967295|C>>>28),C=A+(E^I^S)+T[4]+1272893353&4294967295,A=E+(C<<11&4294967295|C>>>21),C=S+(A^E^I)+T[7]+4139469664&4294967295,S=A+(C<<16&4294967295|C>>>16),C=I+(S^A^E)+T[10]+3200236656&4294967295,I=S+(C<<23&4294967295|C>>>9),C=E+(I^S^A)+T[13]+681279174&4294967295,E=I+(C<<4&4294967295|C>>>28),C=A+(E^I^S)+T[0]+3936430074&4294967295,A=E+(C<<11&4294967295|C>>>21),C=S+(A^E^I)+T[3]+3572445317&4294967295,S=A+(C<<16&4294967295|C>>>16),C=I+(S^A^E)+T[6]+76029189&4294967295,I=S+(C<<23&4294967295|C>>>9),C=E+(I^S^A)+T[9]+3654602809&4294967295,E=I+(C<<4&4294967295|C>>>28),C=A+(E^I^S)+T[12]+3873151461&4294967295,A=E+(C<<11&4294967295|C>>>21),C=S+(A^E^I)+T[15]+530742520&4294967295,S=A+(C<<16&4294967295|C>>>16),C=I+(S^A^E)+T[2]+3299628645&4294967295,I=S+(C<<23&4294967295|C>>>9),C=E+(S^(I|~A))+T[0]+4096336452&4294967295,E=I+(C<<6&4294967295|C>>>26),C=A+(I^(E|~S))+T[7]+1126891415&4294967295,A=E+(C<<10&4294967295|C>>>22),C=S+(E^(A|~I))+T[14]+2878612391&4294967295,S=A+(C<<15&4294967295|C>>>17),C=I+(A^(S|~E))+T[5]+4237533241&4294967295,I=S+(C<<21&4294967295|C>>>11),C=E+(S^(I|~A))+T[12]+1700485571&4294967295,E=I+(C<<6&4294967295|C>>>26),C=A+(I^(E|~S))+T[3]+2399980690&4294967295,A=E+(C<<10&4294967295|C>>>22),C=S+(E^(A|~I))+T[10]+4293915773&4294967295,S=A+(C<<15&4294967295|C>>>17),C=I+(A^(S|~E))+T[1]+2240044497&4294967295,I=S+(C<<21&4294967295|C>>>11),C=E+(S^(I|~A))+T[8]+1873313359&4294967295,E=I+(C<<6&4294967295|C>>>26),C=A+(I^(E|~S))+T[15]+4264355552&4294967295,A=E+(C<<10&4294967295|C>>>22),C=S+(E^(A|~I))+T[6]+2734768916&4294967295,S=A+(C<<15&4294967295|C>>>17),C=I+(A^(S|~E))+T[13]+1309151649&4294967295,I=S+(C<<21&4294967295|C>>>11),C=E+(S^(I|~A))+T[4]+4149444226&4294967295,E=I+(C<<6&4294967295|C>>>26),C=A+(I^(E|~S))+T[11]+3174756917&4294967295,A=E+(C<<10&4294967295|C>>>22),C=S+(E^(A|~I))+T[2]+718787259&4294967295,S=A+(C<<15&4294967295|C>>>17),C=I+(A^(S|~E))+T[9]+3951481745&4294967295,D.g[0]=D.g[0]+E&4294967295,D.g[1]=D.g[1]+(S+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+S&4294967295,D.g[3]=D.g[3]+A&4294967295}r.prototype.u=function(D,E){E===void 0&&(E=D.length);for(var I=E-this.blockSize,T=this.B,S=this.h,A=0;A<E;){if(S==0)for(;A<=I;)i(this,D,A),A+=this.blockSize;if(typeof D=="string"){for(;A<E;)if(T[S++]=D.charCodeAt(A++),S==this.blockSize){i(this,T),S=0;break}}else for(;A<E;)if(T[S++]=D[A++],S==this.blockSize){i(this,T),S=0;break}}this.h=S,this.o+=E},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var E=1;E<D.length-8;++E)D[E]=0;var I=8*this.o;for(E=D.length-8;E<D.length;++E)D[E]=I&255,I/=256;for(this.u(D),D=Array(16),E=I=0;4>E;++E)for(var T=0;32>T;T+=8)D[I++]=this.g[E]>>>T&255;return D};function o(D,E){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=E(D)}function s(D,E){this.h=E;for(var I=[],T=!0,S=D.length-1;0<=S;S--){var A=D[S]|0;T&&A==E||(I[S]=A,T=!1)}this.g=I}var a={};function c(D){return-128<=D&&128>D?o(D,function(E){return new s([E|0],0>E?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return M(l(-D));for(var E=[],I=1,T=0;D>=I;T++)E[T]=D/I|0,I*=4294967296;return new s(E,0)}function g(D,E){if(D.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D.charAt(0)=="-")return M(g(D.substring(1),E));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(E,8)),T=p,S=0;S<D.length;S+=8){var A=Math.min(8,D.length-S),C=parseInt(D.substring(S,S+A),E);8>A?(A=l(Math.pow(E,A)),T=T.j(A).add(l(C))):(T=T.j(I),T=T.add(l(C)))}return T}var p=c(0),w=c(1),b=c(16777216);n=s.prototype,n.m=function(){if(N(this))return-M(this).m();for(var D=0,E=1,I=0;I<this.g.length;I++){var T=this.i(I);D+=(0<=T?T:4294967296+T)*E,E*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(x(this))return"0";if(N(this))return"-"+M(this).toString(D);for(var E=l(Math.pow(D,6)),I=this,T="";;){var S=se(I,E).g;I=j(I,S.j(E));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=S,x(I))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function x(D){if(D.h!=0)return!1;for(var E=0;E<D.g.length;E++)if(D.g[E]!=0)return!1;return!0}function N(D){return D.h==-1}n.l=function(D){return D=j(this,D),N(D)?-1:x(D)?0:1};function M(D){for(var E=D.g.length,I=[],T=0;T<E;T++)I[T]=~D.g[T];return new s(I,~D.h).add(w)}n.abs=function(){return N(this)?M(this):this},n.add=function(D){for(var E=Math.max(this.g.length,D.g.length),I=[],T=0,S=0;S<=E;S++){var A=T+(this.i(S)&65535)+(D.i(S)&65535),C=(A>>>16)+(this.i(S)>>>16)+(D.i(S)>>>16);T=C>>>16,A&=65535,C&=65535,I[S]=C<<16|A}return new s(I,I[I.length-1]&-2147483648?-1:0)};function j(D,E){return D.add(M(E))}n.j=function(D){if(x(this)||x(D))return p;if(N(this))return N(D)?M(this).j(M(D)):M(M(this).j(D));if(N(D))return M(this.j(M(D)));if(0>this.l(b)&&0>D.l(b))return l(this.m()*D.m());for(var E=this.g.length+D.g.length,I=[],T=0;T<2*E;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<D.g.length;S++){var A=this.i(T)>>>16,C=this.i(T)&65535,Wn=D.i(S)>>>16,Ti=D.i(S)&65535;I[2*T+2*S]+=C*Ti,W(I,2*T+2*S),I[2*T+2*S+1]+=A*Ti,W(I,2*T+2*S+1),I[2*T+2*S+1]+=C*Wn,W(I,2*T+2*S+1),I[2*T+2*S+2]+=A*Wn,W(I,2*T+2*S+2)}for(T=0;T<E;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=E;T<2*E;T++)I[T]=0;return new s(I,0)};function W(D,E){for(;(D[E]&65535)!=D[E];)D[E+1]+=D[E]>>>16,D[E]&=65535,E++}function H(D,E){this.g=D,this.h=E}function se(D,E){if(x(E))throw Error("division by zero");if(x(D))return new H(p,p);if(N(D))return E=se(M(D),E),new H(M(E.g),M(E.h));if(N(E))return E=se(D,M(E)),new H(M(E.g),E.h);if(30<D.g.length){if(N(D)||N(E))throw Error("slowDivide_ only works with positive integers.");for(var I=w,T=E;0>=T.l(D);)I=ce(I),T=ce(T);var S=ee(I,1),A=ee(T,1);for(T=ee(T,2),I=ee(I,2);!x(T);){var C=A.add(T);0>=C.l(D)&&(S=S.add(I),A=C),T=ee(T,1),I=ee(I,1)}return E=j(D,S.j(E)),new H(S,E)}for(S=p;0<=D.l(E);){for(I=Math.max(1,Math.floor(D.m()/E.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=l(I),C=A.j(E);N(C)||0<C.l(D);)I-=T,A=l(I),C=A.j(E);x(A)&&(A=w),S=S.add(A),D=j(D,C)}return new H(S,D)}n.A=function(D){return se(this,D).h},n.and=function(D){for(var E=Math.max(this.g.length,D.g.length),I=[],T=0;T<E;T++)I[T]=this.i(T)&D.i(T);return new s(I,this.h&D.h)},n.or=function(D){for(var E=Math.max(this.g.length,D.g.length),I=[],T=0;T<E;T++)I[T]=this.i(T)|D.i(T);return new s(I,this.h|D.h)},n.xor=function(D){for(var E=Math.max(this.g.length,D.g.length),I=[],T=0;T<E;T++)I[T]=this.i(T)^D.i(T);return new s(I,this.h^D.h)};function ce(D){for(var E=D.g.length+1,I=[],T=0;T<E;T++)I[T]=D.i(T)<<1|D.i(T-1)>>>31;return new s(I,D.h)}function ee(D,E){var I=E>>5;E%=32;for(var T=D.g.length-I,S=[],A=0;A<T;A++)S[A]=0<E?D.i(A+I)>>>E|D.i(A+I+1)<<32-E:D.i(A+I);return new s(S,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ww=CS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=g,fo=CS.Integer=s}).apply(typeof IS<"u"?IS:typeof self<"u"?self:typeof window<"u"?window:{});var Ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hi={};var Kw,pj,tc,Qw,dl,Cp,Zw,Yw,Jw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ip=="object"&&Ip];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var v=0;v<u.length-1;v++){var R=u[v];if(!(R in m))break e;m=m[R]}u=u[u.length-1],v=m[u],f=f(v),f!=v&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function o(u,f){u instanceof String&&(u+="");var m=0,v=!1,R={next:function(){if(!v&&m<u.length){var k=m++;return{value:f(k,u[k]),done:!1}}return v=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}i("Array.prototype.values",function(u){return u||function(){return o(this,function(f,m){return m})}});var s=s||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function g(u,f,m){return u.call.apply(u.bind,arguments)}function p(u,f,m){if(!u)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,v),u.apply(f,R)}}return function(){return u.apply(f,arguments)}}function w(u,f,m){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:p,w.apply(null,arguments)}function b(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),u.apply(this,v)}}function x(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(v,R,k){for(var q=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)q[Ve-2]=arguments[Ve];return f.prototype[R].apply(v,q)}}function N(u){let f=u.length;if(0<f){let m=Array(f);for(let v=0;v<f;v++)m[v]=u[v];return m}return[]}function M(u,f){for(let m=1;m<arguments.length;m++){let v=arguments[m];if(c(v)){let R=u.length||0,k=v.length||0;u.length=R+k;for(let q=0;q<k;q++)u[R+q]=v[q]}else u.push(v)}}class j{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function W(u){return/^[\s\xa0]*$/.test(u)}function H(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function se(u){return se[" "](u),u}se[" "]=function(){};var ce=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ee(u,f,m){for(let v in u)f.call(m,u[v],v,u)}function D(u,f){for(let m in u)f.call(void 0,u[m],m,u)}function E(u){let f={};for(let m in u)f[m]=u[m];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,f){let m,v;for(let R=1;R<arguments.length;R++){v=arguments[R];for(m in v)u[m]=v[m];for(let k=0;k<I.length;k++)m=I[k],Object.prototype.hasOwnProperty.call(v,m)&&(u[m]=v[m])}}function S(u){var f=1;u=u.split(":");let m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function A(u){a.setTimeout(()=>{throw u},0)}function C(){var u=Ai;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Wn{constructor(){this.h=this.g=null}add(f,m){let v=Ti.get();v.set(f,m),this.h?this.h.next=v:this.g=v,this.h=v}}var Ti=new j(()=>new cu,u=>u.reset());class cu{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Si,qr=!1,Ai=new Wn,wn=()=>{let u=a.Promise.resolve(void 0);Si=()=>{u.then(xi)}};var xi=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(m){A(m)}var f=Ti;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}qr=!1};function Ht(){this.s=this.s,this.C=this.C}Ht.prototype.s=!1,Ht.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ht.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Nt(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Nt.prototype.h=function(){this.defaultPrevented=!0};var Mi=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function Kn(u,f){if(Nt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,v=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(ce){e:{try{se(f.nodeName);var R=!0;break e}catch{}R=!1}R||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ad[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Kn.aa.h.call(this)}}x(Kn,Nt);var Ad={2:"touch",3:"pen",4:"mouse"};Kn.prototype.h=function(){Kn.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var dr="closure_listenable_"+(1e6*Math.random()|0),uu=0;function Rm(u,f,m,v,R){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!v,this.ha=R,this.key=++uu,this.da=this.fa=!1}function Ri(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ni(u){this.src=u,this.g={},this.h=0}Ni.prototype.add=function(u,f,m,v,R){var k=u.toString();u=this.g[k],u||(u=this.g[k]=[],this.h++);var q=lu(u,f,v,R);return-1<q?(f=u[q],m||(f.fa=!1)):(f=new Rm(f,this.src,k,!!v,R),f.fa=m,u.push(f)),f};function Pi(u,f){var m=f.type;if(m in u.g){var v=u.g[m],R=Array.prototype.indexOf.call(v,f,void 0),k;(k=0<=R)&&Array.prototype.splice.call(v,R,1),k&&(Ri(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function lu(u,f,m,v){for(var R=0;R<u.length;++R){var k=u[R];if(!k.da&&k.listener==f&&k.capture==!!m&&k.ha==v)return R}return-1}var Vt="closure_lm_"+(1e6*Math.random()|0),_n={};function xd(u,f,m,v,R){if(v&&v.once)return du(u,f,m,v,R);if(Array.isArray(f)){for(var k=0;k<f.length;k++)xd(u,f[k],m,v,R);return null}return m=pt(m),u&&u[dr]?u.K(f,m,l(v)?!!v.capture:!!v,R):qt(u,f,m,!1,v,R)}function qt(u,f,m,v,R,k){if(!f)throw Error("Invalid event type");var q=l(R)?!!R.capture:!!R,Ve=Qn(u);if(Ve||(u[Vt]=Ve=new Ni(u)),m=Ve.add(f,m,v,q,k),m.proxy)return m;if(v=ta(),m.proxy=v,v.src=u,v.listener=m,u.addEventListener)Mi||(R=q),R===void 0&&(R=!1),u.addEventListener(f.toString(),v,R);else if(u.attachEvent)u.attachEvent(bn(f.toString()),v);else if(u.addListener&&u.removeListener)u.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ta(){function u(m){return f.call(u.src,u.listener,m)}let f=hr;return u}function du(u,f,m,v,R){if(Array.isArray(f)){for(var k=0;k<f.length;k++)du(u,f[k],m,v,R);return null}return m=pt(m),u&&u[dr]?u.L(f,m,l(v)?!!v.capture:!!v,R):qt(u,f,m,!0,v,R)}function hu(u,f,m,v,R){if(Array.isArray(f))for(var k=0;k<f.length;k++)hu(u,f[k],m,v,R);else v=l(v)?!!v.capture:!!v,m=pt(m),u&&u[dr]?(u=u.i,f=String(f).toString(),f in u.g&&(k=u.g[f],m=lu(k,m,v,R),-1<m&&(Ri(k[m]),Array.prototype.splice.call(k,m,1),k.length==0&&(delete u.g[f],u.h--)))):u&&(u=Qn(u))&&(f=u.g[f.toString()],u=-1,f&&(u=lu(f,m,v,R)),(m=-1<u?f[u]:null)&&Te(m))}function Te(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[dr])Pi(f.i,u);else{var m=u.type,v=u.proxy;f.removeEventListener?f.removeEventListener(m,v,u.capture):f.detachEvent?f.detachEvent(bn(m),v):f.addListener&&f.removeListener&&f.removeListener(v),(m=Qn(f))?(Pi(m,u),m.h==0&&(m.src=null,f[Vt]=null)):Ri(u)}}}function bn(u){return u in _n?_n[u]:_n[u]="on"+u}function hr(u,f){if(u.da)u=!0;else{f=new Kn(f,this);var m=u.listener,v=u.ha||u.src;u.fa&&Te(u),u=m.call(v,f)}return u}function Qn(u){return u=u[Vt],u instanceof Ni?u:null}var nt="__closure_events_fn_"+(1e9*Math.random()>>>0);function pt(u){return typeof u=="function"?u:(u[nt]||(u[nt]=function(f){return u.handleEvent(f)}),u[nt])}function gt(){Ht.call(this),this.i=new Ni(this),this.M=this,this.F=null}x(gt,Ht),gt.prototype[dr]=!0,gt.prototype.removeEventListener=function(u,f,m,v){hu(this,u,f,m,v)};function Pt(u,f){var m,v=u.F;if(v)for(m=[];v;v=v.F)m.push(v);if(u=u.M,v=f.type||f,typeof f=="string")f=new Nt(f,u);else if(f instanceof Nt)f.target=f.target||u;else{var R=f;f=new Nt(v,u),T(f,R)}if(R=!0,m)for(var k=m.length-1;0<=k;k--){var q=f.g=m[k];R=fr(q,v,!0,f)&&R}if(q=f.g=u,R=fr(q,v,!0,f)&&R,R=fr(q,v,!1,f)&&R,m)for(k=0;k<m.length;k++)q=f.g=m[k],R=fr(q,v,!1,f)&&R}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],v=0;v<m.length;v++)Ri(m[v]);delete u.g[f],u.h--}}this.F=null},gt.prototype.K=function(u,f,m,v){return this.i.add(String(u),f,!1,m,v)},gt.prototype.L=function(u,f,m,v){return this.i.add(String(u),f,!0,m,v)};function fr(u,f,m,v){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var R=!0,k=0;k<f.length;++k){var q=f[k];if(q&&!q.da&&q.capture==m){var Ve=q.listener,Ct=q.ha||q.src;q.fa&&Pi(u.i,q),R=Ve.call(Ct,v)!==!1&&R}}return R&&!v.defaultPrevented}function Lt(u,f,m){if(typeof u=="function")m&&(u=w(u,m));else if(u&&typeof u.handleEvent=="function")u=w(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function Md(u){u.g=Lt(()=>{u.g=null,u.i&&(u.i=!1,Md(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class Rd extends Ht{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Md(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oi(u){Ht.call(this),this.h=u,this.g={}}x(Oi,Ht);var na=[];function Nd(u){ee(u.g,function(f,m){this.g.hasOwnProperty(m)&&Te(f)},u),u.g={}}Oi.prototype.N=function(){Oi.aa.N.call(this),Nd(this)},Oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fu=a.JSON.stringify,Nm=a.JSON.parse,Pm=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Zn(){}Zn.prototype.h=null;function Pd(u){return u.h||(u.h=u.i())}function Od(){}var Uo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pu(){Nt.call(this,"d")}x(pu,Nt);function gu(){Nt.call(this,"c")}x(gu,Nt);var Yn={},kd=null;function ra(){return kd=kd||new gt}Yn.La="serverreachability";function Fd(u){Nt.call(this,Yn.La,u)}x(Fd,Nt);function $o(u){let f=ra();Pt(f,new Fd(f))}Yn.STAT_EVENT="statevent";function Vd(u,f){Nt.call(this,Yn.STAT_EVENT,u),this.stat=f}x(Vd,Nt);function It(u){let f=ra();Pt(f,new Vd(f,u))}Yn.Ma="timingevent";function Ld(u,f){Nt.call(this,Yn.Ma,u),this.size=f}x(Ld,Nt);function zo(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Ho(){this.g=!0}Ho.prototype.xa=function(){this.g=!1};function Om(u,f,m,v,R,k){u.info(function(){if(u.g)if(k)for(var q="",Ve=k.split("&"),Ct=0;Ct<Ve.length;Ct++){var Ae=Ve[Ct].split("=");if(1<Ae.length){var Ot=Ae[0];Ae=Ae[1];var Dt=Ot.split("_");q=2<=Dt.length&&Dt[1]=="type"?q+(Ot+"="+Ae+"&"):q+(Ot+"=redacted&")}}else q=null;else q=k;return"XMLHTTP REQ ("+v+") [attempt "+R+"]: "+f+`
`+m+`
`+q})}function km(u,f,m,v,R,k,q){u.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+R+"]: "+f+`
`+m+`
`+k+" "+q})}function Ne(u,f,m,v){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Vm(u,m)+(v?" "+v:"")})}function Fm(u,f){u.info(function(){return"TIMEOUT: "+f})}Ho.prototype.info=function(){};function Vm(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var v=m[u];if(!(2>v.length)){var R=v[1];if(Array.isArray(R)&&!(1>R.length)){var k=R[0];if(k!="noop"&&k!="stop"&&k!="close")for(var q=1;q<R.length;q++)R[q]=""}}}}return fu(m)}catch{return f}}var ia={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mu;function oa(){}x(oa,Zn),oa.prototype.g=function(){return new XMLHttpRequest},oa.prototype.i=function(){return{}},mu=new oa;function On(u,f,m,v){this.j=u,this.i=f,this.l=m,this.R=v||1,this.U=new Oi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ki}function ki(){this.i=null,this.g="",this.h=!1}var yu={},Fi={};function We(u,f,m){u.L=1,u.v=aa(kn(f)),u.m=m,u.P=!0,Bd(u,null)}function Bd(u,f){u.F=Date.now(),qo(u),u.A=kn(u.v);var m=u.A,v=u.R;Array.isArray(v)||(v=[String(v)]),nh(m.i,"t",v),u.C=0,m=u.j.J,u.h=new ki,u.g=Nu(u.j,m?f:null,!u.m),0<u.O&&(u.M=new Rd(w(u.Y,u,u.g),u.O)),f=u.U,m=u.g,v=u.ca;var R="readystatechange";Array.isArray(R)||(R&&(na[0]=R.toString()),R=na);for(var k=0;k<R.length;k++){var q=xd(m,R[k],v||f.handleEvent,!1,f.h||f);if(!q)break;f.g[q.key]=q}f=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),$o(),Om(u.i,u.u,u.A,u.l,u.R,u.m)}On.prototype.ca=function(u){u=u.target;let f=this.M;f&&Xn(u)==3?f.j():this.Y(u)},On.prototype.Y=function(u){try{if(u==this.g)e:{let Dt=Xn(this.g);var f=this.g.Ba();let vr=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||uh(this.g)))){this.J||Dt!=4||f==7||(f==8||0>=vr?$o(3):$o(2)),vu(this);var m=this.g.Z();this.X=m;t:if(Ud(this)){var v=uh(this.g);u="";var R=v.length,k=Xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pr(this),Go(this);var q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<R;f++)this.h.h=!0,u+=this.h.i.decode(v[f],{stream:!(k&&f==R-1)});v.length=0,this.h.g+=u,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=m==200,km(this.i,this.u,this.A,this.l,this.R,Dt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,Ct=this.g;if((Ve=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Ve)){var Ae=Ve;break t}}Ae=null}if(m=Ae)Ne(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wu(this,m);else{this.o=!1,this.s=3,It(12),pr(this),Go(this);break e}}if(this.P){m=!0;let En;for(;!this.J&&this.C<q.length;)if(En=Lm(this,q),En==Fi){Dt==4&&(this.s=4,It(14),m=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}else if(En==yu){this.s=4,It(15),Ne(this.i,this.l,q,"[Invalid Chunk]"),m=!1;break}else Ne(this.i,this.l,En,null),wu(this,En);if(Ud(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||q.length!=0||this.h.h||(this.s=1,It(16),m=!1),this.o=this.o&&m,!m)Ne(this.i,this.l,q,"[Invalid Chunked Response]"),pr(this),Go(this);else if(0<q.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),$i(Ot),Ot.M=!0,It(11))}}else Ne(this.i,this.l,q,null),wu(this,q);Dt==4&&pr(this),this.o&&!this.J&&(Dt==4?Au(this.j,this):(this.o=!1,qo(this)))}else Wm(this.g),m==400&&0<q.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),pr(this),Go(this)}}}catch{}finally{}};function Ud(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Lm(u,f){var m=u.C,v=f.indexOf(`
`,m);return v==-1?Fi:(m=Number(f.substring(m,v)),isNaN(m)?yu:(v+=1,v+m>f.length?Fi:(f=f.slice(v,v+m),u.C=v+m,f)))}On.prototype.cancel=function(){this.J=!0,pr(this)};function qo(u){u.S=Date.now()+u.I,$d(u,u.I)}function $d(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=zo(w(u.ba,u),f)}function vu(u){u.B&&(a.clearTimeout(u.B),u.B=null)}On.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Fm(this.i,this.A),this.L!=2&&($o(),It(17)),pr(this),this.s=2,Go(this)):$d(this,this.S-u)};function Go(u){u.j.G==0||u.J||Au(u.j,u)}function pr(u){vu(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Nd(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function wu(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||_u(m.h,u))){if(!u.K&&_u(m.h,u)&&m.G==3){try{var v=m.Da.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var R=v;if(R[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)es(m),da(m);else break e;Xo(m),It(18)}}else m.za=R[1],0<m.za-m.T&&37500>R[2]&&m.F&&m.v==0&&!m.C&&(m.C=zo(w(m.Za,m),6e3));if(1>=Gd(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else yr(m,11)}else if((u.K||m.g==u)&&es(m),!W(f))for(R=m.Da.g.parse(f),f=0;f<R.length;f++){let Ae=R[f];if(m.T=Ae[0],Ae=Ae[1],m.G==2)if(Ae[0]=="c"){m.K=Ae[1],m.ia=Ae[2];let Ot=Ae[3];Ot!=null&&(m.la=Ot,m.j.info("VER="+m.la));let Dt=Ae[4];Dt!=null&&(m.Aa=Dt,m.j.info("SVER="+m.Aa));let vr=Ae[5];vr!=null&&typeof vr=="number"&&0<vr&&(v=1.5*vr,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;let En=u.g;if(En){let fa=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fa){var k=v.h;k.g||fa.indexOf("spdy")==-1&&fa.indexOf("quic")==-1&&fa.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(bu(k,k.h),k.h=null))}if(v.D){let Ou=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Ou&&(v.ya=Ou,He(v.I,v.D,Ou))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var q=u;if(v.qa=Ru(v,v.J?v.ia:null,v.W),q.K){Wd(v.h,q);var Ve=q,Ct=v.L;Ct&&(Ve.I=Ct),Ve.B&&(vu(Ve),qo(Ve)),v.g=q}else Su(v);0<m.i.length&&ha(m)}else Ae[0]!="stop"&&Ae[0]!="close"||yr(m,7);else m.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?yr(m,7):la(m):Ae[0]!="noop"&&m.l&&m.l.ta(Ae),m.v=0)}}$o(4)}catch{}}var zd=class{constructor(u,f){this.g=u,this.map=f}};function Hd(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qd(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Gd(u){return u.h?1:u.g?u.g.size:0}function _u(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function bu(u,f){u.g?u.g.add(f):u.h=f}function Wd(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Hd.prototype.cancel=function(){if(this.i=Kd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Kd(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let m of u.g.values())f=f.concat(m.D);return f}return N(u.i)}function Qd(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],m=u.length,v=0;v<m;v++)f.push(u[v]);return f}f=[],m=0;for(v in u)f[m++]=u[v];return f}function jm(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(let v in u)f[m++]=v;return f}}}function Eu(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=jm(u),v=Qd(u),R=v.length,k=0;k<R;k++)f.call(void 0,v[k],m&&m[k],u)}var Zd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bm(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var v=u[m].indexOf("="),R=null;if(0<=v){var k=u[m].substring(0,v);R=u[m].substring(v+1)}else k=u[m];f(k,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function dn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof dn){this.h=u.h,sa(this,u.j),this.o=u.o,this.g=u.g,Vi(this,u.s),this.l=u.l;var f=u.i,m=new Qo;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Iu(this,m),this.m=u.m}else u&&(f=String(u).match(Zd))?(this.h=!1,sa(this,f[1]||"",!0),this.o=Wo(f[2]||""),this.g=Wo(f[3]||"",!0),Vi(this,f[4]),this.l=Wo(f[5]||"",!0),Iu(this,f[6]||"",!0),this.m=Wo(f[7]||"")):(this.h=!1,this.i=new Qo(null,this.h))}dn.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Ko(f,Yd,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Ko(f,Yd,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Ko(m,m.charAt(0)=="/"?$m:Li,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Ko(m,Xd)),u.join("")};function kn(u){return new dn(u)}function sa(u,f,m){u.j=m?Wo(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Vi(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Iu(u,f,m){f instanceof Qo?(u.i=f,zm(u.i,u.h)):(m||(f=Ko(f,Jd)),u.i=new Qo(f,u.h))}function He(u,f,m){u.i.set(f,m)}function aa(u){return He(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Wo(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ko(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,Um),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Um(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Yd=/[#\/\?@]/g,Li=/[#\?:]/g,$m=/[#\?]/g,Jd=/[#\?@]/g,Xd=/#/g;function Qo(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function gr(u){u.g||(u.g=new Map,u.h=0,u.i&&Bm(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=Qo.prototype,n.add=function(u,f){gr(this),this.i=null,u=ji(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function eh(u,f){gr(u),f=ji(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function th(u,f){return gr(u),f=ji(u,f),u.g.has(f)}n.forEach=function(u,f){gr(this),this.g.forEach(function(m,v){m.forEach(function(R){u.call(f,R,v,this)},this)},this)},n.na=function(){gr(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let v=0;v<f.length;v++){let R=u[v];for(let k=0;k<R.length;k++)m.push(f[v])}return m},n.V=function(u){gr(this);let f=[];if(typeof u=="string")th(this,u)&&(f=f.concat(this.g.get(ji(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return gr(this),this.i=null,u=ji(this,u),th(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function nh(u,f,m){eh(u,f),0<m.length&&(u.i=null,u.g.set(ji(u,f),N(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var v=f[m];let k=encodeURIComponent(String(v)),q=this.V(v);for(v=0;v<q.length;v++){var R=k;q[v]!==""&&(R+="="+encodeURIComponent(String(q[v]))),u.push(R)}}return this.i=u.join("&")};function ji(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function zm(u,f){f&&!u.j&&(gr(u),u.i=null,u.g.forEach(function(m,v){var R=v.toLowerCase();v!=R&&(eh(this,v),nh(this,R,m))},u)),u.j=f}function Bi(u,f){let m=new Ho;if(a.Image){let v=new Image;v.onload=b(mr,m,"TestLoadImage: loaded",!0,f,v),v.onerror=b(mr,m,"TestLoadImage: error",!1,f,v),v.onabort=b(mr,m,"TestLoadImage: abort",!1,f,v),v.ontimeout=b(mr,m,"TestLoadImage: timeout",!1,f,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=u}else f(!1)}function Hm(u,f){let m=new Ho,v=new AbortController,R=setTimeout(()=>{v.abort(),mr(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:v.signal}).then(k=>{clearTimeout(R),k.ok?mr(m,"TestPingServer: ok",!0,f):mr(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(R),mr(m,"TestPingServer: error",!1,f)})}function mr(u,f,m,v,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),v(m)}catch{}}function rh(){this.g=new Pm}function qm(u,f,m){let v=m||"";try{Eu(u,function(R,k){let q=R;l(R)&&(q=fu(R)),f.push(v+k+"="+encodeURIComponent(q))})}catch(R){throw f.push(v+"type="+encodeURIComponent("_badmap")),R}}function hn(u){this.l=u.Ub||null,this.j=u.eb||!1}x(hn,Zn),hn.prototype.g=function(){return new ca(this.l,this.j)},hn.prototype.i=function(u){return function(){return u}}({});function ca(u,f){gt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(ca,gt),n=ca.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Zo(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Zo(this)),this.g&&(this.readyState=3,Zo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Jn(this):Zo(this),this.readyState==3&&Cu(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Jn(this))},n.Qa=function(u){this.g&&(this.response=u,Jn(this))},n.ga=function(){this.g&&Jn(this)};function Jn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Zo(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function Zo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ih(u){let f="";return ee(u,function(m,v){f+=v,f+=":",f+=m,f+=`\r
`}),f}function Du(u,f,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=ih(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):He(u,f,m))}function Ke(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ke,gt);var Ui=/^https?$/i,Gm=["POST","PUT"];n=Ke.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mu.g(),this.v=this.o?Pd(this.o):Pd(mu),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(k){oh(this,k);return}if(u=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var R in v)m.set(R,v[R]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let k of v.keys())m.set(k,v.get(k));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(k=>k.toLowerCase()=="content-type"),R=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Gm,f,void 0))||v||R||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,q]of m)this.g.setRequestHeader(k,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ch(this),this.u=!0,this.g.send(u),this.u=!1}catch(k){oh(this,k)}};function oh(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,sh(u),ua(u)}function sh(u){u.A||(u.A=!0,Pt(u,"complete"),Pt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Pt(this,"complete"),Pt(this,"abort"),ua(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ua(this,!0)),Ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ah(this):this.bb())},n.bb=function(){ah(this)};function ah(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Xn(u)!=4||u.Z()!=2)){if(u.u&&Xn(u)==4)Lt(u.Ea,0,u);else if(Pt(u,"readystatechange"),Xn(u)==4){u.h=!1;try{let q=u.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var v;if(v=q===0){var R=String(u.D).match(Zd)[1]||null;!R&&a.self&&a.self.location&&(R=a.self.location.protocol.slice(0,-1)),v=!Ui.test(R?R.toLowerCase():"")}m=v}if(m)Pt(u,"complete"),Pt(u,"success");else{u.m=6;try{var k=2<Xn(u)?u.g.statusText:""}catch{k=""}u.l=k+" ["+u.Z()+"]",sh(u)}}finally{ua(u)}}}}function ua(u,f){if(u.g){ch(u);let m=u.g,v=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Pt(u,"ready");try{m.onreadystatechange=v}catch{}}}function ch(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Xn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Nm(f)}};function uh(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Wm(u){let f={};u=(u.g&&2<=Xn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<u.length;v++){if(W(u[v]))continue;var m=S(u[v]);let R=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let k=f[R]||[];f[R]=k,k.push(m)}D(f,function(v){return v.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yo(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Jo(u){this.Aa=0,this.i=[],this.j=new Ho,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yo("baseRetryDelayMs",5e3,u),this.cb=Yo("retryDelaySeedMs",1e4,u),this.Wa=Yo("forwardChannelMaxRetries",2,u),this.wa=Yo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Hd(u&&u.concurrentRequestLimit),this.Da=new rh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Jo.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,v){It(0),this.W=u,this.H=f||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=Ru(this,null,this.W),ha(this)};function la(u){if(lh(u),u.G==3){var f=u.U++,m=kn(u.I);if(He(m,"SID",u.K),He(m,"RID",f),He(m,"TYPE","terminate"),Gr(u,m),f=new On(u,u.j,f),f.L=2,f.v=aa(kn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=Nu(f.j,null),f.g.ea(f.v)),f.F=Date.now(),qo(f)}Mu(u)}function da(u){u.g&&($i(u),u.g.cancel(),u.g=null)}function lh(u){da(u),u.u&&(a.clearTimeout(u.u),u.u=null),es(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ha(u){if(!qd(u.h)&&!u.s){u.s=!0;var f=u.Ga;Si||wn(),qr||(Si(),qr=!0),Ai.add(f,u),u.B=0}}function dh(u,f){return Gd(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=zo(w(u.Ga,u,f),xu(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let R=new On(this,this.j,u),k=this.o;if(this.S&&(k?(k=E(k),T(k,this.S)):k=this.S),this.m!==null||this.O||(R.H=k,k=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(f+=v,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Tu(this,R,f),m=kn(this.I),He(m,"RID",u),He(m,"CVER",22),this.D&&He(m,"X-HTTP-Session-Id",this.D),Gr(this,m),k&&(this.O?f="headers="+encodeURIComponent(String(ih(k)))+"&"+f:this.m&&Du(m,this.m,k)),bu(this.h,R),this.Ua&&He(m,"TYPE","init"),this.P?(He(m,"$req",f),He(m,"SID","null"),R.T=!0,We(R,m,null)):We(R,m,f),this.G=2}}else this.G==3&&(u?hh(this,u):this.i.length==0||qd(this.h)||hh(this))};function hh(u,f){var m;f?m=f.l:m=u.U++;let v=kn(u.I);He(v,"SID",u.K),He(v,"RID",m),He(v,"AID",u.T),Gr(u,v),u.m&&u.o&&Du(v,u.m,u.o),m=new On(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Tu(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),bu(u.h,m),We(m,v,f)}function Gr(u,f){u.H&&ee(u.H,function(m,v){He(f,v,m)}),u.l&&Eu({},function(m,v){He(f,v,m)})}function Tu(u,f,m){m=Math.min(u.i.length,m);var v=u.l?w(u.l.Na,u.l,u):null;e:{var R=u.i;let k=-1;for(;;){let q=["count="+m];k==-1?0<m?(k=R[0].g,q.push("ofs="+k)):k=0:q.push("ofs="+k);let Ve=!0;for(let Ct=0;Ct<m;Ct++){let Ae=R[Ct].g,Ot=R[Ct].map;if(Ae-=k,0>Ae)k=Math.max(0,R[Ct].g-100),Ve=!1;else try{qm(Ot,q,"req"+Ae+"_")}catch{v&&v(Ot)}}if(Ve){v=q.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,v}function Su(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Si||wn(),qr||(Si(),qr=!0),Ai.add(f,u),u.v=0}}function Xo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=zo(w(u.Fa,u),xu(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,fh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=zo(w(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),da(this),fh(this))};function $i(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function fh(u){u.g=new On(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=kn(u.qa);He(f,"RID","rpc"),He(f,"SID",u.K),He(f,"AID",u.T),He(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&He(f,"TO",u.ja),He(f,"TYPE","xmlhttp"),Gr(u,f),u.m&&u.o&&Du(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=aa(kn(f)),m.m=null,m.P=!0,Bd(m,u)}n.Za=function(){this.C!=null&&(this.C=null,da(this),Xo(this),It(19))};function es(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Au(u,f){var m=null;if(u.g==f){es(u),$i(u),u.g=null;var v=2}else if(_u(u.h,f))m=f.D,Wd(u.h,f),v=1;else return;if(u.G!=0){if(f.o)if(v==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var R=u.B;v=ra(),Pt(v,new Ld(v,m)),ha(u)}else Su(u);else if(R=f.s,R==3||R==0&&0<f.X||!(v==1&&dh(u,f)||v==2&&Xo(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),R){case 1:yr(u,5);break;case 4:yr(u,10);break;case 3:yr(u,6);break;default:yr(u,2)}}}function xu(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function yr(u,f){if(u.j.info("Error code "+f),f==2){var m=w(u.fb,u),v=u.Xa;let R=!v;v=new dn(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||sa(v,"https"),aa(v),R?Bi(v.toString(),m):Hm(v.toString(),m)}else It(2);u.G=0,u.l&&u.l.sa(f),Mu(u),lh(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Mu(u){if(u.G=0,u.ka=[],u.l){let f=Kd(u.h);(f.length!=0||u.i.length!=0)&&(M(u.ka,f),M(u.ka,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.ra()}}function Ru(u,f,m){var v=m instanceof dn?kn(m):new dn(m);if(v.g!="")f&&(v.g=f+"."+v.g),Vi(v,v.s);else{var R=a.location;v=R.protocol,f=f?f+"."+R.hostname:R.hostname,R=+R.port;var k=new dn(null);v&&sa(k,v),f&&(k.g=f),R&&Vi(k,R),m&&(k.l=m),v=k}return m=u.D,f=u.ya,m&&f&&He(v,m,f),He(v,"VER",u.la),Gr(u,v),v}function Nu(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ke(new hn({eb:m})):new Ke(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pu(){}n=Pu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ts(){}ts.prototype.g=function(u,f){return new mt(u,f)};function mt(u,f){gt.call(this),this.g=new Jo(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!W(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!W(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new zi(this)}x(mt,gt),mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mt.prototype.close=function(){la(this.g)},mt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=fu(u),u=m);f.i.push(new zd(f.Ya++,u)),f.G==3&&ha(f)},mt.prototype.N=function(){this.g.l=null,delete this.j,la(this.g),delete this.g,mt.aa.N.call(this)};function ph(u){pu.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}x(ph,pu);function gh(){gu.call(this),this.status=1}x(gh,gu);function zi(u){this.g=u}x(zi,Pu),zi.prototype.ua=function(){Pt(this.g,"a")},zi.prototype.ta=function(u){Pt(this.g,new ph(u))},zi.prototype.sa=function(u){Pt(this.g,new gh)},zi.prototype.ra=function(){Pt(this.g,"b")},ts.prototype.createWebChannel=ts.prototype.g,mt.prototype.send=mt.prototype.o,mt.prototype.open=mt.prototype.m,mt.prototype.close=mt.prototype.close,Jw=hi.createWebChannelTransport=function(){return new ts},Yw=hi.getStatEventTarget=function(){return ra()},Zw=hi.Event=Yn,Cp=hi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ia.NO_ERROR=0,ia.TIMEOUT=8,ia.HTTP_ERROR=6,dl=hi.ErrorCode=ia,jd.COMPLETE="complete",Qw=hi.EventType=jd,Od.EventType=Uo,Uo.OPEN="a",Uo.CLOSE="b",Uo.ERROR="c",Uo.MESSAGE="d",gt.prototype.listen=gt.prototype.K,tc=hi.WebChannel=Od,pj=hi.FetchXmlHttpFactory=hn,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,Kw=hi.XhrIo=Ke}).apply(typeof Ip<"u"?Ip:typeof self<"u"?self:typeof window<"u"?window:{});var DS="@firebase/firestore";var bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");var Oc="10.14.0";var wo=new JE("@firebase/firestore");function sc(){return wo.logLevel}function gj(n){wo.setLogLevel(n)}function L(n,...e){if(wo.logLevel<=_r.DEBUG){let t=e.map(rb);wo.debug(`Firestore (${Oc}): ${n}`,...t)}}function ut(n,...e){if(wo.logLevel<=_r.ERROR){let t=e.map(rb);wo.error(`Firestore (${Oc}): ${n}`,...t)}}function gi(n,...e){if(wo.logLevel<=_r.WARN){let t=e.map(rb);wo.warn(`Firestore (${Oc}): ${n}`,...t)}}function rb(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function J(n="Unexpected state"){let e=`FIRESTORE (${Oc}) INTERNAL ASSERTION FAILED: `+n;throw ut(e),new Error(e)}function ie(n,e){n||J()}function Y7(n,e){n||J()}function K(n,e){return n}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends ZE{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Op=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},i_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bt.UNAUTHENTICATED))}shutdown(){}},o_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},s_=class{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ie(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new xt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>F(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ie(typeof r.accessToken=="string"),new Op(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string"),new bt(e)}},a_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},c_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new a_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},u_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},l_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ie(this.o===void 0);let r=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,L("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ie(typeof t.token=="string"),this.R=t.token,new u_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function mj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var kp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=mj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function pe(n,e){return n<e?-1:n>e?1:0}function mc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function xA(n){return n+"\0"}var lt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new B(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ae=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new lt(0,0))}static max(){return new n(new lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Fp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&J(),r===void 0?r=e.length-t:r>e.length-t&&J(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Re=class n extends Fp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},yj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mt=class n extends Fp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return yj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new B(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Re.fromString(e))}static fromName(e){return new n(Re.fromString(e).popFirst(5))}static empty(){return new n(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Re(e.slice()))}};var yc=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function d_(n){return n.fields.find(e=>e.kind===2)}function Ss(n){return n.fields.filter(e=>e.kind!==2)}yc.UNKNOWN_ID=-1;var hc=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Il=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Hn.min())}};function MA(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new lt(t+1,0):new lt(t,r));return new Hn(i,Q.empty(),e)}function RA(n){return new Hn(n.readTime,n.key,-1)}var Hn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ae.min(),Q.empty(),-1)}static max(){return new n(ae.max(),Q.empty(),-1)}};function ib(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:pe(n.largestBatchId,e.largestBatchId))}var NA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Vp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ro(n){return F(this,null,function*(){if(n.code!==V.FAILED_PRECONDITION||n.message!==NA)throw n;L("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(g=>{s[l]=g,++a,a===o&&r(s)},g=>i(g))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Lp=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new xt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ps(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=ob(r.target.error);this.V.reject(new Ps(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Ps(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(L("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new f_(t)}},_o=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(ku())===12.2&&ut("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return L("SimpleDb","Removing database:",e),As(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!QE())return!1;if(n.v())return!0;let e=ku(),t=n.S(e),r=0<t&&t<10,i=PA(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return F(this,null,function*(){return this.db||(L("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Ps(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new B(V.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new B(V.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Ps(e,s))},i.onupgradeneeded=o=>{L("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{L("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return F(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Lp.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),O.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(L("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function PA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var h_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return As(this.B.delete())}},Ps=class extends B{constructor(e,t){super(V.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function No(n){return n.name==="IndexedDbTransactionError"}var f_=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(L("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(L("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),As(r)}add(e){return L("SimpleDb","ADD",this.store.name,e,e),As(this.store.add(e))}get(e){return As(this.store.get(e)).next(t=>(t===void 0&&(t=null),L("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return L("SimpleDb","DELETE",this.store.name,e),As(this.store.delete(e))}count(){return L("SimpleDb","COUNT",this.store.name),As(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new O((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new O((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){L("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new O((r,i)=>{t.onerror=o=>{let s=ob(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new O((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new h_(a),l=t(a.primaryKey,a.value,c);if(l instanceof O){let g=l.catch(p=>(c.done(),O.reject(p)));r.push(g)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>O.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function As(n){return new O((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=ob(r.target.error);t(i)}})}var TS=!1;function ob(n){let e=_o.S(ku());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return TS||(TS=!0,setTimeout(()=>{throw r},0)),r}}return n}var p_=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){L("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>F(this,null,function*(){this.task=null;try{L("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){No(t)?L("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Ro(t)}yield this.X(6e4)}))}},g_=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return F(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return O.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return L("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(L("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=RA(o);ib(s,r)>0&&(r=s)}),new Hn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var xn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function ql(n){return n==null}function Cl(n){return n===0&&1/n==-1/0}function OA(n){return typeof n=="number"&&Number.isInteger(n)&&!Cl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function cn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=SS(e)),e=vj(n.get(t),e);return SS(e)}function vj(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function SS(n){return n+""}function Or(n){let e=n.length;if(ie(e>=2),e===2)return ie(n.charAt(0)===""&&n.charAt(1)===""),Re.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&J(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:J()}o=s+2}return new Re(r)}var AS=["userId","batchId"];function xp(n,e){return[n,cn(e)]}function kA(n,e,t){return[n,cn(e),t]}var wj={},_j=["prefixPath","collectionGroup","readTime","documentId"],bj=["prefixPath","collectionGroup","documentId"],Ej=["collectionGroup","readTime","prefixPath","documentId"],Ij=["canonicalId","targetId"],Cj=["targetId","path"],Dj=["path","targetId"],Tj=["collectionId","parent"],Sj=["indexId","uid"],Aj=["uid","sequenceNumber"],xj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Mj=["indexId","uid","orderedDocumentKey"],Rj=["userId","collectionPath","documentId"],Nj=["userId","collectionPath","largestBatchId"],Pj=["userId","collectionGroup","largestBatchId"],FA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Oj=[...FA,"documentOverlays"],VA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LA=VA,sb=[...LA,"indexConfiguration","indexState","indexEntries"],kj=sb,Fj=[...sb,"globals"];var Dl=class extends Vp{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Rt(n,e){let t=K(n);return _o.F(t._e,e)}function xS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ze=class n{constructor(e,t){this.comparator=e,this.root=t||Fr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dc(this.root,e,this.comparator,!0)}},dc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Fr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();let e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}};Fr.EMPTY=null,Fr.RED=!0,Fr.BLACK=!1;Fr.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Fr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ge=class n{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jp(this.data.getIterator())}getIteratorFrom(e){return new jp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},jp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function nc(n){return n.hasNext()?n.getNext():void 0}var Mn=class n{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ge(Mt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Bp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function X7(){return typeof atob<"u"}var ft=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Bp("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ft.EMPTY_BYTE_STRING=new ft("");var Vj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(n){if(ie(!!n),typeof n=="string"){let e=0,t=Vj.exec(n);if(ie(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(n.seconds),nanos:Xe(n.nanos)}}function Xe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function bo(n){return typeof n=="string"?ft.fromBase64String(n):ft.fromUint8Array(n)}function Rg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ab(n){let e=n.mapValue.fields.__previous_value__;return Rg(e)?ab(e):e}function Tl(n){let e=mi(n.mapValue.fields.__local_write_time__.timestampValue);return new lt(e.seconds,e.nanos)}var m_=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},vc=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var vo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Mp={nullValue:"NULL_VALUE"};function Os(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Rg(n)?4:BA(n)?9007199254740991:Ng(n)?10:11:J()}function jr(n,e){if(n===e)return!0;let t=Os(n);if(t!==Os(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tl(n).isEqual(Tl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=mi(i.timestampValue),a=mi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return bo(i.bytesValue).isEqual(bo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Xe(i.geoPointValue.latitude)===Xe(o.geoPointValue.latitude)&&Xe(i.geoPointValue.longitude)===Xe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Xe(i.integerValue)===Xe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Xe(i.doubleValue),a=Xe(o.doubleValue);return s===a?Cl(s)===Cl(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return mc(n.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(xS(s)!==xS(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!jr(s[c],a[c])))return!1;return!0}(n,e);default:return J()}}function Sl(n,e){return(n.values||[]).find(t=>jr(t,e))!==void 0}function Eo(n,e){if(n===e)return 0;let t=Os(n),r=Os(e);if(t!==r)return pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return pe(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Xe(o.integerValue||o.doubleValue),c=Xe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return MS(n.timestampValue,e.timestampValue);case 4:return MS(Tl(n),Tl(e));case 5:return pe(n.stringValue,e.stringValue);case 6:return function(o,s){let a=bo(o),c=bo(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let g=pe(a[l],c[l]);if(g!==0)return g}return pe(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=pe(Xe(o.latitude),Xe(s.latitude));return a!==0?a:pe(Xe(o.longitude),Xe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return RS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,g;let p=o.fields||{},w=s.fields||{},b=(a=p.value)===null||a===void 0?void 0:a.arrayValue,x=(c=w.value)===null||c===void 0?void 0:c.arrayValue,N=pe(((l=b?.values)===null||l===void 0?void 0:l.length)||0,((g=x?.values)===null||g===void 0?void 0:g.length)||0);return N!==0?N:RS(b,x)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===vo.mapValue&&s===vo.mapValue)return 0;if(o===vo.mapValue)return 1;if(s===vo.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},g=Object.keys(l);c.sort(),g.sort();for(let p=0;p<c.length&&p<g.length;++p){let w=pe(c[p],g[p]);if(w!==0)return w;let b=Eo(a[c[p]],l[g[p]]);if(b!==0)return b}return pe(c.length,g.length)}(n.mapValue,e.mapValue);default:throw J()}}function MS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return pe(n,e);let t=mi(n),r=mi(e),i=pe(t.seconds,r.seconds);return i!==0?i:pe(t.nanos,r.nanos)}function RS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Eo(t[i],r[i]);if(o)return o}return pe(t.length,r.length)}function wc(n){return y_(n)}function y_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=mi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return bo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=y_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${y_(t.fields[s])}`;return i+"}"}(n.mapValue):J()}function ks(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function v_(n){return!!n&&"integerValue"in n}function Al(n){return!!n&&"arrayValue"in n}function NS(n){return!!n&&"nullValue"in n}function PS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rp(n){return!!n&&"mapValue"in n}function Ng(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function vl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Hs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function BA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var UA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Lj(n){return"nullValue"in n?Mp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ks(vc.empty(),Q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ng(n)?UA:{mapValue:{}}:J()}function jj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ks(vc.empty(),Q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?UA:"mapValue"in n?Ng(n)?{mapValue:{}}:vo:J()}function OS(n,e){let t=Eo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kS(n,e){let t=Eo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Jt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vl(t)}setAll(e){let t=Mt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=vl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Rp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Rp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Hs(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(vl(this.value))}};function $A(n){let e=[];return Hs(n.fields,(t,r)=>{let i=new Mt([t]);if(Rp(r)){let o=$A(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Mn(e)}var Et=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ae.min(),ae.min(),ae.min(),Jt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ae.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ae.min(),ae.min(),Jt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ae.min(),ae.min(),Jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Br=class{constructor(e,t){this.position=e,this.inclusive=t}};function FS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Q.comparator(Q.fromName(s.referenceValue),t.key):r=Eo(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function VS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jr(n.position[t],e.position[t]))return!1;return!0}var Fs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Bj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Up=class{},Se=class n extends Up{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new b_(e,t,r):t==="array-contains"?new C_(e,r):t==="in"?new $p(e,r):t==="not-in"?new D_(e,r):t==="array-contains-any"?new T_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new E_(e,r):new I_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Eo(t,this.value)):t!==null&&Os(this.value)===Os(t)&&this.matchesComparison(Eo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$e=class n extends Up{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return _c(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function _c(n){return n.op==="and"}function w_(n){return n.op==="or"}function cb(n){return zA(n)&&_c(n)}function zA(n){for(let e of n.filters)if(e instanceof $e)return!1;return!0}function __(n){if(n instanceof Se)return n.field.canonicalString()+n.op.toString()+wc(n.value);if(cb(n))return n.filters.map(e=>__(e)).join(",");{let e=n.filters.map(t=>__(t)).join(",");return`${n.op}(${e})`}}function HA(n,e){return n instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.field.isEqual(i.field)&&jr(r.value,i.value)}(n,e):n instanceof $e?function(r,i){return i instanceof $e&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&HA(s,i.filters[a]),!0):!1}(n,e):void J()}function qA(n,e){let t=n.filters.concat(e);return $e.create(t,n.op)}function GA(n){return n instanceof Se?function(t){return`${t.field.canonicalString()} ${t.op} ${wc(t.value)}`}(n):n instanceof $e?function(t){return t.op.toString()+" {"+t.getFilters().map(GA).join(" ,")+"}"}(n):"Filter"}var b_=class extends Se{constructor(e,t,r){super(e,t,r),this.key=Q.fromName(r.referenceValue)}matches(e){let t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}},E_=class extends Se{constructor(e,t){super(e,"in",t),this.keys=WA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},I_=class extends Se{constructor(e,t){super(e,"not-in",t),this.keys=WA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function WA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Q.fromName(r.referenceValue))}var C_=class extends Se{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Al(t)&&Sl(t.arrayValue,this.value)}},$p=class extends Se{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Sl(this.value.arrayValue,t)}},D_=class extends Se{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Sl(this.value.arrayValue,t)}},T_=class extends Se{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Al(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Sl(this.value.arrayValue,r))}};var S_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function A_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new S_(n,e,t,r,i,o,s)}function Vs(n){let e=K(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>__(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ql(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wc(r)).join(",")),e.ue=t}return e.ue}function Gl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Bj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!HA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VS(n.startAt,e.startAt)&&VS(n.endAt,e.endAt)}function zp(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Hp(n,e){return n.filters.filter(t=>t instanceof Se&&t.field.isEqual(e))}function LS(n,e,t){let r=Mp,i=!0;for(let o of Hp(n,e)){let s=Mp,a=!0;switch(o.op){case"<":case"<=":s=Lj(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Mp}OS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];OS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function jS(n,e,t){let r=vo,i=!0;for(let o of Hp(n,e)){let s=vo,a=!0;switch(o.op){case">=":case">":s=jj(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=vo}kS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];kS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var ar=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function KA(n,e,t,r,i,o,s,a){return new ar(n,e,t,r,i,o,s,a)}function kc(n){return new ar(n)}function BS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ub(n){return n.collectionGroup!==null}function fc(n){let e=K(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ge(Mt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Fs(o,r))}),t.has(Mt.keyField().canonicalString())||e.ce.push(new Fs(Mt.keyField(),r))}return e.ce}function un(n){let e=K(n);return e.le||(e.le=Uj(e,fc(n))),e.le}function Uj(n,e){if(n.limitType==="F")return A_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Fs(i.field,o)});let t=n.endAt?new Br(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Br(n.startAt.position,n.startAt.inclusive):null;return A_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function x_(n,e){let t=n.filters.concat([e]);return new ar(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qp(n,e,t){return new ar(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wl(n,e){return Gl(un(n),un(e))&&n.limitType===e.limitType}function QA(n){return`${Vs(un(n))}|lt:${n.limitType}`}function ac(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>GA(i)).join(", ")}]`),ql(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>wc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>wc(i)).join(",")),`Target(${r})`}(un(n))}; limitType=${n.limitType})`}function Kl(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of fc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=FS(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,fc(r),i)||r.endAt&&!function(s,a,c){let l=FS(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,fc(r),i))}(n,e)}function ZA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function YA(n){return(e,t)=>{let r=!1;for(let i of fc(n)){let o=$j(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function $j(n,e,t){let r=n.field.isKeyField()?Q.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Eo(c,l):J()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}var Ur=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hs(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return jA(this.inner)}size(){return this.innerSize}};var zj=new Ze(Q.comparator);function vn(){return zj}var JA=new Ze(Q.comparator);function ml(...n){let e=JA;for(let t of n)e=e.insert(t.key,t);return e}function XA(n){let e=JA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function kr(){return wl()}function ex(){return wl()}function wl(){return new Ur(n=>n.toString(),(n,e)=>n.isEqual(e))}var Hj=new Ze(Q.comparator),qj=new Ge(Q.comparator);function ge(...n){let e=qj;for(let t of n)e=e.add(t);return e}var Gj=new Ge(pe);function lb(){return Gj}function db(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cl(e)?"-0":e}}function tx(n){return{integerValue:""+n}}function nx(n,e){return OA(e)?tx(e):db(n,e)}var bc=class{constructor(){this._=void 0}};function Wj(n,e,t){return n instanceof Io?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Rg(o)&&(o=ab(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof yi?ix(n,e):n instanceof vi?ox(n,e):function(i,o){let s=rx(i,o),a=US(s)+US(i.Pe);return v_(s)&&v_(i.Pe)?tx(a):db(i.serializer,a)}(n,e)}function Kj(n,e,t){return n instanceof yi?ix(n,e):n instanceof vi?ox(n,e):t}function rx(n,e){return n instanceof Co?function(r){return v_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Io=class extends bc{},yi=class extends bc{constructor(e){super(),this.elements=e}};function ix(n,e){let t=sx(e);for(let r of n.elements)t.some(i=>jr(i,r))||t.push(r);return{arrayValue:{values:t}}}var vi=class extends bc{constructor(e){super(),this.elements=e}};function ox(n,e){let t=sx(e);for(let r of n.elements)t=t.filter(i=>!jr(i,r));return{arrayValue:{values:t}}}var Co=class extends bc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function US(n){return Xe(n.integerValue||n.doubleValue)}function sx(n){return Al(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Ls=class{constructor(e,t){this.field=e,this.transform=t}};function Qj(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof yi&&i instanceof yi||r instanceof vi&&i instanceof vi?mc(r.elements,i.elements,jr):r instanceof Co&&i instanceof Co?jr(r.Pe,i.Pe):r instanceof Io&&i instanceof Io}(n.transform,e.transform)}var M_=class{constructor(e,t){this.version=e,this.transformResults=t}},ot=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Np(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ec=class{};function ax(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new To(n.key,ot.none()):new Do(n.key,n.data,ot.none());{let t=n.data,r=Jt.empty(),i=new Ge(Mt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new cr(n.key,r,new Mn(i.toArray()),ot.none())}}function Zj(n,e,t){n instanceof Do?function(i,o,s){let a=i.value.clone(),c=zS(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof cr?function(i,o,s){if(!Np(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=zS(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(cx(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function _l(n,e,t,r){return n instanceof Do?function(o,s,a,c){if(!Np(o.precondition,s))return a;let l=o.value.clone(),g=HS(o.fieldTransforms,c,s);return l.setAll(g),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof cr?function(o,s,a,c){if(!Np(o.precondition,s))return a;let l=HS(o.fieldTransforms,c,s),g=s.data;return g.setAll(cx(o)),g.setAll(l),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Np(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function Yj(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=rx(r.transform,i||null);o!=null&&(t===null&&(t=Jt.empty()),t.set(r.field,o))}return t||null}function $S(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&mc(r,i,(o,s)=>Qj(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Do=class extends Ec{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},cr=class extends Ec{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function cx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function zS(n,e,t){let r=new Map;ie(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Kj(s,a,t[i]))}return r}function HS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,Wj(o,s,e))}return r}var To=class extends Ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},xl=class extends Ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ml=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Zj(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=_l(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=_l(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=ex();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=ax(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ge())}isEqual(e){return this.batchId===e.batchId&&mc(this.mutations,e.mutations,(t,r)=>$S(t,r))&&mc(this.baseMutations,e.baseMutations,(t,r)=>$S(t,r))}},R_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ie(e.mutations.length===r.length);let i=function(){return Hj}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Rl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var N_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var wt,Me;function ux(n){switch(n){default:return J();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function lx(n){if(n===void 0)return ut("GRPC error has no .code"),V.UNKNOWN;switch(n){case wt.OK:return V.OK;case wt.CANCELLED:return V.CANCELLED;case wt.UNKNOWN:return V.UNKNOWN;case wt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case wt.INTERNAL:return V.INTERNAL;case wt.UNAVAILABLE:return V.UNAVAILABLE;case wt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case wt.NOT_FOUND:return V.NOT_FOUND;case wt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case wt.ABORTED:return V.ABORTED;case wt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case wt.DATA_LOSS:return V.DATA_LOSS;default:return J()}}(Me=wt||(wt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";var qS=null;function dx(){return new TextEncoder}var Jj=new fo([4294967295,4294967295],0);function GS(n){let e=dx().encode(n),t=new Ww;return t.update(e),new Uint8Array(t.digest())}function WS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new fo([t,r],0),new fo([i,o],0)]}var P_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ns(`Invalid padding: ${t}`);if(r<0)throw new Ns(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ns(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ns(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=fo.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(fo.fromNumber(r)));return i.compare(Jj)===1&&(i=new fo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=GS(e),[r,i]=WS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=GS(e),[r,i]=WS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ns=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Nl=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Pl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ae.min(),i,new Ze(pe),vn(),ge())}},Pl=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ge(),ge(),ge())}};var pc=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Gp=class{constructor(e,t){this.targetId=e,this.me=t}},Wp=class{constructor(e,t,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Kp=class{constructor(){this.fe=0,this.ge=QS(),this.pe=ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),t=ge(),r=ge();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:J()}}),new Pl(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=QS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},O_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=vn(),this.qe=KS(),this.Qe=new Ze(pe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:J()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(zp(o))if(r===0){let s=new Q(o.path);this.Ue(t,s,Et.newNoDocument(s,ae.min()))}else ie(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}qS?.et(function(g,p,w,b,x){var N,M,j,W,H,se;let ce={localCacheCount:g,existenceFilterCount:p.count,databaseId:w.database,projectId:w.projectId},ee=p.unchangedNames;return ee&&(ce.bloomFilter={applied:x===0,hashCount:(N=ee?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(W=(j=(M=ee?.bits)===null||M===void 0?void 0:M.bitmap)===null||j===void 0?void 0:j.length)!==null&&W!==void 0?W:0,padding:(se=(H=ee?.bits)===null||H===void 0?void 0:H.padding)!==null&&se!==void 0?se:0,mightContain:D=>{var E;return(E=b?.mightContain(D))!==null&&E!==void 0&&E}}),ce}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=bo(r).toUint8Array()}catch(c){if(c instanceof Bp)return gi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new P_(s,i,o)}catch(c){return gi(c instanceof Ns?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&zp(a.target)){let c=new Q(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Et.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ge();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Nl(e,t,this.Qe,this.ke,r);return this.ke=vn(),this.qe=KS(),this.Qe=new Ze(pe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Kp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ge(pe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||L("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Kp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function KS(){return new Ze(Q.comparator)}function QS(){return new Ze(Q.comparator)}var Xj={asc:"ASCENDING",desc:"DESCENDING"},eB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tB={and:"AND",or:"OR"},k_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function F_(n,e){return n.useProto3Json||ql(e)?e:{value:e}}function Ic(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nB(n,e){return Ic(n,e.toTimestamp())}function dt(n){return ie(!!n),ae.fromTimestamp(function(t){let r=mi(t);return new lt(r.seconds,r.nanos)}(n))}function hb(n,e){return V_(n,e).canonicalString()}function V_(n,e){let t=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function fx(n){let e=Re.fromString(n);return ie(Ix(e)),e}function Ol(n,e){return hb(n.databaseId,e.path)}function Vr(n,e){let t=fx(e);if(t.get(1)!==n.databaseId.projectId)throw new B(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new B(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(mx(t))}function px(n,e){return hb(n.databaseId,e)}function gx(n){let e=fx(n);return e.length===4?Re.emptyPath():mx(e)}function L_(n){return new Re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function mx(n){return ie(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function ZS(n,e,t){return{name:Ol(n,e),fields:t.value.mapValue.fields}}function yx(n,e,t){let r=Vr(n,e.name),i=dt(e.updateTime),o=e.createTime?dt(e.createTime):ae.min(),s=new Jt({mapValue:{fields:e.fields}}),a=Et.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function rB(n,e){return"found"in e?function(r,i){ie(!!i.found),i.found.name,i.found.updateTime;let o=Vr(r,i.found.name),s=dt(i.found.updateTime),a=i.found.createTime?dt(i.found.createTime):ae.min(),c=new Jt({mapValue:{fields:i.found.fields}});return Et.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){ie(!!i.missing),ie(!!i.readTime);let o=Vr(r,i.missing),s=dt(i.readTime);return Et.newNoDocument(o,s)}(n,e):J()}function iB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,g){return l.useProto3Json?(ie(g===void 0||typeof g=="string"),ft.fromBase64String(g||"")):(ie(g===void 0||g instanceof Buffer||g instanceof Uint8Array),ft.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let g=l.code===void 0?V.UNKNOWN:lx(l.code);return new B(g,l.message||"")}(s);t=new Wp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Vr(n,r.document.name),o=dt(r.document.updateTime),s=r.document.createTime?dt(r.document.createTime):ae.min(),a=new Jt({mapValue:{fields:r.document.fields}}),c=Et.newFoundDocument(i,o,s,a),l=r.targetIds||[],g=r.removedTargetIds||[];t=new pc(l,g,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Vr(n,r.document),o=r.readTime?dt(r.readTime):ae.min(),s=Et.newNoDocument(i,o),a=r.removedTargetIds||[];t=new pc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Vr(n,r.document),o=r.removedTargetIds||[];t=new pc([],o,i,null)}else{if(!("filter"in e))return J();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new N_(i,o),a=r.targetId;t=new Gp(a,s)}}return t}function kl(n,e){let t;if(e instanceof Do)t={update:ZS(n,e.key,e.value)};else if(e instanceof To)t={delete:Ol(n,e.key)};else if(e instanceof cr)t={update:ZS(n,e.key,e.data),updateMask:lB(e.fieldMask)};else{if(!(e instanceof xl))return J();t={verify:Ol(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Io)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof yi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof vi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Co)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw J()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:nB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:J()}(n,e.precondition)),t}function j_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?ot.updateTime(dt(o.updateTime)):o.exists!==void 0?ot.exists(o.exists):ot.none()}(e.currentDocument):ot.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)ie(a.setToServerValue==="REQUEST_TIME"),c=new Io;else if("appendMissingElements"in a){let g=a.appendMissingElements.values||[];c=new yi(g)}else if("removeAllFromArray"in a){let g=a.removeAllFromArray.values||[];c=new vi(g)}else"increment"in a?c=new Co(s,a.increment):J();let l=Mt.fromServerFormat(a.fieldPath);return new Ls(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Vr(n,e.update.name),o=new Jt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Mn(l.map(g=>Mt.fromServerFormat(g)))}(e.updateMask);return new cr(i,o,s,t,r)}return new Do(i,o,t,r)}if(e.delete){let i=Vr(n,e.delete);return new To(i,t)}if(e.verify){let i=Vr(n,e.verify);return new xl(i,t)}return J()}function oB(n,e){return n&&n.length>0?(ie(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?dt(i.updateTime):dt(o);return s.isEqual(ae.min())&&(s=dt(o)),new M_(s,i.transformResults||[])}(t,e))):[]}function vx(n,e){return{documents:[px(n,e.path)]}}function wx(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=px(n,i);let o=function(l){if(l.length!==0)return Ex($e.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(g=>function(w){return{field:cc(w.field),direction:aB(w.dir)}}(g))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=F_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function _x(n){let e=gx(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ie(r===1);let g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(p){let w=bx(p);return w instanceof $e&&cb(w)?w.getFilters():[w]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(w=>function(x){return new Fs(uc(x.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(w))}(t.orderBy));let a=null;t.limit&&(a=function(p){let w;return w=typeof p=="object"?p.value:p,ql(w)?null:w}(t.limit));let c=null;t.startAt&&(c=function(p){let w=!!p.before,b=p.values||[];return new Br(b,w)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let w=!p.before,b=p.values||[];return new Br(b,w)}(t.endAt)),KA(e,i,s,o,a,"F",c,l)}function sB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=uc(t.unaryFilter.field);return Se.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=uc(t.unaryFilter.field);return Se.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=uc(t.unaryFilter.field);return Se.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=uc(t.unaryFilter.field);return Se.create(s,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(n):n.fieldFilter!==void 0?function(t){return Se.create(uc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return $e.create(t.compositeFilter.filters.map(r=>bx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J()}}(t.compositeFilter.op))}(n):J()}function aB(n){return Xj[n]}function cB(n){return eB[n]}function uB(n){return tB[n]}function cc(n){return{fieldPath:n.canonicalString()}}function uc(n){return Mt.fromServerFormat(n.fieldPath)}function Ex(n){return n instanceof Se?function(t){if(t.op==="=="){if(PS(t.value))return{unaryFilter:{field:cc(t.field),op:"IS_NAN"}};if(NS(t.value))return{unaryFilter:{field:cc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(PS(t.value))return{unaryFilter:{field:cc(t.field),op:"IS_NOT_NAN"}};if(NS(t.value))return{unaryFilter:{field:cc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cc(t.field),op:cB(t.op),value:t.value}}}(n):n instanceof $e?function(t){let r=t.getFilters().map(i=>Ex(i));return r.length===1?r[0]:{compositeFilter:{op:uB(t.op),filters:r}}}(n):J()}function lB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ix(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Cc=class n{constructor(e,t,r,i,o=ae.min(),s=ae.min(),a=ft.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Qp=class{constructor(e){this.ct=e}};function dB(n,e){let t;if(e.document)t=yx(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=Q.fromSegments(e.noDocument.path),i=Bs(e.noDocument.readTime);t=Et.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return J();{let r=Q.fromSegments(e.unknownDocument.path),i=Bs(e.unknownDocument.version);t=Et.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new lt(i[0],i[1]);return ae.fromTimestamp(o)}(e.readTime)),t}function YS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Zp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Ol(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ic(o,s.version.toTimestamp()),createTime:Ic(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:js(e.version)};else{if(!e.isUnknownDocument())return J();r.unknownDocument={path:t.path.toArray(),version:js(e.version)}}return r}function Zp(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function js(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bs(n){let e=new lt(n.seconds,n.nanoseconds);return ae.fromTimestamp(e)}function xs(n,e){let t=(e.baseMutations||[]).map(o=>j_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>j_(n.ct,o)),i=lt.fromMillis(e.localWriteTimeMs);return new Ml(e.batchId,i,t,r)}function yl(n){let e=Bs(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Bs(n.lastLimboFreeSnapshotVersion):ae.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return ie(o.documents.length===1),un(kc(gx(o.documents[0])))}(n.query):function(o){return un(_x(o))}(n.query),new Cc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ft.fromBase64String(n.resumeToken))}function Cx(n,e){let t=js(e.snapshotVersion),r=js(e.lastLimboFreeSnapshotVersion),i;i=zp(e.target)?vx(n.ct,e.target):wx(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vs(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function fb(n){let e=_x({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qp(e,e.limit,"L"):e}function Xw(n,e){return new Rl(e.largestBatchId,j_(n.ct,e.overlayMutation))}function JS(n,e){let t=e.path.lastSegment();return[n,cn(e.path.popLast()),t]}function XS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:js(r.readTime),documentKey:cn(r.documentKey.path),largestBatchId:r.largestBatchId}}var B_=class{getBundleMetadata(e,t){return eA(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Bs(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return eA(e).put(function(i){return{bundleId:i.id,createTime:js(dt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return tA(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:fb(o.bundledQuery),readTime:Bs(o.readTime)}}(r)})}saveNamedQuery(e,t){return tA(e).put(function(i){return{name:i.name,readTime:js(dt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function eA(n){return Rt(n,"bundles")}function tA(n){return Rt(n,"namedQueries")}var Yp=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return hl(e).get(JS(this.userId,t)).next(r=>r?Xw(this.serializer,r):null)}getOverlays(e,t){let r=kr();return O.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Rl(t,s);i.push(this.ht(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(cn(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(hl(e).j("collectionPathOverlayIndex",a))}),O.waitFor(o)}getOverlaysForCollection(e,t,r){let i=kr(),o=cn(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return hl(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=Xw(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=kr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hl(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,g)=>{let p=Xw(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):g.done()}).next(()=>o)}ht(e,t){return hl(e).put(function(i,o,s){let[a,c,l]=JS(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:kl(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function hl(n){return Rt(n,"documentOverlays")}var U_=class{Pt(e){return Rt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?ft.fromUint8Array(r):ft.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var fi=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Xe(e.integerValue));else if("doubleValue"in e){let r=Xe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Cl(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=mi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(bo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?BA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ng(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):J()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Xe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};fi.vt=new fi;function hB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function nA(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=hB(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var $_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=nA(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=nA(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},z_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},H_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Ms=class{constructor(){this.jt=new $_,this.Ht=new z_(this.jt),this.Jt=new H_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Rs=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function po(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=rA(n.arrayValue,e.arrayValue),t!==0?t:(t=rA(n.directionalValue,e.directionalValue),t!==0?t:Q.comparator(n.documentKey,e.documentKey)))}function rA(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Jp=class{constructor(e){this.Xt=new Ge((t,r)=>Mt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ie(e.collectionGroup===this.collectionId),this.nn)return!1;let t=d_(e);if(t!==void 0&&!this.sn(t))return!1;let r=Ss(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ge(Mt.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new hc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new hc(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new hc(r.field,r.dir==="asc"?0:1)));return new yc(yc.UNKNOWN_ID,this.collectionId,t,Il.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function Dx(n){var e,t;if(ie(n instanceof Se||n instanceof $e),n instanceof Se){if(n instanceof $p){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>Se.create(n.field,"==",o)))||[];return $e.create(i,"or")}return n}let r=n.filters.map(i=>Dx(i));return $e.create(r,n.op)}function fB(n){if(n.getFilters().length===0)return[];let e=W_(Dx(n));return ie(Tx(e)),q_(e)||G_(e)?[e]:e.getFilters()}function q_(n){return n instanceof Se}function G_(n){return n instanceof $e&&cb(n)}function Tx(n){return q_(n)||G_(n)||function(t){if(t instanceof $e&&w_(t)){for(let r of t.getFilters())if(!q_(r)&&!G_(r))return!1;return!0}return!1}(n)}function W_(n){if(ie(n instanceof Se||n instanceof $e),n instanceof Se)return n;if(n.filters.length===1)return W_(n.filters[0]);let e=n.filters.map(r=>W_(r)),t=$e.create(e,n.op);return t=Xp(t),Tx(t)?t:(ie(t instanceof $e),ie(_c(t)),ie(t.filters.length>1),t.filters.reduce((r,i)=>pb(r,i)))}function pb(n,e){let t;return ie(n instanceof Se||n instanceof $e),ie(e instanceof Se||e instanceof $e),t=n instanceof Se?e instanceof Se?function(i,o){return $e.create([i,o],"and")}(n,e):iA(n,e):e instanceof Se?iA(e,n):function(i,o){if(ie(i.filters.length>0&&o.filters.length>0),_c(i)&&_c(o))return qA(i,o.getFilters());let s=w_(i)?i:o,a=w_(i)?o:i,c=s.filters.map(l=>pb(l,a));return $e.create(c,"or")}(n,e),Xp(t)}function iA(n,e){if(_c(e))return qA(e,n.getFilters());{let t=e.filters.map(r=>pb(n,r));return $e.create(t,"or")}}function Xp(n){if(ie(n instanceof Se||n instanceof $e),n instanceof Se)return n;let e=n.getFilters();if(e.length===1)return Xp(e[0]);if(zA(n))return n;let t=e.map(i=>Xp(i)),r=[];return t.forEach(i=>{i instanceof Se?r.push(i):i instanceof $e&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:$e.create(r,n.op)}var K_=class{constructor(){this.un=new Fl}addToCollectionParentIndex(e,t){return this.un.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(Hn.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},Fl=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ge(Re.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ge(Re.comparator)).toArray()}};var Dp=new Uint8Array(0),Q_=class{constructor(e,t){this.databaseId=t,this.cn=new Fl,this.ln=new Ur(r=>Vs(r),(r,i)=>Gl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:cn(i)};return oA(e).put(o)}return O.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[xA(t),""],!1,!0);return oA(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Or(s.parent))}return r})}addFieldIndex(e,t){let r=fl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=ic(e);return o.next(a=>{s.put(XS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=fl(e),i=ic(e),o=rc(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=fl(e),r=rc(e),i=ic(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return O.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Jp(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=rc(e),i=!0,o=new Map;return O.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ge(),a=[];return O.forEach(o,(c,l)=>{L("IndexedDbIndexManager",`Using index ${function(H){return`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map(se=>`${se.fieldPath}:${se.kind}`).join(",")}`}(c)} to execute ${Vs(t)}`);let g=function(H,se){let ce=d_(se);if(ce===void 0)return null;for(let ee of Hp(H,ce.fieldPath))switch(ee.op){case"array-contains-any":return ee.value.arrayValue.values||[];case"array-contains":return[ee.value]}return null}(l,c),p=function(H,se){let ce=new Map;for(let ee of Ss(se))for(let D of Hp(H,ee.fieldPath))switch(D.op){case"==":case"in":ce.set(ee.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return ce.set(ee.fieldPath.canonicalString(),D.value),Array.from(ce.values())}return null}(l,c),w=function(H,se){let ce=[],ee=!0;for(let D of Ss(se)){let E=D.kind===0?LS(H,D.fieldPath,H.startAt):jS(H,D.fieldPath,H.startAt);ce.push(E.value),ee&&(ee=E.inclusive)}return new Br(ce,ee)}(l,c),b=function(H,se){let ce=[],ee=!0;for(let D of Ss(se)){let E=D.kind===0?jS(H,D.fieldPath,H.endAt):LS(H,D.fieldPath,H.endAt);ce.push(E.value),ee&&(ee=E.inclusive)}return new Br(ce,ee)}(l,c),x=this.In(c,l,w),N=this.In(c,l,b),M=this.Tn(c,l,p),j=this.En(c.indexId,g,x,w.inclusive,N,b.inclusive,M);return O.forEach(j,W=>r.G(W,t.limit).next(H=>{H.forEach(se=>{let ce=Q.fromSegments(se.documentKey);s.has(ce)||(s=s.add(ce),a.push(ce))})}))}).next(()=>a)}return O.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=fB($e.create(e.filters,"and")).map(r=>A_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),g=[];for(let p=0;p<c;++p){let w=t?this.dn(t[p/l]):Dp,b=this.An(e,w,r[p%l],i),x=this.Rn(e,w,o[p%l],s),N=a.map(M=>this.An(e,w,M,!0));g.push(...this.createRange(b,x,N))}return g}An(e,t,r,i){let o=new Rs(e,Q.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Rs(e,Q.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Jp(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return O.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Ge(Mt.comparator),g=!1;for(let p of c.filters)for(let w of p.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?g=!0:l=l.add(w.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(g?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Ms;for(let i of Ss(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);fi.vt.It(o,s)}return r.zt()}dn(e){let t=new Ms;return fi.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Ms;return fi.vt.It(ks(this.databaseId,t),r.Yt(function(o){let s=Ss(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Ms);let o=0;for(let s of Ss(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&Al(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);fi.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Ms;c.seed(a.zt()),fi.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof Se&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=fl(e),i=ic(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return O.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(g,p){let w=p?new Il(p.sequenceNumber,new Hn(Bs(p.readTime),new Q(Or(p.documentKey)),p.largestBatchId)):Il.empty(),b=g.fields.map(([x,N])=>new hc(Mt.fromServerFormat(x),N));return new yc(g.indexId,g.collectionGroup,b,w)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:pe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=fl(e),o=ic(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>O.forEach(a,c=>o.put(XS(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return O.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?O.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,c=>this.wn(e,i,c).next(l=>{let g=this.Sn(o,c);return l.isEqual(g)?O.resolve():this.bn(e,o,c,l,g)}))))})}Dn(e,t,r,i){return rc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return rc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=rc(e),o=new Ge(po);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Rs(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ge(po),i=this.Vn(t,e);if(i==null)return r;let o=d_(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Al(s))for(let a of s.arrayValue.values||[])r=r.add(new Rs(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Rs(t.indexId,e.key,Dp,i));return r}bn(e,t,r,i,o){L("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,g,p,w){let b=c.getIterator(),x=l.getIterator(),N=nc(b),M=nc(x);for(;N||M;){let j=!1,W=!1;if(N&&M){let H=g(N,M);H<0?W=!0:H>0&&(j=!0)}else N!=null?W=!0:j=!0;j?(p(M),M=nc(x)):W?(w(N),N=nc(b)):(N=nc(b),M=nc(x))}}(i,o,po,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),O.waitFor(s)}yn(e){let t=1;return ic(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>po(s,a)).filter((s,a,c)=>!a||po(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=po(s,e),c=po(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Dp,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Dp,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return po(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(sA)}getMinOffset(e,t){return O.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||J())).next(sA)}};function oA(n){return Rt(n,"collectionParents")}function rc(n){return Rt(n,"indexEntries")}function fl(n){return Rt(n,"indexConfiguration")}function ic(n){return Rt(n,"indexState")}function sA(n){ie(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;ib(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Hn(e.readTime,e.documentKey,t)}var aA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Sx(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(g,p,w)=>(a++,w.delete()));o.push(c.next(()=>{ie(a===1)}));let l=[];for(let g of t.mutations){let p=kA(e,g.key.path,t.batchId);o.push(i.delete(p)),l.push(g.key)}return O.waitFor(o).next(()=>l)}function eg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw J();e=n.noDocument}return JSON.stringify(e).length}zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(41943040,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);var tg=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){ie(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return go(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=lc(e),s=go(e);return s.add({}).next(a=>{ie(typeof a=="number");let c=new Ml(a,t,r,i),l=function(b,x,N){let M=N.baseMutations.map(W=>kl(b.ct,W)),j=N.mutations.map(W=>kl(b.ct,W));return{userId:x,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:M,mutations:j}}(this.serializer,this.userId,c),g=[],p=new Ge((w,b)=>pe(w.canonicalString(),b.canonicalString()));for(let w of i){let b=kA(this.userId,w.key.path,a);p=p.add(w.key.path.popLast()),g.push(s.put(l)),g.push(o.put(b,wj))}return p.forEach(w=>{g.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),O.waitFor(g).next(()=>c)})}lookupMutationBatch(e,t){return go(e).get(t).next(r=>r?(ie(r.userId===this.userId),xs(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?O.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return go(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(ie(a.batchId>=r),o=xs(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return go(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return go(e).U("userMutationsIndex",t).next(r=>r.map(i=>xs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=xp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return lc(e).J({range:i},(s,a,c)=>{let[l,g,p]=s,w=Or(g);if(l===this.userId&&t.path.isEqual(w))return go(e).get(p).next(b=>{if(!b)throw J();ie(b.userId===this.userId),o.push(xs(this.serializer,b))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(pe),i=[];return t.forEach(o=>{let s=xp(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=lc(e).J({range:a},(l,g,p)=>{let[w,b,x]=l,N=Or(b);w===this.userId&&o.path.isEqual(N)?r=r.add(x):p.done()});i.push(c)}),O.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=xp(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ge(pe);return lc(e).J({range:s},(c,l,g)=>{let[p,w,b]=c,x=Or(w);p===this.userId&&r.isPrefixOf(x)?x.length===i&&(a=a.add(b)):g.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(go(e).get(o).next(s=>{if(s===null)throw J();ie(s.userId===this.userId),r.push(xs(this.serializer,s))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Sx(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return O.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return lc(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Or(o[1]);i.push(c)}else a.done()}).next(()=>{ie(i.length===0)})})}containsKey(e,t){return Ax(e,this.userId,t)}Nn(e){return xx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Ax(n,e,t){let r=xp(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return lc(n).J({range:o,H:!0},(a,c,l)=>{let[g,p,w]=a;g===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function go(n){return Rt(n,"mutations")}function lc(n){return Rt(n,"documentMutations")}function xx(n){return Rt(n,"mutationQueues")}var Dc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Z_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Dc(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ae.fromTimestamp(new lt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>oc(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(ie(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return oc(e).J((s,a)=>{let c=yl(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>O.waitFor(o)).next(()=>i)}forEachTarget(e,t){return oc(e).J((r,i)=>{let o=yl(i);t(o)})}qn(e){return cA(e).get("targetGlobalKey").next(t=>(ie(t!==null),t))}Qn(e,t){return cA(e).put("targetGlobalKey",t)}Kn(e,t){return oc(e).put(Cx(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Vs(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return oc(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=yl(a);Gl(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=mo(e);return t.forEach(s=>{let a=cn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),O.waitFor(i)}removeMatchingKeys(e,t,r){let i=mo(e);return O.forEach(t,o=>{let s=cn(o.path);return O.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=mo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=mo(e),o=ge();return i.J({range:r,H:!0},(s,a,c)=>{let l=Or(s[1]),g=new Q(l);o=o.add(g)}).next(()=>o)}containsKey(e,t){let r=cn(t.path),i=IDBKeyRange.bound([r],[xA(r)],!1,!0),o=0;return mo(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return oc(e).get(t).next(r=>r?yl(r):null)}};function oc(n){return Rt(n,"targets")}function cA(n){return Rt(n,"targetGlobal")}function mo(n){return Rt(n,"targetDocuments")}function uA([n,e],[t,r]){let i=pe(n,t);return i===0?pe(e,r):i}var Y_=class{constructor(e){this.Un=e,this.buffer=new Ge(uA),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();uA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},J_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){L("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>F(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){No(t)?L("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Ro(t)}yield this.Hn(3e5)}))}},X_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return O.resolve(xn.oe);let r=new Y_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(aA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aA):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),sc()<=_r.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-g}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-g}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function pB(n,e){return new X_(n,e)}var e0=class{constructor(e,t){this.db=e,this.garbageCollector=pB(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Tp(e,r)}removeReference(e,t,r){return Tp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Tp(e,t)}nr(e,t){return function(i,o){let s=!1;return xx(i).Y(a=>Ax(i,a,o).next(c=>(c&&(s=!0),O.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ae.min()),mo(e).delete(function(p){return[0,cn(p.path)]}(s))))});i.push(c)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Tp(e,t)}tr(e,t){let r=mo(e),i,o=xn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==xn.oe&&t(new Q(Or(i)),o),o=l,i=c):o=xn.oe}).next(()=>{o!==xn.oe&&t(new Q(Or(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Tp(n,e){return mo(n).put(function(r,i){return{targetId:0,path:cn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var ng=class{constructor(){this.changes=new Ur(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var t0=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ts(e).put(r)}removeEntry(e,t,r){return Ts(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Zp(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Et.newInvalidDocument(t);return Ts(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(pl(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:Et.newInvalidDocument(t)};return Ts(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(pl(t))},(i,o)=>{r={document:this.ir(t,o),size:eg(o)}}).next(()=>r)}getEntries(e,t){let r=vn();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=vn(),i=new Ze(Q.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,eg(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return O.resolve();let i=new Ge(hA);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(pl(i.first()),pl(i.last())),s=i.getIterator(),a=s.getNext();return Ts(e).J({index:"documentKeyIndex",range:o},(c,l,g)=>{let p=Q.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&hA(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?g.$(pl(a)):g.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Zp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ts(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let g=vn();for(let p of l){let w=this.ir(Q.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);w.isFoundDocument()&&(Kl(t,w)||i.has(w.key))&&(g=g.insert(w.key,w))}return g})}getAllFromCollectionGroup(e,t,r,i){let o=vn(),s=dA(t,r),a=dA(t,Hn.max());return Ts(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,g)=>{let p=this.ir(Q.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&g.done()}).next(()=>o)}newChangeBuffer(e){return new n0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return lA(e).get("remoteDocumentGlobalKey").next(t=>(ie(!!t),t))}rr(e,t){return lA(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=dB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return Et.newInvalidDocument(e)}};function Mx(n){return new t0(n)}var n0=class extends ng{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Ur(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ge((o,s)=>pe(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=YS(this.cr.serializer,s);i=i.add(o.path.popLast());let l=eg(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=YS(this.cr.serializer,s.convertToNoDocument(ae.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),O.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function lA(n){return Rt(n,"remoteDocumentGlobal")}function Ts(n){return Rt(n,"remoteDocumentsV14")}function pl(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function dA(n,e){let t=e.documentKey.path.toArray();return[n,Zp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function hA(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=pe(t[o],r[o]),i)return i;return i=pe(t.length,r.length),i||(i=pe(t[t.length-2],r[r.length-2]),i||pe(t[t.length-1],r[r.length-1]))}var r0=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var rg=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&_l(r.mutation,i,Mn.empty(),lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ge()){let i=kr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ml();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=kr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ge()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=vn(),s=wl(),a=function(){return wl()}();return t.forEach((c,l)=>{let g=r.get(l.key);i.has(l.key)&&(g===void 0||g.mutation instanceof cr)?o=o.insert(l.key,l):g!==void 0?(s.set(l.key,g.mutation.getFieldMask()),_l(g.mutation,l,g.mutation.getFieldMask(),lt.now())):s.set(l.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,g)=>s.set(l,g)),t.forEach((l,g)=>{var p;return a.set(l,new r0(g,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=wl(),i=new Ze((s,a)=>s-a),o=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let g=r.get(c)||Mn.empty();g=a.applyToLocalView(l,g),r.set(c,g);let p=(i.get(a.batchId)||ge()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,g=c.value,p=ex();g.forEach(w=>{if(!o.has(w)){let b=ax(t.get(w),r.get(w));b!==null&&p.set(w,b),o=o.add(w)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ub(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):O.resolve(kr()),a=-1,c=o;return s.next(l=>O.forEach(l,(g,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(g)?O.resolve():this.remoteDocumentCache.getEntry(e,g).next(w=>{c=c.insert(g,w)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ge())).next(g=>({batchId:a,changes:XA(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(r=>{let i=ml();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ml();return this.indexManager.getCollectionParents(e,o).next(a=>O.forEach(a,c=>{let l=function(p,w){return new ar(w,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(g=>{g.forEach((p,w)=>{s=s.insert(p,w)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let g=l.getKey();s.get(g)===null&&(s=s.insert(g,Et.newInvalidDocument(g)))});let a=ml();return s.forEach((c,l)=>{let g=o.get(c);g!==void 0&&_l(g.mutation,l,Mn.empty(),lt.now()),Kl(t,l)&&(a=a.insert(c,l))}),a})}};var i0=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return O.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:dt(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:fb(i.bundledQuery),readTime:dt(i.readTime)}}(t)),O.resolve()}};var o0=class{constructor(){this.overlays=new Ze(Q.comparator),this.Ir=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=kr();return O.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=kr(),o=t.length+1,s=new Q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ze((l,g)=>l-g),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let g=o.get(l.largestBatchId);g===null&&(g=kr(),o=o.insert(l.largestBatchId,g)),g.set(l.getKey(),l)}}let a=kr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,g)=>a.set(l,g)),!(a.size()>=i)););return O.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Rl(t,r));let o=this.Ir.get(t);o===void 0&&(o=ge(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var s0=class{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var Vl=class{constructor(){this.Tr=new Ge(_t.Er),this.dr=new Ge(_t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new _t(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new _t(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new Q(new Re([])),r=new _t(t,e),i=new _t(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Q(new Re([])),r=new _t(t,e),i=new _t(t,e+1),o=ge();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new _t(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},_t=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Q.comparator(e.key,t.key)||pe(e.wr,t.wr)}static Ar(e,t){return pe(e.wr,t.wr)||Q.comparator(e.key,t.key)}};var a0=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ge(_t.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ml(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new _t(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,t){return O.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new _t(t,0),i=new _t(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(pe);return t.forEach(i=>{let o=new _t(i,0),s=new _t(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Q.isDocumentKey(o)||(o=o.child(""));let s=new _t(new Q(o),0),a=new Ge(pe);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),O.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ie(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(t.mutations,i=>{let o=new _t(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new _t(t,0),i=this.br.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var c0=class{constructor(e){this.Mr=e,this.docs=function(){return new Ze(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(t))}getEntries(e,t){let r=vn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Et.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=vn(),s=t.path,a=new Q(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:g}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||ib(RA(g),r)<=0||(i.has(g.key)||Kl(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,t,r,i){J()}Or(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new u0(this)}getSize(e){return O.resolve(this.size)}},u0=class extends ng{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var l0=class{constructor(e){this.persistence=e,this.Nr=new Ur(t=>Vs(t),Gl),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Vl,this.targetCount=0,this.kr=Dc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),O.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Dc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Kn(t),O.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.Br.containsKey(t))}};var ig=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new xn(0),this.Kr=!1,this.Kr=!0,this.$r=new s0,this.referenceDelegate=e(this),this.Ur=new l0(this),this.indexManager=new K_,this.remoteDocumentCache=function(i){return new c0(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Qp(t),this.Gr=new i0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new o0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new a0(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){L("MemoryPersistence","Starting transaction:",e);let i=new d0(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},d0=class extends Vp{constructor(e){super(),this.currentSequenceNumber=e}},og=class n{constructor(e){this.persistence=e,this.Jr=new Vl,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),O.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=Q.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ae.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return O.or([()=>O.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var h0=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Lp("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AS,{unique:!0}),c.createObjectStore("documentMutations")}(e),fA(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=O.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),fA(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",g)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(g=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AS,{unique:!0});let p=l.store("mutations"),w=g.map(b=>p.put(b));return O.waitFor(w)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:Rj});l.createIndex("collectionPathOverlayIndex",Nj,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Pj,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:_j});l.createIndex("documentKeyIndex",bj),l.createIndex("collectionGroupIndex",Ej)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Sj}).createIndex("sequenceNumberIndex",Aj,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:xj}).createIndex("documentKeyIndex",Mj,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=eg(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>O.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>O.forEach(a,c=>{ie(c.userId===o.userId);let l=xs(this.serializer,c);return Sx(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new Re(s),l=function(p){return[0,cn(p)]}(c);o.push(t.get(l).next(g=>g?O.resolve():(p=>t.put({targetId:0,path:cn(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>O.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Tj});let r=t.store("collectionParents"),i=new Fl,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:cn(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new Re(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let g=Or(a);return o(g.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=yl(i),s=Cx(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new Q(Re.fromString(p.document.name).popFirst(5)):p.noDocument?Q.fromSegments(p.noDocument.path):p.unknownDocument?Q.fromSegments(p.unknownDocument.path):J()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>O.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=Mx(this.serializer),o=new ig(og.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let g=(l=a.get(c.userId))!==null&&l!==void 0?l:ge();xs(this.serializer,c).keys().forEach(p=>g=g.add(p)),a.set(c.userId,g)}),O.forEach(a,(c,l)=>{let g=new bt(l),p=Yp.lt(this.serializer,g),w=o.getIndexManager(g),b=tg.lt(g,this.serializer,w,o.referenceDelegate);return new rg(i,b,p,w).recalculateAndSaveOverlaysForDocumentKeys(new Dl(t,xn.oe),c).next()})})}};function fA(n){n.createObjectStore("targetDocuments",{keyPath:Cj}).createIndex("documentTargetsIndex",Dj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ij,{unique:!0}),n.createObjectStore("targetGlobal")}var e_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",f0=class n{constructor(e,t,r,i,o,s,a,c,l,g,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=g,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=w=>Promise.resolve(),!n.D())throw new B(V.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new e0(this,i),this.Ai=t+"main",this.serializer=new Qp(c),this.Ri=new _o(this.Ai,this.hi,new h0(this.serializer)),this.$r=new U_,this.Ur=new Z_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Mx(this.serializer),this.Gr=new B_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,g===!1&&ut("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(V.FAILED_PRECONDITION,e_);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new xn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>F(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>F(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>F(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(No(e))return L("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return L("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return gl(e).get("owner").next(t=>O.resolve(this.vi(t)))}Ci(e){return Sp(e).delete(this.clientId)}Fi(){return F(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Rt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return O.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?O.resolve(!0):gl(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new B(V.FAILED_PRECONDITION,e_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sp(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&L("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return F(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Dl(e,xn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Sp(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return tg.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Q_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Yp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){L("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?Fj:c===16?kj:c===15?sb:c===14?LA:c===13?VA:c===12?Oj:c===11?FA:void J()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Dl(a,this.Qr?this.Qr.next():xn.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw ut(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new B(V.FAILED_PRECONDITION,NA);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return gl(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new B(V.FAILED_PRECONDITION,e_)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gl(e).put("owner",t)}static D(){return _o.D()}bi(e){let t=gl(e);return t.get("owner").next(r=>this.vi(r)?(L("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):O.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ut(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Ym()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return L("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ut("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ut("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function gl(n){return Rt(n,"owner")}function Sp(n){return Rt(n,"clientMetadata")}function gb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var p0=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ge(),i=ge();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var g0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var sg=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ym()?8:PA(ku())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new g0;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(sc()<=_r.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",ac(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(sc()<=_r.DEBUG&&L("QueryEngine","Query:",ac(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(sc()<=_r.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",ac(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,un(t))):O.resolve())}Yi(e,t){if(BS(t))return O.resolve(null);let r=un(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=qp(t,null,"F"),r=un(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ge(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,qp(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return BS(t)||i.isEqual(ae.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?O.resolve(null):(sc()<=_r.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ac(t)),this.rs(e,s,t,MA(i,-1)).next(a=>a))})}ts(e,t){let r=new Ge(YA(e));return t.forEach((i,o)=>{Kl(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return sc()<=_r.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",ac(t)),this.Ji.getDocumentsMatchingQuery(e,t,Hn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var m0=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ze(pe),this._s=new Ur(o=>Vs(o),Gl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rg(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Rx(n,e,t,r){return new m0(n,e,t,r)}function Nx(n,e){return F(this,null,function*(){let t=K(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ge();for(let l of i){s.push(l.batchId);for(let g of l.mutations)c=c.add(g.key)}for(let l of o){a.push(l.batchId);for(let g of l.mutations)c=c.add(g.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function gB(n,e){let t=K(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,g){let p=l.batch,w=p.keys(),b=O.resolve();return w.forEach(x=>{b=b.next(()=>g.getEntry(c,x)).next(N=>{let M=l.docVersions.get(x);ie(M!==null),N.version.compareTo(M)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),g.addEntry(N)))})}),b.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ge();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Px(n){let e=K(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function mB(n,e){let t=K(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((g,p)=>{let w=i.get(p);if(!w)return;a.push(t.Ur.removeMatchingKeys(o,g.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,g.addedDocuments,p)));let b=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(ft.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),i=i.insert(p,b),function(N,M,j){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(w,b,g)&&a.push(t.Ur.updateTargetData(o,b))});let c=vn(),l=ge();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),a.push(Ox(o,s,e.documentUpdates).next(g=>{c=g.Ps,l=g.Is})),!r.isEqual(ae.min())){let g=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(g)}return O.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function Ox(n,e,t){let r=ge(),i=ge();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=vn();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ae.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function yB(n,e){let t=K(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Tc(n,e){let t=K(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Cc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Sc(n,e,t){return F(this,null,function*(){let r=K(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!No(s))throw s;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function ag(n,e,t){let r=K(n),i=ae.min(),o=ge();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,g){let p=K(c),w=p._s.get(g);return w!==void 0?O.resolve(p.os.get(w)):p.Ur.getTargetData(l,g)}(r,s,un(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ae.min(),t?o:ge())).next(a=>(Vx(r,ZA(e),a),{documents:a,Ts:o})))}function kx(n,e){let t=K(n),r=K(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function Fx(n,e){let t=K(n),r=t.us.get(e)||ae.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,MA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Vx(t,e,i),i))}function Vx(n,e,t){let r=n.us.get(e)||ae.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function vB(n,e,t,r){return F(this,null,function*(){let i=K(n),o=ge(),s=vn();for(let l of t){let g=e.Es(l.metadata.name);l.document&&(o=o.add(g));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(g,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield Tc(i,function(g){return un(kc(Re.fromString(`__bundle__/docs/${g}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>Ox(l,a,s).next(g=>(a.apply(l),g)).next(g=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,g.Ps,g.Is)).next(()=>g.Ps)))})}function wB(r,i){return F(this,arguments,function*(n,e,t=ge()){let o=yield Tc(n,un(fb(e.bundledQuery))),s=K(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=dt(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(ft.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function pA(n,e){return`firestore_clients_${n}_${e}`}function gA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function t_(n,e){return`firestore_targets_${n}_${e}`}var cg=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new B(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(ut("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},bl=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new B(r.error.code,r.error.message))),o?new n(e,r.state,i):(ut("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ug=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=lb();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=OA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(ut("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},y0=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ut("SharedClientState",`Failed to parse online state: ${e}`),null)}},Ll=class{constructor(){this.activeTargetIds=lb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},El=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ze(pe),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=pA(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Ll),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return F(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(pA(this.persistenceKey,r));if(i){let o=ug.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(t_(this.persistenceKey,e));if(i){let o=bl.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(t_(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return L("SharedClientState","READ",e,t),t}setItem(e,t){L("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){L("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(L("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void ut("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>F(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=xn.oe;if(o!=null)try{let a=JSON.parse(o);ie(typeof a=="number"),s=a}catch(a){ut("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==xn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new cg(this.currentUser,e,t,r),o=gA(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=gA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=t_(this.persistenceKey,e),o=new bl(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return ug.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return cg.Rs(new bt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return bl.Rs(i,t)}Ls(e){return y0.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return F(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);L("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=lb();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},lg=class{constructor(){this.so=new Ll,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ll,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var v0=class{_o(e){}shutdown(){}};var dg=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ap=null;function n_(){return Ap===null?Ap=function(){return 268435456+Math.round(2147483648*Math.random())}():Ap++,"0x"+Ap.toString(16)}var _B={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var w0=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Yt="WebChannelConnection",_0=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=n_(),c=this.xo(t,r.toUriEncodedString());L("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(g=>(L("RestConnection",`Received RPC '${t}' ${a}: `,g),g),g=>{throw gi("RestConnection",`RPC '${t}' ${a} failed with error: `,g,"url: ",c,"request:",i),g})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=_B[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=n_();return new Promise((s,a)=>{let c=new Kw;c.setWithCredentials(!0),c.listenOnce(Qw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case dl.NO_ERROR:let g=c.getResponseJson();L(Yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),s(g);break;case dl.TIMEOUT:L(Yt,`RPC '${e}' ${o} timed out`),a(new B(V.DEADLINE_EXCEEDED,"Request time out"));break;case dl.HTTP_ERROR:let p=c.getStatus();if(L(Yt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let w=c.getResponseJson();Array.isArray(w)&&(w=w[0]);let b=w?.error;if(b&&b.status&&b.message){let x=function(M){let j=M.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(j)>=0?j:V.UNKNOWN}(b.status);a(new B(x,b.message))}else a(new B(V.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new B(V.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{L(Yt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);L(Yt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=n_(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Jw(),a=Yw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let g=o.join("");L(Yt,`Creating RPC '${e}' stream ${i}: ${g}`,c);let p=s.createWebChannel(g,c),w=!1,b=!1,x=new w0({Io:M=>{b?L(Yt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(w||(L(Yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),w=!0),L(Yt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},To:()=>p.close()}),N=(M,j,W)=>{M.listen(j,H=>{try{W(H)}catch(se){setTimeout(()=>{throw se},0)}})};return N(p,tc.EventType.OPEN,()=>{b||(L(Yt,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),N(p,tc.EventType.CLOSE,()=>{b||(b=!0,L(Yt,`RPC '${e}' stream ${i} transport closed`),x.So())}),N(p,tc.EventType.ERROR,M=>{b||(b=!0,gi(Yt,`RPC '${e}' stream ${i} transport errored:`,M),x.So(new B(V.UNAVAILABLE,"The operation could not be completed")))}),N(p,tc.EventType.MESSAGE,M=>{var j;if(!b){let W=M.data[0];ie(!!W);let H=W,se=H.error||((j=H[0])===null||j===void 0?void 0:j.error);if(se){L(Yt,`RPC '${e}' stream ${i} received error:`,se);let ce=se.status,ee=function(I){let T=wt[I];if(T!==void 0)return lx(T)}(ce),D=se.message;ee===void 0&&(ee=V.INTERNAL,D="Unknown error status: "+ce+" with message "+se.message),b=!0,x.So(new B(ee,D)),p.close()}else L(Yt,`RPC '${e}' stream ${i} received:`,W),x.bo(W)}}),N(a,Zw.STAT_EVENT,M=>{M.stat===Cp.PROXY?L(Yt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Cp.NOPROXY&&L(Yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}};function Lx(){return typeof window<"u"?window:null}function Pp(){return typeof document<"u"?document:null}function Ql(n){return new k_(n,!0)}var jl=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var hg=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new jl(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return F(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return F(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return F(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(ut(t.toString()),ut("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new B(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>F(this,null,function*(){this.state=0,this.start()}))}I_(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},b0=class extends hg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=iB(this.serializer,e),r=function(o){if(!("targetChange"in o))return ae.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ae.min():s.readTime?dt(s.readTime):ae.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=L_(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=zp(c)?{documents:vx(o,c)}:{query:wx(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=hx(o,s.resumeToken);let l=F_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ae.min())>0){a.readTime=Ic(o,s.snapshotVersion.toTimestamp());let l=F_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=sB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=L_(this.serializer),t.removeTarget=e,this.a_(t)}},E0=class extends hg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ie(!!e.streamToken),this.lastStreamToken=e.streamToken,ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=oB(e.writeResults,e.commitTime),r=dt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=L_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>kl(this.serializer,r))};this.a_(t)}};var I0=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new B(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,V_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(V.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,V_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(V.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},C0=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ut(t),this.D_=!1):L("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var D0=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>F(this,null,function*(){Po(this)&&(L("RemoteStore","Restarting streams for network reachability change."),yield function(c){return F(this,null,function*(){let l=K(c);l.L_.add(4),yield Fc(l),l.q_.set("Unknown"),l.L_.delete(4),yield Zl(l)})}(this))}))}),this.q_=new C0(r,i)}};function Zl(n){return F(this,null,function*(){if(Po(n))for(let e of n.B_)yield e(!0)})}function Fc(n){return F(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Pg(n,e){let t=K(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),vb(t)?yb(t):Lc(t).r_()&&mb(t,e))}function Ac(n,e){let t=K(n),r=Lc(t);t.N_.delete(e),r.r_()&&jx(t,e),t.N_.size===0&&(r.r_()?r.o_():Po(t)&&t.q_.set("Unknown"))}function mb(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Lc(n).A_(e)}function jx(n,e){n.Q_.xe(e),Lc(n).R_(e)}function yb(n){n.Q_=new O_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Lc(n).start(),n.q_.v_()}function vb(n){return Po(n)&&!Lc(n).n_()&&n.N_.size>0}function Po(n){return K(n).L_.size===0}function Bx(n){n.Q_=void 0}function bB(n){return F(this,null,function*(){n.q_.set("Online")})}function EB(n){return F(this,null,function*(){n.N_.forEach((e,t)=>{mb(n,e)})})}function IB(n,e){return F(this,null,function*(){Bx(n),vb(n)?(n.q_.M_(e),yb(n)):n.q_.set("Unknown")})}function CB(n,e,t){return F(this,null,function*(){if(n.q_.set("Online"),e instanceof Wp&&e.state===2&&e.cause)try{yield function(i,o){return F(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fg(n,r)}else if(e instanceof pc?n.Q_.Ke(e):e instanceof Gp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ae.min()))try{let r=yield Px(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let g=o.N_.get(l);g&&o.N_.set(l,g.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let g=o.N_.get(c);if(!g)return;o.N_.set(c,g.withResumeToken(ft.EMPTY_BYTE_STRING,g.snapshotVersion)),jx(o,c);let p=new Cc(g.target,c,l,g.sequenceNumber);mb(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){L("RemoteStore","Failed to raise snapshot:",r),yield fg(n,r)}})}function fg(n,e,t){return F(this,null,function*(){if(!No(e))throw e;n.L_.add(1),yield Fc(n),n.q_.set("Offline"),t||(t=()=>Px(n.localStore)),n.asyncQueue.enqueueRetryable(()=>F(this,null,function*(){L("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Zl(n)}))})}function Ux(n,e){return e().catch(t=>fg(n,t,e))}function Vc(n){return F(this,null,function*(){let e=K(n),t=So(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;DB(e);)try{let i=yield yB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,TB(e,i)}catch(i){yield fg(e,i)}$x(e)&&zx(e)})}function DB(n){return Po(n)&&n.O_.length<10}function TB(n,e){n.O_.push(e);let t=So(n);t.r_()&&t.V_&&t.m_(e.mutations)}function $x(n){return Po(n)&&!So(n).n_()&&n.O_.length>0}function zx(n){So(n).start()}function SB(n){return F(this,null,function*(){So(n).p_()})}function AB(n){return F(this,null,function*(){let e=So(n);for(let t of n.O_)e.m_(t.mutations)})}function xB(n,e,t){return F(this,null,function*(){let r=n.O_.shift(),i=R_.from(r,e,t);yield Ux(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Vc(n)})}function MB(n,e){return F(this,null,function*(){e&&So(n).V_&&(yield function(r,i){return F(this,null,function*(){if(function(s){return ux(s)&&s!==V.ABORTED}(i.code)){let o=r.O_.shift();So(r).s_(),yield Ux(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Vc(r)}})}(n,e)),$x(n)&&zx(n)})}function mA(n,e){return F(this,null,function*(){let t=K(n);t.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");let r=Po(t);t.L_.add(3),yield Fc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Zl(t)})}function T0(n,e){return F(this,null,function*(){let t=K(n);e?(t.L_.delete(2),yield Zl(t)):e||(t.L_.add(2),yield Fc(t),t.q_.set("Unknown"))})}function Lc(n){return n.K_||(n.K_=function(t,r,i){let o=K(t);return o.w_(),new b0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:bB.bind(null,n),Ro:EB.bind(null,n),mo:IB.bind(null,n),d_:CB.bind(null,n)}),n.B_.push(e=>F(this,null,function*(){e?(n.K_.s_(),vb(n)?yb(n):n.q_.set("Unknown")):(yield n.K_.stop(),Bx(n))}))),n.K_}function So(n){return n.U_||(n.U_=function(t,r,i){let o=K(t);return o.w_(),new E0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:SB.bind(null,n),mo:MB.bind(null,n),f_:AB.bind(null,n),g_:xB.bind(null,n)}),n.B_.push(e=>F(this,null,function*(){e?(n.U_.s_(),yield Vc(n)):(yield n.U_.stop(),n.O_.length>0&&(L("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var S0=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function jc(n,e){if(ut("AsyncQueue",`${e}: ${n}`),No(n))return new B(V.UNAVAILABLE,`${e}: ${n}`);throw n}var pg=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Q.comparator(t.key,r.key):(t,r)=>Q.comparator(t.key,r.key),this.keyedMap=ml(),this.sortedSet=new Ze(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var gg=class{constructor(){this.W_=new Ze(Q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},xc=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,pg.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var A0=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},x0=class{constructor(){this.queries=yA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=K(t),o=i.queries;i.queries=yA(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new B(V.ABORTED,"Firestore shutting down"))}};function yA(){return new Ur(n=>QA(n),Wl)}function wb(n,e){return F(this,null,function*(){let t=K(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new A0,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=jc(s,`Initialization of query '${ac(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&bb(t)})}function _b(n,e){return F(this,null,function*(){let t=K(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function RB(n,e){let t=K(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&bb(t)}function NB(n,e,t){let r=K(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function bb(n){n.Y_.forEach(e=>{e.next()})}var M0,vA;(vA=M0||(M0={})).ea="default",vA.Cache="cache";var Bl=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new xc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==M0.Cache}};var R0=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var mg=class{constructor(e){this.serializer=e}Es(e){return Vr(this.serializer,e)}ds(e){return e.metadata.exists?yx(this.serializer,e.document,!1):Et.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return dt(e)}},N0=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Hx(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Re.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new mg(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ge()).add(o);t.set(s,a)}}return t}complete(){return F(this,null,function*(){let e=yield vB(this.localStore,new mg(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield wB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function Hx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var yg=class{constructor(e){this.key=e}},vg=class{constructor(e){this.key=e}},wg=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=YA(e),this.Ra=new pg(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new gg,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,p)=>{let w=i.get(g),b=Kl(this.query,p)?p:null,x=!!w&&this.mutatedKeys.has(w.key),N=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),M=!1;w&&b?w.data.isEqual(b.data)?x!==N&&(r.track({type:3,doc:b}),M=!0):this.ga(w,b)||(r.track({type:2,doc:b}),M=!0,(c&&this.Aa(b,c)>0||l&&this.Aa(b,l)<0)&&(a=!0)):!w&&b?(r.track({type:0,doc:b}),M=!0):w&&!b&&(r.track({type:1,doc:w}),M=!0,(c||l)&&(a=!0)),M&&(b?(s=s.add(b),o=N?o.add(g):o.delete(g)):(s=s.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let g=this.query.limitType==="F"?s.last():s.first();s=s.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((g,p)=>function(b,x){let N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return N(b)-N(x)}(g.type,p.type)||this.Aa(g.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new xc(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new gg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new vg(r))}),this.da.forEach(r=>{e.has(r)||t.push(new yg(r))}),t}ba(e){this.Ta=e.Ts,this.da=ge();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return xc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},P0=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},O0=class{constructor(e){this.key=e,this.va=!1}},k0=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Ur(a=>QA(a),Wl),this.Ma=new Map,this.xa=new Set,this.Oa=new Ze(Q.comparator),this.Na=new Map,this.La=new Vl,this.Ba={},this.ka=new Map,this.qa=Dc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function PB(n,e,t=!0){return F(this,null,function*(){let r=Og(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield qx(r,e,t,!0),i})}function OB(n,e){return F(this,null,function*(){let t=Og(n);yield qx(t,e,!0,!1)})}function qx(n,e,t,r){return F(this,null,function*(){let i=yield Tc(n.localStore,un(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Eb(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Pg(n.remoteStore,i),a})}function Eb(n,e,t,r,i){return F(this,null,function*(){n.Ka=(p,w,b)=>function(N,M,j,W){return F(this,null,function*(){let H=M.view.ma(j);H.ns&&(H=yield ag(N.localStore,M.query,!1).then(({documents:D})=>M.view.ma(D,H)));let se=W&&W.targetChanges.get(M.targetId),ce=W&&W.targetMismatches.get(M.targetId)!=null,ee=M.view.applyChanges(H,N.isPrimaryClient,se,ce);return F0(N,M.targetId,ee.wa),ee.snapshot})}(n,p,w,b);let o=yield ag(n.localStore,e,!0),s=new wg(e,o.Ts),a=s.ma(o.documents),c=Pl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);F0(n,t,l.wa);let g=new P0(e,t,s);return n.Fa.set(e,g),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function kB(n,e,t){return F(this,null,function*(){let r=K(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Wl(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Sc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ac(r.remoteStore,i.targetId),Mc(r,i.targetId)}).catch(Ro))):(Mc(r,i.targetId),yield Sc(r.localStore,i.targetId,!0))})}function FB(n,e){return F(this,null,function*(){let t=K(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ac(t.remoteStore,r.targetId))})}function VB(n,e,t){return F(this,null,function*(){let r=Tb(n);try{let i=yield function(s,a){let c=K(s),l=lt.now(),g=a.reduce((b,x)=>b.add(x.key),ge()),p,w;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let x=vn(),N=ge();return c.cs.getEntries(b,g).next(M=>{x=M,x.forEach((j,W)=>{W.isValidDocument()||(N=N.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,x)).next(M=>{p=M;let j=[];for(let W of a){let H=Yj(W,p.get(W.key).overlayedDocument);H!=null&&j.push(new cr(W.key,H,$A(H.value.mapValue),ot.exists(!0)))}return c.mutationQueue.addMutationBatch(b,l,j,a)}).next(M=>{w=M;let j=M.applyToLocalDocumentSet(p,N);return c.documentOverlayCache.saveOverlays(b,M.batchId,j)})}).then(()=>({batchId:w.batchId,changes:XA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ze(pe)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield bi(r,i.changes),yield Vc(r.remoteStore)}catch(i){let o=jc(i,"Failed to persist write");t.reject(o)}})}function Gx(n,e){return F(this,null,function*(){let t=K(n);try{let r=yield mB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?ie(s.va):i.removedDocuments.size>0&&(ie(s.va),s.va=!1))}),yield bi(t,r,e)}catch(r){yield Ro(r)}})}function wA(n,e,t){let r=K(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=K(s);c.onlineState=a;let l=!1;c.queries.forEach((g,p)=>{for(let w of p.j_)w.Z_(a)&&(l=!0)}),l&&bb(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function LB(n,e,t){return F(this,null,function*(){let r=K(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ze(Q.comparator);s=s.insert(o,Et.newNoDocument(o,ae.min()));let a=ge().add(o),c=new Nl(ae.min(),new Map,new Ze(pe),s,a);yield Gx(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),Db(r)}else yield Sc(r.localStore,e,!1).then(()=>Mc(r,e,t)).catch(Ro)})}function jB(n,e){return F(this,null,function*(){let t=K(n),r=e.batch.batchId;try{let i=yield gB(t.localStore,e);Cb(t,r,null),Ib(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield bi(t,i)}catch(i){yield Ro(i)}})}function BB(n,e,t){return F(this,null,function*(){let r=K(n);try{let i=yield function(s,a){let c=K(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let g;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(ie(p!==null),g=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,g,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,g)).next(()=>c.localDocuments.getDocuments(l,g))})}(r.localStore,e);Cb(r,e,t),Ib(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield bi(r,i)}catch(i){yield Ro(i)}})}function UB(n,e){return F(this,null,function*(){let t=K(n);Po(t.remoteStore)||L("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=K(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=jc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Ib(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Cb(n,e,t){let r=K(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Mc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Wx(n,r)})}function Wx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Ac(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Db(n))}function F0(n,e,t){for(let r of t)r instanceof yg?(n.La.addReference(r.key,e),$B(n,r)):r instanceof vg?(L("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Wx(n,r.key)):J()}function $B(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(L("SyncEngine","New document in limbo: "+t),n.xa.add(r),Db(n))}function Db(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Q(Re.fromString(e)),r=n.qa.next();n.Na.set(r,new O0(t)),n.Oa=n.Oa.insert(t,r),Pg(n.remoteStore,new Cc(un(kc(t.path)),r,"TargetPurposeLimboResolution",xn.oe))}}function bi(n,e,t){return F(this,null,function*(){let r=K(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var g;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(g=t?.targetChanges.get(c.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=p0.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return F(this,null,function*(){let g=K(c);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,w=>O.forEach(w.$i,b=>g.persistence.referenceDelegate.addReference(p,w.targetId,b)).next(()=>O.forEach(w.Ui,b=>g.persistence.referenceDelegate.removeReference(p,w.targetId,b)))))}catch(p){if(!No(p))throw p;L("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let w=p.targetId;if(!p.fromCache){let b=g.os.get(w),x=b.snapshotVersion,N=b.withLastLimboFreeSnapshotVersion(x);g.os=g.os.insert(w,N)}}})}(r.localStore,o))})}function zB(n,e){return F(this,null,function*(){let t=K(n);if(!t.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());let r=yield Nx(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new B(V.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield bi(t,r.hs)}})}function HB(n,e){let t=K(n),r=t.Na.get(e);if(r&&r.va)return ge().add(r.key);{let i=ge(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function qB(n,e){return F(this,null,function*(){let t=K(n),r=yield ag(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&F0(t,e.targetId,i.wa),i})}function GB(n,e){return F(this,null,function*(){let t=K(n);return Fx(t.localStore,e).then(r=>bi(t,r))})}function WB(n,e,t,r){return F(this,null,function*(){let i=K(n),o=yield function(a,c){let l=K(a),g=K(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>g.Mn(p,c).next(w=>w?l.localDocuments.getDocuments(p,w):O.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Vc(i.remoteStore):t==="acknowledged"||t==="rejected"?(Cb(i,e,r||null),Ib(i,e),function(a,c){K(K(a).mutationQueue).On(c)}(i.localStore,e)):J(),yield bi(i,o)):L("SyncEngine","Cannot apply mutation batch with id: "+e)})}function KB(n,e){return F(this,null,function*(){let t=K(n);if(Og(t),Tb(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield _A(t,r.toArray());t.Qa=!0,yield T0(t.remoteStore,!0);for(let o of i)Pg(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Mc(t,s),Sc(t.localStore,s,!0))),Ac(t.remoteStore,s)}),yield i,yield _A(t,r),function(s){let a=K(s);a.Na.forEach((c,l)=>{Ac(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ze(Q.comparator)}(t),t.Qa=!1,yield T0(t.remoteStore,!1)}})}function _A(n,e,t){return F(this,null,function*(){let r=K(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield Tc(r.localStore,un(c[0]));for(let l of c){let g=r.Fa.get(l),p=yield qB(r,g);p.snapshot&&o.push(p.snapshot)}}else{let l=yield kx(r.localStore,s);a=yield Tc(r.localStore,l),yield Eb(r,Kx(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function Kx(n){return KA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function QB(n){return function(t){return K(K(t).persistence).Qi()}(K(n).localStore)}function ZB(n,e,t,r){return F(this,null,function*(){let i=K(n);if(i.Qa)return void L("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield Fx(i.localStore,ZA(o[0])),a=Nl.createSynthesizedRemoteEventForCurrentChange(e,t==="current",ft.EMPTY_BYTE_STRING);yield bi(i,s,a);break}case"rejected":yield Sc(i.localStore,e,!0),Mc(i,e,r);break;default:J()}})}function YB(n,e,t){return F(this,null,function*(){let r=Og(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){L("SyncEngine","Adding an already active target "+i);continue}let o=yield kx(r.localStore,i),s=yield Tc(r.localStore,o);yield Eb(r,Kx(o),s.targetId,!1,s.resumeToken),Pg(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Sc(r.localStore,i,!1).then(()=>{Ac(r.remoteStore,i),Mc(r,i)}).catch(Ro))}})}function Og(n){let e=K(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LB.bind(null,e),e.Ca.d_=RB.bind(null,e.eventManager),e.Ca.$a=NB.bind(null,e.eventManager),e}function Tb(n){let e=K(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BB.bind(null,e),e}function JB(n,e,t){let r=K(n);(function(o,s,a){return F(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(b,x){let N=K(b),M=dt(x.createTime);return N.persistence.runTransaction("hasNewerBundle","readonly",j=>N.Gr.getBundleMetadata(j,x.id)).then(j=>!!j&&j.createTime.compareTo(M)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(b){return{taskState:"Success",documentsLoaded:b.totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(Hx(c));let l=new N0(c,o.localStore,s.serializer),g=yield s.Ua();for(;g;){let w=yield l.la(g);w&&a._updateProgress(w),g=yield s.Ua()}let p=yield l.complete();return yield bi(o,p.Ia,void 0),yield function(b,x){let N=K(b);return N.persistence.runTransaction("Save bundle","readwrite",M=>N.Gr.saveBundleMetadata(M,x))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return gi("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var V0=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return F(this,null,function*(){this.serializer=Ql(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Rx(this.persistence,new sg,t.initialUser,this.serializer)}Ga(t){return new ig(og.Zr,this.serializer)}Wa(t){return new lg}terminate(){return F(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var _g=class n extends V0{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return F(this,null,function*(){yield Zm(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield Tb(this.Ja.syncEngine),yield Vc(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return Rx(this.persistence,new sg,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new J_(r,e.asyncQueue,t)}Ha(e,t){let r=new g_(t,this.persistence);return new p_(e.asyncQueue,r)}Ga(e){let t=gb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new f0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Lx(),Pp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new lg}},L0=class n extends _g{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return F(this,null,function*(){yield Zm(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof El&&(this.sharedClientState.syncEngine={no:WB.bind(null,t),ro:ZB.bind(null,t),io:YB.bind(null,t),Qi:QB.bind(null,t),eo:GB.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>F(this,null,function*(){yield KB(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=Lx();if(!El.D(t))throw new B(V.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=gb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new El(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Sb=(()=>{class n{initialize(t,r){return F(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=zB.bind(null,this.syncEngine),yield T0(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new x0}()}createDatastore(t){let r=Ql(t.databaseInfo.databaseId),i=function(s){return new _0(s)}(t.databaseInfo);return function(s,a,c,l){return new I0(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new D0(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>wA(this.syncEngine,r,0),function(){return dg.D()?new dg:new v0}())}createSyncEngine(t,r){return function(o,s,a,c,l,g,p){let w=new k0(o,s,a,c,l,g);return p&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return F(this,null,function*(){var t,r;yield function(o){return F(this,null,function*(){let s=K(o);L("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Fc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function bA(n,e=10240){let t=0;return{read(){return F(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return F(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Rc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ut("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var j0=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new xt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return F(this,null,function*(){return this.metadata.promise})}Ua(){return F(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return F(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new R0(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return F(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return F(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return F(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var B0=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return F(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return F(this,null,function*(){let s=K(i),a={documents:o.map(p=>Ol(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Re.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let w=rB(s.serializer,p);l.set(w.key.toString(),w)});let g=[];return o.forEach(p=>{let w=l.get(p.toString());ie(!!w),g.push(w)}),g})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new To(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return F(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=Q.fromPath(r);this.mutations.push(new xl(i,this.precondition(i)))}),yield function(r,i){return F(this,null,function*(){let o=K(r),s={writes:i.map(a=>kl(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Re.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw J();t=ae.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new B(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ae.min())?ot.exists(!1):ot.updateTime(t):ot.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ae.min()))throw new B(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ot.updateTime(t)}return ot.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var U0=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new jl(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>F(this,null,function*(){let e=new B0(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!ql(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!ux(t)}return!1}};var $0=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bt.UNAUTHENTICATED,this.clientId=kp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>F(this,null,function*(){L("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(L("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>F(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=jc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function r_(n,e){return F(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>F(this,null,function*(){r.isEqual(i)||(yield Nx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function EA(n,e){return F(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Ab(n);L("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>mA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>mA(e.remoteStore,i)),n._onlineComponents=e})}function Ab(n){return F(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{yield r_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;gi("Error using user provided cache. Falling back to memory cache: "+t),yield r_(n,new V0)}}else L("FirestoreClient","Using default OfflineComponentProvider"),yield r_(n,new V0);return n._offlineComponents})}function kg(n){return F(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),yield EA(n,n._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),yield EA(n,new Sb))),n._onlineComponents})}function Qx(n){return Ab(n).then(e=>e.persistence)}function xb(n){return Ab(n).then(e=>e.localStore)}function Zx(n){return kg(n).then(e=>e.remoteStore)}function Mb(n){return kg(n).then(e=>e.syncEngine)}function XB(n){return kg(n).then(e=>e.datastore)}function Nc(n){return F(this,null,function*(){let e=yield kg(n),t=e.eventManager;return t.onListen=PB.bind(null,e.syncEngine),t.onUnlisten=kB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=FB.bind(null,e.syncEngine),t})}function eU(n){return n.asyncQueue.enqueue(()=>F(this,null,function*(){let e=yield Qx(n),t=yield Zx(n);return e.setNetworkEnabled(!0),function(i){let o=K(i);return o.L_.delete(0),Zl(o)}(t)}))}function tU(n){return n.asyncQueue.enqueue(()=>F(this,null,function*(){let e=yield Qx(n),t=yield Zx(n);return e.setNetworkEnabled(!1),function(i){return F(this,null,function*(){let o=K(i);o.L_.add(0),yield Fc(o),o.q_.set("Offline")})}(t)}))}function nU(n,e){let t=new xt;return n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(i,o,s){return F(this,null,function*(){try{let a=yield function(l,g){let p=K(l);return p.persistence.runTransaction("read document","readonly",w=>p.localDocuments.getDocument(w,g))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new B(V.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=jc(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield xb(n),e,t)})),t.promise}function Yx(n,e,t={}){let r=new xt;return n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(o,s,a,c,l){let g=new Rc({next:w=>{g.Za(),s.enqueueAndForget(()=>_b(o,p));let b=w.docs.has(a);!b&&w.fromCache?l.reject(new B(V.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&w.fromCache&&c&&c.source==="server"?l.reject(new B(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(w)},error:w=>l.reject(w)}),p=new Bl(kc(a.path),g,{includeMetadataChanges:!0,_a:!0});return wb(o,p)}(yield Nc(n),n.asyncQueue,e,t,r)})),r.promise}function rU(n,e){let t=new xt;return n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(i,o,s){return F(this,null,function*(){try{let a=yield ag(i,o,!0),c=new wg(o,a.Ts),l=c.ma(a.documents),g=c.applyChanges(l,!1);s.resolve(g.snapshot)}catch(a){let c=jc(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield xb(n),e,t)})),t.promise}function Jx(n,e,t={}){let r=new xt;return n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(o,s,a,c,l){let g=new Rc({next:w=>{g.Za(),s.enqueueAndForget(()=>_b(o,p)),w.fromCache&&c.source==="server"?l.reject(new B(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(w)},error:w=>l.reject(w)}),p=new Bl(a,g,{includeMetadataChanges:!0,_a:!0});return wb(o,p)}(yield Nc(n),n.asyncQueue,e,t,r)})),r.promise}function iU(n,e){let t=new Rc(e);return n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(i,o){K(i).Y_.add(o),o.next()}(yield Nc(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(i,o){K(i).Y_.delete(o)}(yield Nc(n),t)}))}}function oU(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?dx().encode(s):s,function(g,p){return new j0(g,p)}(function(g,p){if(g instanceof Uint8Array)return bA(g,p);if(g instanceof ArrayBuffer)return bA(new Uint8Array(g),p);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Ql(e));n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){JB(yield Mb(n),i,r)}))}function sU(n,e){return n.asyncQueue.enqueue(()=>F(this,null,function*(){return function(r,i){let o=K(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield xb(n),e)}))}function Xx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var IA=new Map;function Rb(n,e,t){if(!t)throw new B(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function aU(n,e,t,r){if(e===!0&&r===!0)throw new B(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function CA(n){if(!Q.isDocumentKey(n))throw new B(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function DA(n){if(Q.isDocumentKey(n))throw new B(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":J()}function Fe(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new B(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Fg(n);throw new B(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function eM(n,e){if(e<=0)throw new B(V.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var bg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Us=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new i_;switch(r.type){case"firstParty":return new c_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return F(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=IA.get(t);r&&(L("ComponentProvider","Removing Datastore"),IA.delete(t),r.terminate())}(this),Promise.resolve()}};function tM(n,e,t,r={}){var i;let o=(n=Fe(n,Us))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&gi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=bt.MOCK_USER;else{a=KE(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new B(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new bt(l)}n._authCredentials=new o_(new Op(a,c))}}var zt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ht=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Lr=class n extends zt{constructor(e,t,r){super(e,t,kc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new Q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function nM(n,e,...t){if(n=Tt(n),Rb("collection","path",e),n instanceof Us){let r=Re.fromString(e,...t);return DA(r),new Lr(n,null,r)}{if(!(n instanceof ht||n instanceof Lr))throw new B(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return DA(r),new Lr(n.firestore,null,r)}}function cU(n,e){if(n=Fe(n,Us),Rb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new B(V.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zt(n,null,function(r){return new ar(Re.emptyPath(),r)}(e))}function Nb(n,e,...t){if(n=Tt(n),arguments.length===1&&(e=kp.newId()),Rb("doc","path",e),n instanceof Us){let r=Re.fromString(e,...t);return CA(r),new ht(n,null,new Q(r))}{if(!(n instanceof ht||n instanceof Lr))throw new B(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return CA(r),new ht(n.firestore,n instanceof Lr?n.converter:null,new Q(r))}}function rM(n,e){return n=Tt(n),e=Tt(e),(n instanceof ht||n instanceof Lr)&&(e instanceof ht||e instanceof Lr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function iM(n,e){return n=Tt(n),e=Tt(e),n instanceof zt&&e instanceof zt&&n.firestore===e.firestore&&Wl(n._query,e._query)&&n.converter===e.converter}var Eg=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new jl(this,"async_queue_retry"),this.Vu=()=>{let r=Pp();r&&L("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Pp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Pp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new xt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return F(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!No(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ut("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=S0.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&J()}verifyOperationInProgress(){}wu(){return F(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function z0(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var H0=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new xt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var nK=-1,tt=class extends Us{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Eg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return F(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Eg(e),this._firestoreClient=void 0,yield e}})}};function oM(n,e){let t=typeof n=="object"?n:bh(),r=typeof n=="string"?n:e||"(default)",i=eI(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=WE("firestore");o&&tM(i,...o)}return i}function ln(n){if(n._terminated)throw new B(V.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sM(n),n._firestoreClient}function sM(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,g){return new m_(a,c,l,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Xx(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new $0(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function uU(n,e){gi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return aM(n,Sb.provider,{build:r=>new _g(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function lU(n){return F(this,null,function*(){gi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();aM(n,Sb.provider,{build:t=>new L0(t,e.cacheSizeBytes)})})}function aM(n,e,t){if((n=Fe(n,tt))._firestoreClient||n._terminated)throw new B(V.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new B(V.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},sM(n)}function dU(n){if(n._initialized&&!n._terminated)throw new B(V.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new xt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>F(this,null,function*(){try{yield function(r){return F(this,null,function*(){if(!_o.D())return Promise.resolve();let i=r+"main";yield _o.delete(i)})}(gb(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function hU(n){return function(t){let r=new xt;return t.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return UB(yield Mb(t),r)})),r.promise}(ln(n=Fe(n,tt)))}function fU(n){return eU(ln(n=Fe(n,tt)))}function pU(n){return tU(ln(n=Fe(n,tt)))}function gU(n,e){let t=ln(n=Fe(n,tt)),r=new H0;return oU(t,n._databaseId,e,r),r}function mU(n,e){return sU(ln(n=Fe(n,tt)),e).then(t=>t?new zt(n,null,t.query):null)}var Pc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ft.fromBase64String(e))}catch(t){throw new B(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ao=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new B(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var wi=class{constructor(e){this._methodName=e}};var Ul=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}};var $l=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var yU=/^__.*__$/,q0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new cr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Do(e,this.data,t,this.fieldTransforms)}},Ig=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function cM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}var Cg=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Dg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(cM(this.Cu)&&yU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},G0=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ql(e)}Qu(e,t,r,i=!1){return new Cg({Cu:e,methodName:t,qu:r,path:Mt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function qs(n){let e=n._freezeSettings(),t=Ql(n._databaseId);return new G0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Vg(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);kb("Data must be an object, but it was:",s,r);let a=dM(r,s),c,l;if(o.merge)c=new Mn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let g=[];for(let p of o.mergeFields){let w=Y0(e,p,t);if(!s.contains(w))throw new B(V.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);fM(g,w)||g.push(w)}c=new Mn(g),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new q0(new Jt(a),c,l)}var zl=class n extends wi{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function uM(n,e,t){return new Cg({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var W0=class n extends wi{_toFieldTransform(e){return new Ls(e.path,new Io)}isEqual(e){return e instanceof n}},K0=class n extends wi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=uM(this,e,!0),r=this.Ku.map(o=>Gs(o,t)),i=new yi(r);return new Ls(e.path,i)}isEqual(e){return e instanceof n&&Jm(this.Ku,e.Ku)}},Q0=class n extends wi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=uM(this,e,!0),r=this.Ku.map(o=>Gs(o,t)),i=new vi(r);return new Ls(e.path,i)}isEqual(e){return e instanceof n&&Jm(this.Ku,e.Ku)}},Z0=class n extends wi{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Co(e.serializer,nx(e.serializer,this.$u));return new Ls(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function Pb(n,e,t,r){let i=n.Qu(1,e,t);kb("Data must be an object, but it was:",i,r);let o=[],s=Jt.empty();Hs(r,(c,l)=>{let g=Fb(e,c,t);l=Tt(l);let p=i.Nu(g);if(l instanceof zl)o.push(g);else{let w=Gs(l,p);w!=null&&(o.push(g),s.set(g,w))}});let a=new Mn(o);return new Ig(s,a,i.fieldTransforms)}function Ob(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Y0(e,r,t)],c=[i];if(o.length%2!=0)throw new B(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)a.push(Y0(e,o[w])),c.push(o[w+1]);let l=[],g=Jt.empty();for(let w=a.length-1;w>=0;--w)if(!fM(l,a[w])){let b=a[w],x=c[w];x=Tt(x);let N=s.Nu(b);if(x instanceof zl)l.push(b);else{let M=Gs(x,N);M!=null&&(l.push(b),g.set(b,M))}}let p=new Mn(l);return new Ig(g,p,s.fieldTransforms)}function lM(n,e,t,r=!1){return Gs(t,n.Qu(r?4:3,e))}function Gs(n,e){if(hM(n=Tt(n)))return kb("Unsupported field value:",e,n),dM(n,e);if(n instanceof wi)return function(r,i){if(!cM(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Gs(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=lt.fromDate(r);return{timestampValue:Ic(i.serializer,o)}}if(r instanceof lt){let o=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ic(i.serializer,o)}}if(r instanceof Ul)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pc)return{bytesValue:hx(i.serializer,r._byteString)};if(r instanceof ht){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:hb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof $l)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return db(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Fg(r)}`)}(n,e)}function dM(n,e){let t={};return jA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hs(n,(r,i)=>{let o=Gs(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function hM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof Ul||n instanceof Pc||n instanceof ht||n instanceof wi||n instanceof $l)}function kb(n,e,t){if(!hM(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Fg(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Y0(n,e,t){if((e=Tt(e))instanceof Ao)return e._internalPath;if(typeof e=="string")return Fb(n,e);throw Dg("Field path arguments must be of type string or ",n,!1,void 0,t)}var vU=new RegExp("[~\\*/\\[\\]]");function Fb(n,e,t){if(e.search(vU)>=0)throw Dg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ao(...e.split("."))._internalPath}catch{throw Dg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Dg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new B(V.INVALID_ARGUMENT,a+n+c)}function fM(n,e){return n.some(t=>t.isEqual(e))}var $s=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new J0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Lg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},J0=class extends $s{data(){return super.data()}};function Lg(n,e){return typeof e=="string"?Fb(n,e):e instanceof Ao?e._internalPath:e._delegate._internalPath}function pM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new B(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hl=class{},zs=class extends Hl{};function wU(n,e,...t){let r=[];e instanceof Hl&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof X0).length,a=o.filter(c=>c instanceof Tg).length;if(s>1||s>0&&a>0)throw new B(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Tg=class n extends zs{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return mM(e._query,t),new zt(e.firestore,e.converter,x_(e._query,t))}_parse(e){let t=qs(e.firestore);return function(o,s,a,c,l,g,p){let w;if(l.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new B(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){SA(p,g);let b=[];for(let x of p)b.push(TA(c,o,x));w={arrayValue:{values:b}}}else w=TA(c,o,p)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||SA(p,g),w=lM(a,s,p,g==="in"||g==="not-in");return Se.create(l,g,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function _U(n,e,t){let r=e,i=Lg("where",n);return Tg._create(i,r,t)}var X0=class n extends Hl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:$e.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)mM(s,c),s=x_(s,c)}(e._query,t),new zt(e.firestore,e.converter,x_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var eb=class n extends zs{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new B(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fs(o,s)}(e._query,this._field,this._direction);return new zt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new ar(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function bU(n,e="asc"){let t=e,r=Lg("orderBy",n);return eb._create(r,t)}var Sg=class n extends zs{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new zt(e.firestore,e.converter,qp(e._query,this._limit,this._limitType))}};function EU(n){return eM("limit",n),Sg._create("limit",n,"F")}function IU(n){return eM("limitToLast",n),Sg._create("limitToLast",n,"L")}var Ag=class n extends zs{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=gM(e,this.type,this._docOrFields,this._inclusive);return new zt(e.firestore,e.converter,function(i,o){return new ar(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function CU(...n){return Ag._create("startAt",n,!0)}function DU(...n){return Ag._create("startAfter",n,!1)}var xg=class n extends zs{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=gM(e,this.type,this._docOrFields,this._inclusive);return new zt(e.firestore,e.converter,function(i,o){return new ar(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function TU(...n){return xg._create("endBefore",n,!1)}function SU(...n){return xg._create("endAt",n,!0)}function gM(n,e,t,r){if(t[0]=Tt(t[0]),t[0]instanceof $s)return function(o,s,a,c,l){if(!c)throw new B(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let g=[];for(let p of fc(o))if(p.field.isKeyField())g.push(ks(s,c.key));else{let w=c.data.field(p.field);if(Rg(w))throw new B(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){let b=p.field.canonicalString();throw new B(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}g.push(w)}return new Br(g,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=qs(n.firestore);return function(s,a,c,l,g,p){let w=s.explicitOrderBy;if(g.length>w.length)throw new B(V.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let b=[];for(let x=0;x<g.length;x++){let N=g[x];if(w[x].field.isKeyField()){if(typeof N!="string")throw new B(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof N}`);if(!ub(s)&&N.indexOf("/")!==-1)throw new B(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${N}' contains a slash.`);let M=s.path.child(Re.fromString(N));if(!Q.isDocumentKey(M))throw new B(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let j=new Q(M);b.push(ks(a,j))}else{let M=lM(c,l,N);b.push(M)}}return new Br(b,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function TA(n,e,t){if(typeof(t=Tt(t))=="string"){if(t==="")throw new B(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ub(e)&&t.indexOf("/")!==-1)throw new B(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Re.fromString(t));if(!Q.isDocumentKey(r))throw new B(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ks(n,new Q(r))}if(t instanceof ht)return ks(n,t._key);throw new B(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fg(t)}.`)}function SA(n,e){if(!Array.isArray(n)||n.length===0)throw new B(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mM(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new B(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Mg=class{convertValue(e,t="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Hs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Xe(s.doubleValue));return new $l(o)}convertGeoPoint(e){return new Ul(Xe(e.latitude),Xe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ab(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tl(e));default:return null}}convertTimestamp(e){let t=mi(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Re.fromString(e);ie(Ix(r));let i=new vc(r.get(1),r.get(3)),o=new Q(r.popFirst(5));return i.isEqual(t)||ut(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function jg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var tb=class extends Mg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,t)}};var pi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xo=class extends $s{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Lg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},gc=class extends xo{data(e={}){return super.data(e)}},Mo=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new gc(this._firestore,this._userDataWriter,r.key,r,new pi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new gc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new gc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,g=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),g=s.indexOf(a.doc.key)),{type:AU(a.type),doc:c,oldIndex:l,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function AU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}function xU(n,e){return n instanceof xo&&e instanceof xo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Mo&&e instanceof Mo&&n._firestore===e._firestore&&iM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function MU(n){n=Fe(n,ht);let e=Fe(n.firestore,tt);return Yx(ln(e),n._key).then(t=>Lb(e,n,t))}var _i=class extends Mg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,t)}};function RU(n){n=Fe(n,ht);let e=Fe(n.firestore,tt),t=ln(e),r=new _i(e);return nU(t,n._key).then(i=>new xo(e,r,n._key,i,new pi(i!==null&&i.hasLocalMutations,!0),n.converter))}function NU(n){n=Fe(n,ht);let e=Fe(n.firestore,tt);return Yx(ln(e),n._key,{source:"server"}).then(t=>Lb(e,n,t))}function PU(n){n=Fe(n,zt);let e=Fe(n.firestore,tt),t=ln(e),r=new _i(e);return pM(n._query),Jx(t,n._query).then(i=>new Mo(e,r,n,i))}function OU(n){n=Fe(n,zt);let e=Fe(n.firestore,tt),t=ln(e),r=new _i(e);return rU(t,n._query).then(i=>new Mo(e,r,n,i))}function kU(n){n=Fe(n,zt);let e=Fe(n.firestore,tt),t=ln(e),r=new _i(e);return Jx(t,n._query,{source:"server"}).then(i=>new Mo(e,r,n,i))}function yM(n,e,t){n=Fe(n,ht);let r=Fe(n.firestore,tt),i=jg(n.converter,e,t);return Bg(r,[Vg(qs(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ot.none())])}function vM(n,e,t,...r){n=Fe(n,ht);let i=Fe(n.firestore,tt),o=qs(i),s;return s=typeof(e=Tt(e))=="string"||e instanceof Ao?Ob(o,"updateDoc",n._key,e,t,r):Pb(o,"updateDoc",n._key,e),Bg(i,[s.toMutation(n._key,ot.exists(!0))])}function wM(n){return Bg(Fe(n.firestore,tt),[new To(n._key,ot.none())])}function _M(n,e){let t=Fe(n.firestore,tt),r=Nb(n),i=jg(n.converter,e);return Bg(t,[Vg(qs(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ot.exists(!1))]).then(()=>r)}function Vb(n,...e){var t,r,i;n=Tt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||z0(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(z0(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,g;if(n instanceof ht)l=Fe(n.firestore,tt),g=kc(n._key.path),c={next:p=>{e[s]&&e[s](Lb(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Fe(n,zt);l=Fe(p.firestore,tt),g=p._query;let w=new _i(l);c={next:b=>{e[s]&&e[s](new Mo(l,w,p,b))},error:e[s+1],complete:e[s+2]},pM(n._query)}return function(w,b,x,N){let M=new Rc(N),j=new Bl(b,M,x);return w.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return wb(yield Nc(w),j)})),()=>{M.Za(),w.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return _b(yield Nc(w),j)}))}}(ln(l),g,a,c)}function FU(n,e){return iU(ln(n=Fe(n,tt)),z0(e)?e:{next:e})}function Bg(n,e){return function(r,i){let o=new xt;return r.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return VB(yield Mb(r),i,o)})),o.promise}(ln(n),e)}function Lb(n,e,t){let r=t.docs.get(e._key),i=new _i(n);return new xo(n,i,e._key,r,new pi(t.hasPendingWrites,t.fromCache),e.converter)}var VU={maxAttempts:5};var AA=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qs(e)}set(e,t,r){this._verifyNotCommitted();let i=yo(e,this._firestore),o=jg(i.converter,t,r),s=Vg(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,ot.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=yo(e,this._firestore),s;return s=typeof(t=Tt(t))=="string"||t instanceof Ao?Ob(this._dataReader,"WriteBatch.update",o._key,t,r,i):Pb(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,ot.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=yo(e,this._firestore);return this._mutations=this._mutations.concat(new To(t._key,ot.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function yo(n,e){if((n=Tt(n)).firestore!==e)throw new B(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var nb=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=qs(t)}get(t){let r=yo(t,this._firestore),i=new tb(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return J();let s=o[0];if(s.isFoundDocument())return new $s(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new $s(this._firestore,i,r._key,null,r.converter);throw J()})}set(t,r,i){let o=yo(t,this._firestore),s=jg(o.converter,r,i),a=Vg(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=yo(t,this._firestore),a;return a=typeof(r=Tt(r))=="string"||r instanceof Ao?Ob(this._dataReader,"Transaction.update",s._key,r,i,o):Pb(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=yo(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=yo(e,this._firestore),r=new _i(this._firestore);return super.get(e).then(i=>new xo(this._firestore,r,t._key,i._document,new pi(!1,!1),t.converter))}};function LU(n,e,t){n=Fe(n,tt);let r=Object.assign(Object.assign({},VU),t);return function(o){if(o.maxAttempts<1)throw new B(V.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new xt;return o.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){let l=yield XB(o);new U0(o.asyncQueue,l,a,s,c).au()})),c.promise}(ln(n),i=>e(new nb(n,i)),r)}function jU(){return new zl("deleteField")}function BU(){return new W0("serverTimestamp")}function UU(...n){return new K0("arrayUnion",n)}function $U(...n){return new Q0("arrayRemove",n)}function zU(n){return new Z0("increment",n)}(function(e,t=!0){(function(i){Oc=i})(tI),XE(new YE("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new tt(new s_(r.getProvider("auth-internal")),new l_(r.getProvider("app-check-internal")),function(l,g){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vc(l.options.projectId,g)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),In(DS,"4.7.3",e),In(DS,"4.7.3","esm2017")})();var Ug=function(){return Ug=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ug.apply(this,arguments)};var qU={includeMetadataChanges:!1};function bM(n,e){return e===void 0&&(e=qU),new Ie(function(t){var r=Vb(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function EM(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Ug(Ug({},r),(t={},t[e.idField]=n.id,t))}function IM(n){return bM(n,{includeMetadataChanges:!0}).pipe(le(function(e){return e.docs}))}function CM(n,e){return e===void 0&&(e={}),IM(n).pipe(le(function(t){return t.map(function(r){return EM(r,e)})}))}var ur=class{constructor(e){return e}},DM="firestore",jb=class{constructor(){return ul(DM)}};var Bb=new te("angularfire2.firestore-instances");function GU(n,e){let t=bp(DM,n,e);return t&&new ur(t)}function WU(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ur(r)}}var KU={provide:jb,deps:[[new Wt,Bb]]},QU={provide:ur,useFactory:GU,deps:[[new Wt,Bb],di]};function ZK(n,...e){return In("angularfire",Is.full,"fst"),jn([QU,KU,{provide:Bb,useFactory:WU(n),multi:!0,deps:[Oe,Ut,ec,Cs,[new Wt,ll],[new Wt,Xa],...e]}])}var $g=an(CM,!0);var TM=an(_M,!0);var Oo=an(nM,!0);var SM=an(wM,!0);var Bc=an(Nb,!0);var YK=an(oM,!0);var zg=an(yM,!0);var AM=an(vM,!0);var IR=J1(xM());var ve="primary",dd=Symbol("RouteTitle"),Wb=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Gc(n){return new Wb(n)}function ZU(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function YU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zr(n[t],e[t]))return!1;return!0}function zr(n,e){let t=n?Kb(n):void 0,r=e?Kb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!BM(n[i],e[i]))return!1;return!0}function Kb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function BM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function UM(n){return n.length>0?n[n.length-1]:null}function Vo(n){return _y(n)?n:ws(n)?ze(Promise.resolve(n)):ue(n)}var JU={exact:zM,subset:HM},$M={exact:XU,subset:e$,ignored:()=>!0};function MM(n,e,t){return JU[t.paths](n.root,e.root,t.matrixParams)&&$M[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function XU(n,e){return zr(n,e)}function zM(n,e,t){if(!Ks(n.segments,e.segments)||!Gg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!zM(n.children[r],e.children[r],t))return!1;return!0}function e$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>BM(n[t],e[t]))}function HM(n,e,t){return qM(n,e,e.segments,t)}function qM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ks(i,t)||e.hasChildren()||!Gg(i,t,r))}else if(n.segments.length===t.length){if(!Ks(n.segments,t)||!Gg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!HM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ks(n.segments,i)||!Gg(n.segments,i,r)||!n.children[ve]?!1:qM(n.children[ve],e,o,r)}}function Gg(n,e,t){return e.every((r,i)=>$M[t](n[i].parameters,r.parameters))}var Ii=class{constructor(e=new Be([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Gc(this.queryParams),this._queryParamMap}toString(){return r$.serialize(this)}},Be=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wg(this)}},Ws=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Gc(this.parameters),this._parameterMap}toString(){return WM(this)}};function t$(n,e){return Ks(n,e)&&n.every((t,r)=>zr(t.parameters,e[r].parameters))}function Ks(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function n$(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ve&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ve&&(t=t.concat(e(i,r)))}),t}var hd=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>new Wc,providedIn:"root"})}}return n})(),Wc=class{parse(e){let t=new Zb(e);return new Ii(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Yl(e.root,!0)}`,r=s$(e.queryParams),i=typeof e.fragment=="string"?`#${i$(e.fragment)}`:"";return`${t}${r}${i}`}},r$=new Wc;function Wg(n){return n.segments.map(e=>WM(e)).join("/")}function Yl(n,e){if(!n.hasChildren())return Wg(n);if(e){let t=n.children[ve]?Yl(n.children[ve],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ve&&r.push(`${i}:${Yl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=n$(n,(r,i)=>i===ve?[Yl(n.children[ve],!1)]:[`${i}:${Yl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ve]!=null?`${Wg(n)}/${t[0]}`:`${Wg(n)}/(${t.join("//")})`}}function GM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hg(n){return GM(n).replace(/%3B/gi,";")}function i$(n){return encodeURI(n)}function Qb(n){return GM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kg(n){return decodeURIComponent(n)}function RM(n){return Kg(n.replace(/\+/g,"%20"))}function WM(n){return`${Qb(n.path)}${o$(n.parameters)}`}function o$(n){return Object.entries(n).map(([e,t])=>`;${Qb(e)}=${Qb(t)}`).join("")}function s$(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Hg(t)}=${Hg(i)}`).join("&"):`${Hg(t)}=${Hg(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var a$=/^[^\/()?;#]+/;function zb(n){let e=n.match(a$);return e?e[0]:""}var c$=/^[^\/()?;=#]+/;function u$(n){let e=n.match(c$);return e?e[0]:""}var l$=/^[^=?&#]+/;function d$(n){let e=n.match(l$);return e?e[0]:""}var h$=/^[^&#]+/;function f$(n){let e=n.match(h$);return e?e[0]:""}var Zb=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Be([],{}):new Be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ve]=new Be(e,t)),r}parseSegment(){let e=zb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new oe(4009,!1);return this.capture(e),new Ws(Kg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=u$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=zb(this.remaining);i&&(r=i,this.capture(r))}e[Kg(t)]=Kg(r)}parseQueryParam(e){let t=d$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=f$(this.remaining);s&&(r=s,this.capture(r))}let i=RM(t),o=RM(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=zb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new oe(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ve);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ve]:new Be([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new oe(4011,!1)}};function KM(n){return n.segments.length>0?new Be([],{[ve]:n}):n}function QM(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=QM(i);if(r===ve&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Be(n.segments,e);return p$(t)}function p$(n){if(n.numberOfChildren===1&&n.children[ve]){let e=n.children[ve];return new Be(n.segments.concat(e.segments),e.children)}return n}function Qs(n){return n instanceof Ii}function g$(n,e,t=null,r=null){let i=ZM(n);return YM(i,e,t,r)}function ZM(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Be(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=KM(r);return e??i}function YM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Hb(i,i,i,t,r);let o=m$(e);if(o.toRoot())return Hb(i,i,new Be([],{}),t,r);let s=y$(o,i,n),a=s.processChildren?ed(s.segmentGroup,s.index,o.commands):XM(s.segmentGroup,s.index,o.commands);return Hb(i,s.segmentGroup,a,t,r)}function Qg(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function rd(n){return typeof n=="object"&&n!=null&&n.outlets}function Hb(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(g=>`${g}`):`${l}`});let s;n===e?s=t:s=JM(n,e,t);let a=KM(QM(s));return new Ii(a,o,i)}function JM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=JM(o,e,t)}),new Be(n.segments,r)}var Zg=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Qg(r[0]))throw new oe(4003,!1);let i=r.find(rd);if(i&&i!==UM(r))throw new oe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function m$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Zg(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Zg(t,e,r)}var zc=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function y$(n,e,t){if(n.isAbsolute)return new zc(e,!0,0);if(!t)return new zc(e,!1,NaN);if(t.parent===null)return new zc(t,!0,0);let r=Qg(n.commands[0])?0:1,i=t.segments.length-1+r;return v$(t,i,n.numberOfDoubleDots)}function v$(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new oe(4005,!1);i=r.segments.length}return new zc(r,!1,i-o)}function w$(n){return rd(n[0])?n[0].outlets:{[ve]:n}}function XM(n,e,t){if(n??=new Be([],{}),n.segments.length===0&&n.hasChildren())return ed(n,e,t);let r=_$(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Be(n.segments.slice(0,r.pathIndex),{});return o.children[ve]=new Be(n.segments.slice(r.pathIndex),n.children),ed(o,0,i)}else return r.match&&i.length===0?new Be(n.segments,{}):r.match&&!n.hasChildren()?Yb(n,e,t):r.match?ed(n,0,i):Yb(n,e,t)}function ed(n,e,t){if(t.length===0)return new Be(n.segments,{});{let r=w$(t),i={};if(Object.keys(r).some(o=>o!==ve)&&n.children[ve]&&n.numberOfChildren===1&&n.children[ve].segments.length===0){let o=ed(n.children[ve],e,t);return new Be(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=XM(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Be(n.segments,i)}}function _$(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(rd(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!PM(c,l,s))return o;r+=2}else{if(!PM(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Yb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(rd(o)){let c=b$(o.outlets);return new Be(r,c)}if(i===0&&Qg(t[0])){let c=n.segments[e];r.push(new Ws(c.path,NM(t[0]))),i++;continue}let s=rd(o)?o.outlets[ve]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Qg(a)?(r.push(new Ws(s,NM(a))),i+=2):(r.push(new Ws(s,{})),i++)}return new Be(r,{})}function b$(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Yb(new Be([],{}),0,r))}),e}function NM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function PM(n,e,t){return n==t.path&&zr(e,t.parameters)}var td="imperative",Ft=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ft||{}),qn=class{constructor(e,t){this.id=e,this.url=t}},Kc=class extends qn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ft.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Hr=class extends qn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Nn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Nn||{}),Yg=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Yg||{}),Ei=class extends qn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ko=class extends qn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ft.NavigationSkipped}},id=class extends qn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Jg=class extends qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jb=class extends qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xb=class extends qn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},eE=class extends qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tE=class extends qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nE=class{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},rE=class{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},iE=class{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oE=class{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sE=class{constructor(e){this.snapshot=e,this.type=Ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},aE=class{constructor(e){this.snapshot=e,this.type=Ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xg=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Ft.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},od=class{},Qc=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function E$(n,e){return n.providers&&!n._injector&&(n._injector=sp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lr(n){return n.outlet||ve}function I$(n,e){let t=n.filter(r=>lr(r)===e);return t.push(...n.filter(r=>lr(r)!==e)),t}function fd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var cE=class{get injector(){return fd(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new pd(this.rootInjector),this.attachRef=null}},pd=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new cE(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(ne(on))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),em=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=uE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=uE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=lE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return lE(e,this._root).map(t=>t.value)}};function uE(n,e){if(n===e.value)return e;for(let t of e.children){let r=uE(n,t);if(r)return r}return null}function lE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=lE(n,t);if(r.length)return r.unshift(e),r}return[]}var Rn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function $c(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var tm=class extends em{constructor(e,t){super(e),this.snapshot=t,wE(this,e)}toString(){return this.snapshot.toString()}};function eR(n){let e=C$(n),t=new jt([new Ws("",{})]),r=new jt({}),i=new jt({}),o=new jt({}),s=new jt(""),a=new Fo(t,r,o,s,i,ve,n,e.root);return a.snapshot=e.root,new tm(new Rn(a,[]),e)}function C$(n){let e={},t={},r={},i="",o=new Hc([],e,r,i,t,ve,n,null,{});return new rm("",new Rn(o,[]))}var Fo=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(le(l=>l[dd]))??ue(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(le(e=>Gc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(le(e=>Gc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function nm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:G(G({},e.params),n.params),data:G(G({},e.data),n.data),resolve:G(G(G(G({},n.data),e.data),i?.data),n._resolvedData)}:r={params:G({},n.params),data:G({},n.data),resolve:G(G({},n.data),n._resolvedData??{})},i&&nR(i)&&(r.resolve[dd]=i.title),r}var Hc=class{get title(){return this.data?.[dd]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Gc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Gc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},rm=class extends em{constructor(e,t){super(t),this.url=e,wE(this,t)}toString(){return tR(this._root)}};function wE(n,e){e.value._routerState=n,e.children.forEach(t=>wE(n,t))}function tR(n){let e=n.children.length>0?` { ${n.children.map(tR).join(", ")} } `:"";return`${n.value}${e}`}function qb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),zr(e.params,t.params)||n.paramsSubject.next(t.params),YU(e.url,t.url)||n.urlSubject.next(t.url),zr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function dE(n,e){let t=zr(n.params,e.params)&&t$(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||dE(n.parent,e.parent))}function nR(n){return typeof n.title=="string"||n.title===null}var D$=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ve,this.activateEvents=new Le,this.deactivateEvents=new Le,this.attachEvents=new Le,this.detachEvents=new Le,this.parentContexts=$(pd),this.location=$(oo),this.changeDetector=$(_s),this.inputBinder=$(am,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new oe(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new hE(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ue({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[gn]})}}return n})(),hE=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Fo?this.route:e===pd?this.childContexts:this.parent.get(e,t)}},am=new te(""),OM=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Uu([r.queryParams,r.params,r.data]).pipe(Bt(([o,s,a],c)=>(a=G(G(G({},o),s),a),c===0?ue(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=HT(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})();function T$(n,e,t){let r=sd(n,e._root,t?t._root:void 0);return new tm(r,e)}function sd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=S$(n,e,t);return new Rn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>sd(n,a)),s}}let r=A$(e.value),i=e.children.map(o=>sd(n,o));return new Rn(r,i)}}function S$(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return sd(n,r,i);return sd(n,r)})}function A$(n){return new Fo(new jt(n.url),new jt(n.params),new jt(n.queryParams),new jt(n.fragment),new jt(n.data),n.outlet,n.component,n)}var ad=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},rR="ngNavigationCancelingError";function im(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Qs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=iR(!1,Nn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function iR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[rR]=!0,t.cancellationCode=e,t}function x$(n){return oR(n)&&Qs(n.url)}function oR(n){return!!n&&n[rR]}var M$=(n,e,t,r)=>le(i=>(new fE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),fE=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),qb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=$c(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=$c(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=$c(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=$c(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new aE(o.value.snapshot))}),e.children.length&&this.forwardEvent(new oE(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(qb(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),qb(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},om=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},qc=class{constructor(e,t){this.component=e,this.route=t}};function R$(n,e,t){let r=n._root,i=e?e._root:null;return Jl(r,i,t,[r.value])}function N$(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Yc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!xC(n)?n:e.get(n):r}function Jl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=$c(e);return n.children.forEach(s=>{P$(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>nd(a,t.getContext(s),i)),i}function P$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=O$(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new om(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Jl(n,e,a?a.children:null,r,i):Jl(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new qc(a.outlet.component,s))}else s&&nd(e,a,i),i.canActivateChecks.push(new om(r)),o.component?Jl(n,null,a?a.children:null,r,i):Jl(n,null,t,r,i);return i}function O$(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ks(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ks(n.url,e.url)||!zr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dE(n,e)||!zr(n.queryParams,e.queryParams);case"paramsChange":default:return!dE(n,e)}}function nd(n,e,t){let r=$c(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?nd(s,e.children.getContext(o),t):nd(s,null,t):nd(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new qc(e.outlet.component,i)):t.canDeactivateChecks.push(new qc(null,i)):t.canDeactivateChecks.push(new qc(null,i))}function gd(n){return typeof n=="function"}function k$(n){return typeof n=="boolean"}function F$(n){return n&&gd(n.canLoad)}function V$(n){return n&&gd(n.canActivate)}function L$(n){return n&&gd(n.canActivateChild)}function j$(n){return n&&gd(n.canDeactivate)}function B$(n){return n&&gd(n.canMatch)}function sR(n){return n instanceof Qr||n?.name==="EmptyError"}var qg=Symbol("INITIAL_VALUE");function Zc(){return Bt(n=>Uu(n.map(e=>e.pipe(Jr(1),nf(qg)))).pipe(le(e=>{for(let t of e)if(t!==!0){if(t===qg)return qg;if(t===!1||U$(t))return t}return!0}),tn(e=>e!==qg),Jr(1)))}function U$(n){return Qs(n)||n instanceof ad}function $$(n,e){return yt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ue(De(G({},t),{guardsResult:!0})):z$(s,r,i,n).pipe(yt(a=>a&&k$(a)?H$(r,o,n,e):ue(a)),le(a=>De(G({},t),{guardsResult:a})))})}function z$(n,e,t,r){return ze(n).pipe(yt(i=>Q$(i.component,i.route,t,e,r)),Er(i=>i!==!0,!0))}function H$(n,e,t,r){return ze(e).pipe(Yr(i=>Da(G$(i.route.parent,r),q$(i.route,r),K$(n,i.path,t),W$(n,i.route,t))),Er(i=>i!==!0,!0))}function q$(n,e){return n!==null&&e&&e(new sE(n)),ue(!0)}function G$(n,e){return n!==null&&e&&e(new iE(n)),ue(!0)}function W$(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ue(!0);let i=r.map(o=>Xh(()=>{let s=fd(e)??t,a=Yc(o,s),c=V$(a)?a.canActivate(e,n):Bn(s,()=>a(e,n));return Vo(c).pipe(Er())}));return ue(i).pipe(Zc())}function K$(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>N$(s)).filter(s=>s!==null).map(s=>Xh(()=>{let a=s.guards.map(c=>{let l=fd(s.node)??t,g=Yc(c,l),p=L$(g)?g.canActivateChild(r,n):Bn(l,()=>g(r,n));return Vo(p).pipe(Er())});return ue(a).pipe(Zc())}));return ue(o).pipe(Zc())}function Q$(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ue(!0);let s=o.map(a=>{let c=fd(e)??i,l=Yc(a,c),g=j$(l)?l.canDeactivate(n,e,t,r):Bn(c,()=>l(n,e,t,r));return Vo(g).pipe(Er())});return ue(s).pipe(Zc())}function Z$(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ue(!0);let o=i.map(s=>{let a=Yc(s,n),c=F$(a)?a.canLoad(e,t):Bn(n,()=>a(e,t));return Vo(c)});return ue(o).pipe(Zc(),aR(r))}function aR(n){return Ph(vt(e=>{if(typeof e!="boolean")throw im(n,e)}),le(e=>e===!0))}function Y$(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ue(!0);let o=i.map(s=>{let a=Yc(s,n),c=B$(a)?a.canMatch(e,t):Bn(n,()=>a(e,t));return Vo(c)});return ue(o).pipe(Zc(),aR(r))}var cd=class{constructor(e){this.segmentGroup=e||null}},ud=class extends Error{constructor(e){super(),this.urlTree=e}};function Uc(n){return Ca(new cd(n))}function J$(n){return Ca(new oe(4e3,!1))}function X$(n){return Ca(iR(!1,Nn.GuardRejected))}var pE=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ue(r);if(i.numberOfChildren>1||!i.children[ve])return J$(`${e.redirectTo}`);i=i.children[ve]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:g,url:p,outlet:w,params:b,data:x,title:N}=i,M=Bn(o,()=>a({params:b,data:x,queryParams:c,fragment:l,routeConfig:g,url:p,outlet:w,title:N}));if(M instanceof Ii)throw new ud(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new ud(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ii(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Be(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new oe(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},gE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function e4(n,e,t,r,i){let o=cR(n,e,t);return o.matched?(r=E$(e,r),Y$(r,e,t,i).pipe(le(s=>s===!0?o:G({},gE)))):ue(o)}function cR(n,e,t){if(e.path==="**")return t4(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?G({},gE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ZU)(t,n,e);if(!i)return G({},gE);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?G(G({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function t4(n){return{matched:!0,parameters:n.length>0?UM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function kM(n,e,t,r){return t.length>0&&i4(n,t,r)?{segmentGroup:new Be(e,r4(r,new Be(t,n.children))),slicedSegments:[]}:t.length===0&&o4(n,t,r)?{segmentGroup:new Be(n.segments,n4(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Be(n.segments,n.children),slicedSegments:t}}function n4(n,e,t,r){let i={};for(let o of t)if(cm(n,e,o)&&!r[lr(o)]){let s=new Be([],{});i[lr(o)]=s}return G(G({},r),i)}function r4(n,e){let t={};t[ve]=e;for(let r of n)if(r.path===""&&lr(r)!==ve){let i=new Be([],{});t[lr(r)]=i}return t}function i4(n,e,t){return t.some(r=>cm(n,e,r)&&lr(r)!==ve)}function o4(n,e,t){return t.some(r=>cm(n,e,r))}function cm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function s4(n,e,t){return e.length===0&&!n.children[t]}var mE=class{};function a4(n,e,t,r,i,o,s="emptyOnly"){return new yE(n,e,t,r,i,s,o).recognize()}var c4=31,yE=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new pE(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new oe(4002,`'${e.segmentGroup}'`)}recognize(){let e=kM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(le(({children:t,rootSnapshot:r})=>{let i=new Rn(r,t),o=new rm("",i),s=g$(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Hc([],Object.freeze({}),Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ve,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ve,t).pipe(le(r=>({children:r,rootSnapshot:t})),Zr(r=>{if(r instanceof ud)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof cd?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(le(s=>s instanceof Rn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ze(o).pipe(Yr(s=>{let a=r.children[s],c=I$(t,s);return this.processSegmentGroup(e,c,a,s,i)}),tf((s,a)=>(s.push(...a),s)),Wi(null),Iy(),yt(s=>{if(s===null)return Uc(r);let a=uR(s);return u4(a),ue(a)}))}processSegment(e,t,r,i,o,s,a){return ze(t).pipe(Yr(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Zr(l=>{if(l instanceof cd)return ue(null);throw l}))),Er(c=>!!c),Zr(c=>{if(sR(c))return s4(r,i,o)?ue(new mE):Uc(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return lr(r)!==s&&(s===ve||!cm(i,o,r))?Uc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Uc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:g,positionalParamSegments:p,remainingSegments:w}=cR(t,i,o);if(!c)return Uc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>c4&&(this.allowRedirects=!1));let b=new Hc(o,l,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,FM(i),lr(i),i.component??i._loadedComponent??null,i,VM(i)),x=nm(b,a,this.paramsInheritanceStrategy);b.params=Object.freeze(x.params),b.data=Object.freeze(x.data);let N=this.applyRedirects.applyRedirectCommands(g,i.redirectTo,p,b,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(yt(M=>this.processSegment(e,r,t,M.concat(w),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=e4(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Bt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Bt(({routes:l})=>{let g=r._loadedInjector??e,{parameters:p,consumedSegments:w,remainingSegments:b}=c,x=new Hc(w,p,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,FM(r),lr(r),r.component??r._loadedComponent??null,r,VM(r)),N=nm(x,s,this.paramsInheritanceStrategy);x.params=Object.freeze(N.params),x.data=Object.freeze(N.data);let{segmentGroup:M,slicedSegments:j}=kM(t,w,b,l);if(j.length===0&&M.hasChildren())return this.processChildren(g,l,M,x).pipe(le(H=>new Rn(x,H)));if(l.length===0&&j.length===0)return ue(new Rn(x,[]));let W=lr(r)===o;return this.processSegment(g,l,M,j,W?ve:o,!0,x).pipe(le(H=>new Rn(x,H instanceof Rn?[H]:[])))}))):Uc(t)))}getChildConfig(e,t,r){return t.children?ue({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ue({routes:t._loadedRoutes,injector:t._loadedInjector}):Z$(e,t,r,this.urlSerializer).pipe(yt(i=>i?this.configLoader.loadChildren(e,t).pipe(vt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):X$(t))):ue({routes:[],injector:e})}};function u4(n){n.sort((e,t)=>e.value.outlet===ve?-1:t.value.outlet===ve?1:e.value.outlet.localeCompare(t.value.outlet))}function l4(n){let e=n.value.routeConfig;return e&&e.path===""}function uR(n){let e=[],t=new Set;for(let r of n){if(!l4(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=uR(r.children);e.push(new Rn(r.value,i))}return e.filter(r=>!t.has(r))}function FM(n){return n.data||{}}function VM(n){return n.resolve||{}}function d4(n,e,t,r,i,o){return yt(s=>a4(n,e,t,r,s.extractedUrl,i,o).pipe(le(({state:a,tree:c})=>De(G({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function h4(n,e){return yt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ue(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of lR(c))s.add(l);let a=0;return ze(s).pipe(Yr(c=>o.has(c)?f4(c,r,n,e):(c.data=nm(c,c.parent,n).resolve,ue(void 0))),vt(()=>a++),Ta(1),yt(c=>a===s.size?ue(t):en))})}function lR(n){let e=n.children.map(t=>lR(t)).flat();return[n,...e]}function f4(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!nR(i)&&(o[dd]=i.title),p4(o,n,e,r).pipe(le(s=>(n._resolvedData=s,n.data=nm(n,n.parent,t).resolve,null)))}function p4(n,e,t,r){let i=Kb(n);if(i.length===0)return ue({});let o={};return ze(i).pipe(yt(s=>g4(n[s],e,t,r).pipe(Er(),vt(a=>{if(a instanceof ad)throw im(new Wc,a);o[s]=a}))),Ta(1),Ey(o),Zr(s=>sR(s)?en:Ca(s)))}function g4(n,e,t,r){let i=fd(e)??r,o=Yc(n,i),s=o.resolve?o.resolve(e,t):Bn(i,()=>o(e,t));return Vo(s)}function Gb(n){return Bt(e=>{let t=n(e);return t?ze(t).pipe(le(()=>e)):ue(e)})}var dR=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ve);return r}getResolvedTitleForRoute(t){return t.data[dd]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>$(m4),providedIn:"root"})}}return n})(),m4=(()=>{class n extends dR{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ne(wS))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),md=new te("",{providedIn:"root",factory:()=>({})}),y4=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=pn({type:n,selectors:[["ng-component"]],standalone:!0,features:[yn],decls:1,vars:0,template:function(r,i){r&1&&Je(0,"router-outlet")},dependencies:[D$],encapsulation:2})}}return n})();function _E(n){let e=n.children&&n.children.map(_E),t=e?De(G({},n),{children:e}):G({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ve&&(t.component=y4),t}var ld=new te(""),bE=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$(lp)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ue(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Vo(t.loadComponent()).pipe(le(hR),vt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ss(()=>{this.componentLoaders.delete(t)})),i=new _a(r,()=>new Ye).pipe(wa());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ue({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=v4(r,this.compiler,t,this.onLoadEndListener).pipe(ss(()=>{this.childrenLoaders.delete(r)})),s=new _a(o,()=>new Ye).pipe(wa());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function v4(n,e,t,r){return Vo(n.loadChildren()).pipe(le(hR),yt(i=>i instanceof Ku||Array.isArray(i)?ue(i):ze(e.compileModuleAsync(i))),le(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ld,[],{optional:!0,self:!0}).flat()),{routes:s.map(_E),injector:o}}))}function w4(n){return n&&typeof n=="object"&&"default"in n}function hR(n){return w4(n)?n.default:n}var EE=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>$(_4),providedIn:"root"})}}return n})(),_4=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fR=new te(""),pR=new te("");function b4(n,e,t){let r=n.get(pR),i=n.get(Zt);return n.get(Oe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),E4(n))),{onViewTransitionCreated:c}=r;return c&&Bn(n,()=>c({transition:a,from:e,to:t})),s})}function E4(n){return new Promise(e=>{vw({read:()=>setTimeout(e)},{injector:n})})}var I4=new te(""),IE=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ye,this.transitionAbortSubject=new Ye,this.configLoader=$(bE),this.environmentInjector=$(on),this.urlSerializer=$(hd),this.rootContexts=$(pd),this.location=$(Ya),this.inputBindingEnabled=$(am,{optional:!0})!==null,this.titleStrategy=$(dR),this.options=$(md,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=$(EE),this.createViewTransition=$(fR,{optional:!0}),this.navigationErrorHandler=$(I4,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ue(void 0),this.rootComponentType=null;let t=i=>this.events.next(new nE(i)),r=i=>this.events.next(new rE(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(De(G(G({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new jt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:td,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(tn(o=>o.id!==0),le(o=>De(G({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Bt(o=>{let s=!1,a=!1;return ue(o).pipe(Bt(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Nn.SupersededByNewNavigation),en;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?De(G({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&g!=="reload"){let p="";return this.events.next(new ko(c.id,this.urlSerializer.serialize(c.rawUrl),p,Yg.IgnoredSameUrlNavigation)),c.resolve(!1),en}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ue(c).pipe(Bt(p=>{let w=this.transitions?.getValue();return this.events.next(new Kc(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),w!==this.transitions?.getValue()?en:Promise.resolve(p)}),d4(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),vt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=De(G({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let w=new Jg(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(w)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:w,source:b,restoredState:x,extras:N}=c,M=new Kc(p,this.urlSerializer.serialize(w),b,x);this.events.next(M);let j=eR(this.rootComponentType).snapshot;return this.currentTransition=o=De(G({},c),{targetSnapshot:j,urlAfterRedirects:w,extras:De(G({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=w,ue(o)}else{let p="";return this.events.next(new ko(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Yg.IgnoredByUrlHandlingStrategy)),c.resolve(!1),en}}),vt(c=>{let l=new Jb(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),le(c=>(this.currentTransition=o=De(G({},c),{guards:R$(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),$$(this.environmentInjector,c=>this.events.next(c)),vt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw im(this.urlSerializer,c.guardsResult);let l=new Xb(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),tn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Nn.GuardRejected),!1)),Gb(c=>{if(c.guards.canActivateChecks.length)return ue(c).pipe(vt(l=>{let g=new eE(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}),Bt(l=>{let g=!1;return ue(l).pipe(h4(this.paramsInheritanceStrategy,this.environmentInjector),vt({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(l,"",Nn.NoDataFromResolver)}}))}),vt(l=>{let g=new tE(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}))}),Gb(c=>{let l=g=>{let p=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(g.routeConfig).pipe(vt(w=>{g.component=w}),le(()=>{})));for(let w of g.children)p.push(...l(w));return p};return Uu(l(c.targetSnapshot.root)).pipe(Wi(null),Jr(1))}),Gb(()=>this.afterPreactivation()),Bt(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,g=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return g?ze(g).pipe(le(()=>o)):ue(o)}),le(c=>{let l=T$(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=De(G({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),vt(()=>{this.events.next(new od)}),M$(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Jr(1),vt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Hr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Dy(this.transitionAbortSubject.pipe(vt(c=>{throw c}))),ss(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Nn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Zr(c=>{if(a=!0,oR(c))this.events.next(new Ei(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),x$(c)?this.events.next(new Qc(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new id(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let g=Bn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(g instanceof ad){let{message:p,cancellationCode:w}=im(this.urlSerializer,g);this.events.next(new Ei(o.id,this.urlSerializer.serialize(o.extractedUrl),p,w)),this.events.next(new Qc(g.redirectTo,g.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(g){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(g)}}return en}))}))}cancelNavigationTransition(t,r,i){let o=new Ei(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function C4(n){return n!==td}var D4=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>$(T4),providedIn:"root"})}}return n})(),vE=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},T4=(()=>{class n extends vE{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mn(n)))(i||n)}})()}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>$(S4),providedIn:"root"})}}return n})(),S4=(()=>{class n extends gR{constructor(){super(...arguments),this.location=$(Ya),this.urlSerializer=$(hd),this.options=$(md,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=$(EE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ii,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=eR(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Kc)this.stateMemento=this.createStateMemento();else if(t instanceof ko)this.rawUrlTree=r.initialUrl;else if(t instanceof Jg){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof od?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Ei&&(t.code===Nn.GuardRejected||t.code===Nn.NoDataFromResolver)?this.restoreHistory(r):t instanceof id?this.restoreHistory(r,!0):t instanceof Hr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Ii?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=G(G({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=G(G({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mn(n)))(i||n)}})()}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Xl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Xl||{});function mR(n,e){n.events.pipe(tn(t=>t instanceof Hr||t instanceof Ei||t instanceof id||t instanceof ko),le(t=>t instanceof Hr||t instanceof ko?Xl.COMPLETE:(t instanceof Ei?t.code===Nn.Redirect||t.code===Nn.SupersededByNewNavigation:!1)?Xl.REDIRECTING:Xl.FAILED),tn(t=>t!==Xl.REDIRECTING),Jr(1)).subscribe(()=>{e()})}function A4(n){throw n}var x4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},M4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Pn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=$(cp),this.stateManager=$(gR),this.options=$(md,{optional:!0})||{},this.pendingTasks=$(ro),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=$(IE),this.urlSerializer=$(hd),this.location=$(Ya),this.urlHandlingStrategy=$(EE),this._events=new Ye,this.errorHandler=this.options.errorHandler||A4,this.navigated=!1,this.routeReuseStrategy=$(D4),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=$(ld,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!$(am,{optional:!0}),this.eventsSubscription=new rt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ei&&r.code!==Nn.Redirect&&r.code!==Nn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Hr)this.navigated=!0;else if(r instanceof Qc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=G({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||C4(i.source)},s);this.scheduleNavigation(a,td,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}N4(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),td,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=G({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(_E),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,g=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":g=G(G({},this.currentUrlTree.queryParams),o);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}g!==null&&(g=this.removeEmptyProps(g));let p;try{let w=i?i.snapshot:this.routerState.snapshot.root;p=ZM(w)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return YM(p,t,g,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Qs(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,td,null,r)}navigate(t,r={skipLocationChange:!1}){return R4(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=G({},x4):r===!1?i=G({},M4):i=r,Qs(t))return MM(this.currentUrlTree,t,i);let o=this.parseUrl(t);return MM(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,w)=>{a=p,c=w});let g=this.pendingTasks.add();return mR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function R4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new oe(4008,!1)}function N4(n){return!(n instanceof od)&&!(n instanceof Qc)}var mQ=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new Ye,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Hr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Qs(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:qD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Qs(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(re(Pn),re(Fo),Qv("tabindex"),re(oi),re(Sn),re(ui))}}static{this.\u0275dir=Ue({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&je("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&si("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",co],skipLocationChange:[2,"skipLocationChange","skipLocationChange",co],replaceUrl:[2,"replaceUrl","replaceUrl",co],routerLink:"routerLink"},standalone:!0,features:[yw,gn]})}}return n})();var sm=class{};var P4=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(tn(t=>t instanceof Hr),Yr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=sp(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ze(i).pipe(Gi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ue(null);let o=i.pipe(yt(s=>s===null?ue(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ze([o,s]).pipe(Gi())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(ne(Pn),ne(lp),ne(on),ne(sm),ne(bE))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yR=new te(""),O4=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Kc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ko&&t.code===Yg.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Xg&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Xg(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){iT()}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})();function yQ(n,...e){return jn([{provide:ld,multi:!0,useValue:n},[],{provide:Fo,useFactory:vR,deps:[Pn]},{provide:tl,multi:!0,useFactory:wR},e.map(t=>t.\u0275providers)])}function vR(n){return n.routerState.root}function yd(n,e){return{\u0275kind:n,\u0275providers:e}}function wR(){let n=$(Ut);return e=>{let t=n.get(ao);if(e!==t.components[0])return;let r=n.get(Pn),i=n.get(_R);n.get(CE)===1&&r.initialNavigation(),n.get(bR,null,Ce.Optional)?.setUpPreloading(),n.get(yR,null,Ce.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var _R=new te("",{factory:()=>new Ye}),CE=new te("",{providedIn:"root",factory:()=>1});function k4(){return yd(2,[{provide:CE,useValue:0},{provide:up,multi:!0,deps:[Ut],useFactory:e=>{let t=e.get(YT,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Pn),o=e.get(_R);mR(i,()=>{r(!0)}),e.get(IE).afterPreactivation=()=>(r(!0),o.closed?ue(void 0):o),i.initialNavigation()}))}}])}function F4(){return yd(3,[{provide:up,multi:!0,useFactory:()=>{let e=$(Pn);return()=>{e.setUpLocationChangeListener()}}},{provide:CE,useValue:2}])}var bR=new te("");function V4(n){return yd(0,[{provide:bR,useExisting:P4},{provide:sm,useExisting:n}])}function L4(){return yd(8,[OM,{provide:am,useExisting:OM}])}function j4(n){let e=[{provide:fR,useValue:b4},{provide:pR,useValue:G({skipNextTransition:!!n?.skipInitialTransition},n)}];return yd(9,e)}var LM=new te("ROUTER_FORROOT_GUARD"),B4=[Ya,{provide:hd,useClass:Wc},Pn,pd,{provide:Fo,useFactory:vR,deps:[Pn]},bE,[]],vQ=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[B4,[],{provide:ld,multi:!0,useValue:t},{provide:LM,useFactory:H4,deps:[[Pn,new Wt,new Vv]]},{provide:md,useValue:r||{}},r?.useHash?$4():z4(),U4(),r?.preloadingStrategy?V4(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?q4(r):[],r?.bindToComponentInputs?L4().\u0275providers:[],r?.enableViewTransitions?j4().\u0275providers:[],G4()]}}static forChild(t){return{ngModule:n,providers:[{provide:ld,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(ne(LM,8))}}static{this.\u0275mod=Rr({type:n})}static{this.\u0275inj=Mr({})}}return n})();function U4(){return{provide:yR,useFactory:()=>{let n=$(tS),e=$(Oe),t=$(md),r=$(IE),i=$(hd);return t.scrollOffset&&n.setOffset(t.scrollOffset),new O4(i,r,n,e,t)}}}function $4(){return{provide:ui,useClass:XT}}function z4(){return{provide:ui,useClass:xw}}function H4(n){return"guarded"}function q4(n){return[n.initialNavigation==="disabled"?F4().\u0275providers:[],n.initialNavigation==="enabledBlocking"?k4().\u0275providers:[]]}var jM=new te("");function G4(){return[{provide:jM,useFactory:wR},{provide:tl,multi:!0,useExisting:jM}]}var um=class n{constructor(e,t,r){this.auth=e;this.router=t;this.firestore=r;this.auth.onAuthStateChanged(i=>{this.userActive=i,i?this.userRole=localStorage.getItem("userRole")||"":this.userRole=""})}userActive=null;isLoading=!1;userRole="";Login(e,t){return F(this,null,function*(){this.isLoading=!0;try{let r=yield bS(this.auth,e,t);this.userActive=r.user,e==="admin@gmail.com"?this.userRole="admin":this.userRole="empleado",localStorage.setItem("userRole",this.userRole);let i=Oo(this.firestore,"logins");yield TM(i,{userId:r.user.uid,email:r.user.email,loginTime:new Date}),this.router.navigate(["/bienvenida"])}catch(r){throw console.error("Error al iniciar sesi\xF3n:",r),r}finally{this.isLoading=!1}})}logout(){return F(this,null,function*(){yield ES(this.auth),this.userActive=null,IR.default.fire({title:"\xA1Hasta pronto!",text:"Tu sesi\xF3n ha sido cerrada correctamente.",icon:"success",confirmButtonText:"Cerrar",confirmButtonColor:"#38b6ff",background:"#f8f9fa",customClass:{popup:"swal-popup"}}),this.router.navigate(["/bienvenida"]),this.userRole=""})}isAdmin(){return this.userRole==="admin"}isLoggedIn(){return this.userActive!==null}getUser(){return this.userActive}getUserEmail(){return this.userActive?this.userActive.email:null}static \u0275fac=function(t){return new(t||n)(ne(Ds),ne(Pn),ne(ur))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var lm=class n{constructor(e){this.http=e;this.datos=new Ye,this.obtenerDatosUsuario()}datos;obtenerDatosUsuario(){this.http.get("https://api.github.com/users/gustavo-leiva").subscribe(e=>{this.datos.next(e)})}static \u0275fac=function(t){return new(t||n)(ne(Fw))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function Q4(n,e){n&1&&(z(0,"button",7),Y(1,"Veh\xEDculos"),U())}function Z4(n,e){n&1&&(z(0,"button",7),Y(1,"Informes"),U())}function Y4(n,e){if(n&1){let t=or();ww(0),z(1,"span",14),Y(2),U(),z(3,"a",15),je("click",function(){Dn(t);let i=sr();return Tn(i.logout())}),Y(4,"Cerrar Sesi\xF3n"),U(),_w()}if(n&2){let t=sr();fe(2),so(t.authService.userActive.email)}}function J4(n,e){n&1&&(z(0,"a",16),Y(1,"Iniciar Sesi\xF3n"),U(),z(2,"a",17),Y(3,"Registrarse"),U())}var dm=class n{constructor(e,t,r){this.authService=e;this.gitServ=t;this.router=r}subsDatos;usuario;imagen;cantidadRepos;isMenuOpen=!1;ngOnInit(){this.gitServ.obtenerDatosUsuario(),this.subsDatos=this.gitServ.datos.subscribe(e=>{this.usuario=e.login,this.imagen=e.avatar_url,this.cantidadRepos=e.public_repos})}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}ngOnDestroy(){this.subsDatos.unsubscribe()}logout(){this.authService.logout()}NavegarChoferes(e){this.authService.getUser()!=null?this.router.navigate([`/choferes/${e}`]):this.router.navigateByUrl("login")}InformesVehiculos(e){this.authService.getUser()!=null?this.router.navigate([`/informes-vehiculos/${e}`]):this.router.navigateByUrl("login")}NavegarChoferesSinAcceso(e){this.router.navigate([`/productos/${e}`])}static \u0275fac=function(t){return new(t||n)(re(um),re(lm),re(Pn))};static \u0275cmp=pn({type:n,selectors:[["app-header"]],standalone:!0,features:[yn],decls:29,vars:4,consts:[["loggedOut",""],[1,"navbar"],[1,"navbar-left"],[1,"navbar-title"],[1,"navbar-center"],["href","/bienvenida",1,"nav-link"],[1,"dropdown"],[1,"dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-toggle",4,"ngIf"],["href","/informes-vehiculos",1,"dropdown-item"],[1,"navbar-right"],[4,"ngIf","ngIfElse"],[1,"user-email"],[1,"nav-link","logout",3,"click"],["href","/login",1,"nav-link"],["href","/registro",1,"nav-link"]],template:function(t,r){if(t&1){let i=or();z(0,"nav",1)(1,"div",2)(2,"span",3),Y(3,"Gesti\xF3n de Choferes"),U()(),z(4,"div",4)(5,"a",5),Y(6,"Home"),U(),z(7,"div",6)(8,"button",7),Y(9,"Choferes"),U(),z(10,"div",8)(11,"a",9),je("click",function(){return Dn(i),Tn(r.NavegarChoferes("alta-chofer"))}),Y(12,"Alta Choferes"),U(),z(13,"a",9),je("click",function(){return Dn(i),Tn(r.NavegarChoferes("chofer-pais"))}),Y(14,"Listar Choferes"),U()()(),z(15,"div",6),it(16,Q4,2,0,"button",10),z(17,"div",8)(18,"a",9),je("click",function(){return Dn(i),Tn(r.NavegarChoferes("vehiculos"))}),Y(19,"Listar Veh\xEDculos"),U()()(),z(20,"div",6),it(21,Z4,2,0,"button",10),z(22,"div",8)(23,"a",11),Y(24,"Informe Veh\xEDculos"),U()()()(),z(25,"div",12),it(26,Y4,5,1,"ng-container",13)(27,J4,4,0,"ng-template",null,0,FT),U()()}if(t&2){let i=PT(28);fe(16),ye("ngIf",r.authService.isAdmin()),fe(5),ye("ngIf",r.authService.isAdmin()),fe(5),ye("ngIf",r.authService.userActive)("ngIfElse",i)}},dependencies:[An,Pr],styles:[".navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 30px;background-color:#2c3e50;color:#ecf0f1;position:fixed;width:100%;top:0;z-index:1000;box-sizing:border-box;flex-wrap:wrap;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.navbar-left[_ngcontent-%COMP%], .navbar-center[_ngcontent-%COMP%], .navbar-right[_ngcontent-%COMP%]{display:flex;align-items:center}.navbar-left[_ngcontent-%COMP%]{flex:1}.navbar-right[_ngcontent-%COMP%]{flex:1;justify-content:flex-end}.navbar-center[_ngcontent-%COMP%]{flex:2;justify-content:center}.navbar-icon[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:15px}.navbar-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;letter-spacing:1px}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin:0 15px;padding:10px 15px;border-radius:4px;font-size:1.2rem;white-space:nowrap;transition:background-color .3s}.nav-link[_ngcontent-%COMP%]:hover{background-color:#444}.central[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;background-color:#fff;padding:30px;border-radius:12px;box-shadow:0 8px 30px #0000001a;max-width:600px;margin:20px auto;transition:transform .3s}.central[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.div-texto[_ngcontent-%COMP%]{margin:15px 0}.texto[_ngcontent-%COMP%]{font-size:26px;color:#333;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-weight:600}.imagen-usuario[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;margin-top:20px;border:4px solid #007bff;box-shadow:0 4px 20px #0003;transition:transform .3s}.imagen-usuario[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-toggle[_ngcontent-%COMP%]{background-color:#2c3e50;color:#fff;border:none;padding:10px 15px;cursor:pointer;font-size:1.2rem;border-radius:4px;transition:background-color .3s;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.dropdown-toggle[_ngcontent-%COMP%]:hover{background-color:#444}.dropdown-menu[_ngcontent-%COMP%]{display:none;position:absolute;top:100%;right:0;background-color:#fff;color:#333;border:1px solid #ddd;border-radius:5px;box-shadow:0 8px 16px #0003;min-width:160px;z-index:1000}.dropdown-item[_ngcontent-%COMP%]{display:block;padding:10px;text-decoration:none;color:#333}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}"]})};var PR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(re(oi),re(Sn))}}static{this.\u0275dir=Ue({type:n})}}return n})(),Dd=(()=>{class n extends PR{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mn(n)))(i||n)}})()}static{this.\u0275dir=Ue({type:n,features:[At]})}}return n})(),Ys=new te(""),X4={provide:Ys,useExisting:$t(()=>ME),multi:!0},ME=(()=>{class n extends Dd{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mn(n)))(i||n)}})()}static{this.\u0275dir=Ue({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&je("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},features:[sn([X4]),At]})}}return n})(),e5={provide:Ys,useExisting:$t(()=>Bo),multi:!0};function t5(){let n=ci()?ci().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var n5=new te(""),Bo=(()=>{class n extends PR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!t5())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(re(oi),re(Sn),re(n5,8))}}static{this.\u0275dir=Ue({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&je("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[sn([e5]),At]})}}return n})();function Lo(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function OR(n){return n!=null&&typeof n.length=="number"}var Di=new te(""),bm=new te(""),r5=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,st=class{static min(e){return kR(e)}static max(e){return i5(e)}static required(e){return FR(e)}static requiredTrue(e){return VR(e)}static email(e){return o5(e)}static minLength(e){return LR(e)}static maxLength(e){return s5(e)}static pattern(e){return jR(e)}static nullValidator(e){return fm(e)}static compose(e){return qR(e)}static composeAsync(e){return GR(e)}};function kR(n){return e=>{if(Lo(e.value)||Lo(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function i5(n){return e=>{if(Lo(e.value)||Lo(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function FR(n){return Lo(n.value)?{required:!0}:null}function VR(n){return n.value===!0?null:{required:!0}}function o5(n){return Lo(n.value)||r5.test(n.value)?null:{email:!0}}function LR(n){return e=>Lo(e.value)||!OR(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function s5(n){return e=>OR(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function jR(n){if(!n)return fm;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Lo(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function fm(n){return null}function BR(n){return n!=null}function UR(n){return ws(n)?ze(n):n}function $R(n){let e={};return n.forEach(t=>{e=t!=null?G(G({},e),t):e}),Object.keys(e).length===0?null:e}function zR(n,e){return e.map(t=>t(n))}function a5(n){return!n.validate}function HR(n){return n.map(e=>a5(e)?e:t=>e.validate(t))}function qR(n){if(!n)return null;let e=n.filter(BR);return e.length==0?null:function(t){return $R(zR(t,e))}}function RE(n){return n!=null?qR(HR(n)):null}function GR(n){if(!n)return null;let e=n.filter(BR);return e.length==0?null:function(t){let r=zR(t,e).map(UR);return by(r).pipe(le($R))}}function NE(n){return n!=null?GR(HR(n)):null}function CR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function WR(n){return n._rawValidators}function KR(n){return n._rawAsyncValidators}function DE(n){return n?Array.isArray(n)?n:[n]:[]}function pm(n,e){return Array.isArray(n)?n.includes(e):n===e}function DR(n,e){let t=DE(e);return DE(n).forEach(i=>{pm(t,i)||t.push(i)}),t}function TR(n,e){return DE(e).filter(t=>!pm(n,t))}var gm=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=RE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=NE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ci=class extends gm{get formDirective(){return null}get path(){return null}},Zs=class extends gm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},mm=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},c5={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},HQ=De(G({},c5),{"[class.ng-submitted]":"isSubmitted"}),nu=(()=>{class n extends mm{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(re(Zs,2))}}static{this.\u0275dir=Ue({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ap("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[At]})}}return n})(),ru=(()=>{class n extends mm{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(re(Ci,10))}}static{this.\u0275dir=Ue({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ap("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[At]})}}return n})();var wd="VALID",hm="INVALID",Jc="PENDING",_d="DISABLED",jo=class{},ym=class extends jo{constructor(e,t){super(),this.value=e,this.source=t}},Ed=class extends jo{constructor(e,t){super(),this.pristine=e,this.source=t}},Id=class extends jo{constructor(e,t){super(),this.touched=e,this.source=t}},Xc=class extends jo{constructor(e,t){super(),this.status=e,this.source=t}},TE=class extends jo{constructor(e){super(),this.source=e}},SE=class extends jo{constructor(e){super(),this.source=e}};function PE(n){return(Em(n)?n.validators:n)||null}function u5(n){return Array.isArray(n)?RE(n):n||null}function OE(n,e){return(Em(e)?e.asyncValidators:n)||null}function l5(n){return Array.isArray(n)?NE(n):n||null}function Em(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function QR(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new oe(1e3,"");if(!r[t])throw new oe(1001,"")}function ZR(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new oe(1002,"")})}var eu=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Qa(()=>this.statusReactive()),this.statusReactive=Ka(void 0),this._pristine=Qa(()=>this.pristineReactive()),this.pristineReactive=Ka(!0),this._touched=Qa(()=>this.touchedReactive()),this.touchedReactive=Ka(!1),this._events=new Ye,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Nr(this.statusReactive)}set status(e){Nr(()=>this.statusReactive.set(e))}get valid(){return this.status===wd}get invalid(){return this.status===hm}get pending(){return this.status==Jc}get disabled(){return this.status===_d}get enabled(){return this.status!==_d}get pristine(){return Nr(this.pristineReactive)}set pristine(e){Nr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Nr(this.touchedReactive)}set touched(e){Nr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(DR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(DR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(TR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(TR(e,this._rawAsyncValidators))}hasValidator(e){return pm(this._rawValidators,e)}hasAsyncValidator(e){return pm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(De(G({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Id(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Id(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(De(G({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ed(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ed(!0,r))}markAsPending(e={}){this.status=Jc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(De(G({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=_d,this.errors=null,this._forEachChild(i=>{i.disable(De(G({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ym(this.value,r)),this._events.next(new Xc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(De(G({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=wd,this._forEachChild(r=>{r.enable(De(G({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(De(G({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wd||this.status===Jc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ym(this.value,t)),this._events.next(new Xc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(De(G({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_d:wd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Jc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=UR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Xc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Le,this.statusChanges=new Le}_calculateStatus(){return this._allControlsDisabled()?_d:this.errors?hm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Jc)?Jc:this._anyControlsHaveStatus(hm)?hm:wd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ed(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Id(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Em(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=u5(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=l5(this._rawAsyncValidators)}},tu=class extends eu{constructor(e,t,r){super(PE(t),OE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ZR(this,!0,e),Object.keys(e).forEach(r=>{QR(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var AE=class extends tu{};var Td=new te("CallSetDisabledState",{providedIn:"root",factory:()=>Im}),Im="always";function YR(n,e){return[...e.path,n]}function vm(n,e,t=Im){kE(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),h5(n,e),p5(n,e),f5(n,e),d5(n,e)}function SR(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),_m(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function wm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function d5(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function kE(n,e){let t=WR(n);e.validator!==null?n.setValidators(CR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=KR(n);e.asyncValidator!==null?n.setAsyncValidators(CR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();wm(e._rawValidators,i),wm(e._rawAsyncValidators,i)}function _m(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=WR(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=KR(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return wm(e._rawValidators,r),wm(e._rawAsyncValidators,r),t}function h5(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&JR(n,e)})}function f5(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&JR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function JR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function p5(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function XR(n,e){n==null,kE(n,e)}function g5(n,e){return _m(n,e)}function e1(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function m5(n){return Object.getPrototypeOf(n.constructor)===Dd}function t1(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function n1(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Bo?t=o:m5(o)?r=o:i=o}),i||r||t||null}function y5(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var v5={provide:Ci,useExisting:$t(()=>w5)},bd=Promise.resolve(),w5=(()=>{class n extends Ci{get submitted(){return Nr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Qa(()=>this.submittedReactive()),this.submittedReactive=Ka(!1),this._directives=new Set,this.ngSubmit=new Le,this.form=new tu({},RE(t),NE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){bd.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),vm(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){bd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){bd.then(()=>{let r=this._findContainer(t.path),i=new tu({});XR(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){bd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){bd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),t1(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(re(Di,10),re(bm,10),re(Td,8))}}static{this.\u0275dir=Ue({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&je("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sn([v5]),At]})}}return n})();function AR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function xR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Cd=class extends eu{constructor(e=null,t,r){super(PE(t),OE(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Em(t)&&(t.nonNullable||t.initialValueIsDefault)&&(xR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){AR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){AR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){xR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var _5=n=>n instanceof Cd;var b5={provide:Zs,useExisting:$t(()=>E5)},MR=Promise.resolve(),E5=(()=>{class n extends Zs{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Cd,this._registered=!1,this.name="",this.update=new Le,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=n1(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),e1(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){vm(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){MR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&co(r);MR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?YR(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(re(Ci,9),re(Di,10),re(bm,10),re(Ys,10),re(_s,8),re(Td,8))}}static{this.\u0275dir=Ue({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sn([b5]),At,gn]})}}return n})(),iu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ue({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),I5={provide:Ys,useExisting:$t(()=>Js),multi:!0},Js=(()=>{class n extends Dd{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mn(n)))(i||n)}})()}static{this.\u0275dir=Ue({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&je("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[sn([I5]),At]})}}return n})();var r1=new te("");var C5={provide:Ci,useExisting:$t(()=>Xs)},Xs=(()=>{class n extends Ci{get submitted(){return Nr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Qa(()=>this._submittedReactive()),this._submittedReactive=Ka(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Le,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_m(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return vm(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){SR(t.control||null,t,!1),y5(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),t1(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new TE(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new SE(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(SR(r||null,t),_5(i)&&(vm(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);XR(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&g5(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){kE(this.form,this),this._oldForm&&_m(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(re(Di,10),re(bm,10),re(Td,8))}}static{this.\u0275dir=Ue({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&je("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sn([C5]),At,gn]})}}return n})();var D5={provide:Zs,useExisting:$t(()=>ea)},ea=(()=>{class n extends Zs{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Le,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=n1(this,o)}ngOnChanges(t){this._added||this._setUpControl(),e1(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return YR(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(re(Ci,13),re(Di,10),re(bm,10),re(Ys,10),re(r1,8))}}static{this.\u0275dir=Ue({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[sn([D5]),At,gn]})}}return n})(),T5={provide:Ys,useExisting:$t(()=>ou),multi:!0};function i1(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function S5(n){return n.split(":")[0]}var ou=(()=>{class n extends Dd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=i1(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=S5(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mn(n)))(i||n)}})()}static{this.\u0275dir=Ue({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&je("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[sn([T5]),At]})}}return n})(),Cm=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(i1(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(re(Sn),re(oi),re(ou,9))}}static{this.\u0275dir=Ue({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),A5={provide:Ys,useExisting:$t(()=>o1),multi:!0};function RR(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function x5(n){return n.split(":")[0]}var o1=(()=>{class n extends Dd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=x5(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mn(n)))(i||n)}})()}static{this.\u0275dir=Ue({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&je("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[sn([A5]),At]})}}return n})(),Dm=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(RR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(RR(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(re(Sn),re(oi),re(o1,9))}}static{this.\u0275dir=Ue({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function M5(n){return typeof n=="number"?n:parseInt(n,10)}function R5(n){return typeof n=="number"?n:parseFloat(n)}var Tm=(()=>{class n{constructor(){this._validator=fm}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):fm,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ue({type:n,features:[gn]})}}return n})();var N5={provide:Di,useExisting:$t(()=>P5),multi:!0},P5=(()=>{class n extends Tm{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>R5(t),this.createValidator=t=>kR(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mn(n)))(i||n)}})()}static{this.\u0275dir=Ue({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&si("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[sn([N5]),At]})}}return n})(),O5={provide:Di,useExisting:$t(()=>s1),multi:!0},k5={provide:Di,useExisting:$t(()=>F5),multi:!0},s1=(()=>{class n extends Tm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=co,this.createValidator=t=>FR}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mn(n)))(i||n)}})()}static{this.\u0275dir=Ue({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&si("required",i._enabled?"":null)},inputs:{required:"required"},features:[sn([O5]),At]})}}return n})(),F5=(()=>{class n extends s1{constructor(){super(...arguments),this.createValidator=t=>VR}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mn(n)))(i||n)}})()}static{this.\u0275dir=Ue({type:n,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&si("required",i._enabled?"":null)},features:[sn([k5]),At]})}}return n})();var V5={provide:Di,useExisting:$t(()=>L5),multi:!0},L5=(()=>{class n extends Tm{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>M5(t),this.createValidator=t=>LR(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mn(n)))(i||n)}})()}static{this.\u0275dir=Ue({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&si("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[sn([V5]),At]})}}return n})();var j5={provide:Di,useExisting:$t(()=>B5),multi:!0},B5=(()=>{class n extends Tm{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>jR(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mn(n)))(i||n)}})()}static{this.\u0275dir=Ue({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&si("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},features:[sn([j5]),At]})}}return n})();var a1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Rr({type:n})}static{this.\u0275inj=Mr({})}}return n})(),xE=class extends eu{constructor(e,t,r){super(PE(t),OE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ZR(this,!1,e),e.forEach((r,i)=>{QR(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function NR(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var su=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return NR(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new tu(i,o)}record(t,r=null){let i=this._reduceControls(t);return new AE(i,r)}control(t,r,i){let o={};return this.useNonNullable?(NR(r)?o=r:(o.validators=r,o.asyncValidators=i),new Cd(t,De(G({},o),{nonNullable:!0}))):new Cd(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new xE(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Cd)return t;if(t instanceof eu)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var GQ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Td,useValue:t.callSetDisabledState??Im}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Rr({type:n})}static{this.\u0275inj=Mr({imports:[a1]})}}return n})(),au=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:r1,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Td,useValue:t.callSetDisabledState??Im}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Rr({type:n})}static{this.\u0275inj=Mr({imports:[a1]})}}return n})();var Gn=class n{constructor(e){this.firestore=e}agregarVehiculo(e){return F(this,null,function*(){let t=Oo(this.firestore,"vehiculos"),r=Bc(t),i=r.id;try{yield zg(r,De(G({},e),{id:i})),console.log("Veh\xEDculo agregado exitosamente con ID:",i)}catch(o){console.error("Error al agregar veh\xEDculo:",o)}})}obtenerVehiculos(){let e=Oo(this.firestore,"vehiculos");return $g(e,{idField:"id"})}modificarVehiculo(e,t){return F(this,null,function*(){let r=Bc(this.firestore,`vehiculos/${e}`);try{yield AM(r,t),console.log("Veh\xEDculo modificado exitosamente")}catch(i){console.error("Error al modificar el veh\xEDculo:",i)}})}eliminarVehiculo(e){return F(this,null,function*(){let t=Bc(this.firestore,`vehiculos/${e}`);try{yield SM(t),console.log("Veh\xEDculo eliminado exitosamente")}catch(r){console.error("Error al eliminar el veh\xEDculo:",r)}})}static \u0275fac=function(t){return new(t||n)(ne(ur))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function U5(n,e){n&1&&(z(0,"div",21)(1,"small"),Y(2,"Nombre es requerido y solo puede contener letras."),U()())}function $5(n,e){n&1&&(z(0,"div",21)(1,"small"),Y(2,"El tipo es requerido."),U()())}function z5(n,e){n&1&&(z(0,"div",21)(1,"small"),Y(2,"La cantidad m\xE1xima de ruedas es 6."),U()())}function H5(n,e){n&1&&(z(0,"div",21)(1,"small"),Y(2,"La capacidad debe estar entre 2 y 100 pasajeros."),U()())}function q5(n,e){n&1&&(z(0,"div",22),Je(1,"div",23),U())}function G5(n,e){if(n&1){let t=or();z(0,"div",24)(1,"button",25),je("click",function(){Dn(t);let i=sr();return Tn(i.closeMessage())}),Y(2,"\u2716"),U(),z(3,"p"),Y(4,"\u{1F60A} Transporte dado de alta satisfactoriamente. \xA1Carga terminada! \u{1F60A}"),U()()}}function W5(n,e){n&1&&(z(0,"p",26),Y(1," Por favor completa todos los campos obligatorios. "),U())}var Sm=class n{constructor(e,t){this.fb=e;this.vehiculoService=t;this.vehiculoForm=this.fb.group({nombre:["",[st.required,st.pattern("^[a-zA-Z ]+$")]],tipo:["",st.required],cantidadRuedas:["",[st.required,st.max(6)]],capacidad:["",[st.required,st.min(2),st.max(100)]]})}vehiculoForm;isLoading=!1;completed=!1;submitted=!1;msjError="";vehiculoAgregado=new Le;onSubmit(){if(this.vehiculoForm.valid){this.isLoading=!0,this.completed=!1;let e=this.vehiculoForm.value;setTimeout(()=>{this.vehiculoService.agregarVehiculo(e),this.vehiculoAgregado.emit(e),this.vehiculoForm.reset(),this.isLoading=!1,this.completed=!0},2e3)}}closeMessage(){this.completed=!1}static \u0275fac=function(t){return new(t||n)(re(su),re(Gn))};static \u0275cmp=pn({type:n,selectors:[["app-alta-vehiculo"]],outputs:{vehiculoAgregado:"vehiculoAgregado"},standalone:!0,features:[yn],decls:37,vars:9,consts:[[1,"alta-vehiculo"],[1,"alta-vehiculo-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["id","nombre","formControlName","nombre","type","text",1,"input-field"],["class","error-msg",4,"ngIf"],["for","tipo"],["id","tipo","formControlName","tipo",1,"input-field"],["value",""],["value","terrestre"],["value","aereo"],["value","maritimo"],["for","ruedas"],["id","ruedas","formControlName","cantidadRuedas","type","number",1,"input-field"],["for","capacidad"],["id","capacidad","formControlName","capacidad","type","number",1,"input-field"],["type","submit",1,"btn-crear",3,"disabled"],["class","spinner-overlay",4,"ngIf"],["class","confirmation-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"error-msg"],[1,"spinner-overlay"],[1,"spinner"],[1,"confirmation-message"],[1,"close-button",3,"click"],[1,"error-message"]],template:function(t,r){if(t&1&&(z(0,"p",0),Y(1,"Alta vehiculo"),U(),z(2,"div",1)(3,"form",2),je("ngSubmit",function(){return r.onSubmit()}),z(4,"div",3)(5,"label",4),Y(6,"Nombre del veh\xEDculo:"),U(),Je(7,"input",5),it(8,U5,3,0,"div",6),U(),z(9,"div",3)(10,"label",7),Y(11,"Tipo:"),U(),z(12,"select",8)(13,"option",9),Y(14,"Seleccione un tipo"),U(),z(15,"option",10),Y(16,"Terrestre"),U(),z(17,"option",11),Y(18,"A\xE9reo"),U(),z(19,"option",12),Y(20,"Mar\xEDtimo"),U()(),it(21,$5,3,0,"div",6),U(),z(22,"div",3)(23,"label",13),Y(24,"Cantidad de ruedas:"),U(),Je(25,"input",14),it(26,z5,3,0,"div",6),U(),z(27,"div",3)(28,"label",15),Y(29,"Capacidad promedio:"),U(),Je(30,"input",16),it(31,H5,3,0,"div",6),U(),z(32,"button",17),Y(33,"Crear"),U()()(),it(34,q5,2,0,"div",18)(35,G5,5,0,"div",19)(36,W5,2,0,"p",20)),t&2){let i,o,s,a;fe(3),ye("formGroup",r.vehiculoForm),fe(5),ye("ngIf",((i=r.vehiculoForm.get("nombre"))==null?null:i.invalid)&&((i=r.vehiculoForm.get("nombre"))==null?null:i.touched)),fe(13),ye("ngIf",((o=r.vehiculoForm.get("tipo"))==null?null:o.invalid)&&((o=r.vehiculoForm.get("tipo"))==null?null:o.touched)),fe(5),ye("ngIf",((s=r.vehiculoForm.get("cantidadRuedas"))==null?null:s.invalid)&&((s=r.vehiculoForm.get("cantidadRuedas"))==null?null:s.touched)),fe(5),ye("ngIf",((a=r.vehiculoForm.get("capacidad"))==null?null:a.invalid)&&((a=r.vehiculoForm.get("capacidad"))==null?null:a.touched)),fe(),ye("disabled",r.vehiculoForm.invalid),fe(2),ye("ngIf",r.isLoading),fe(),ye("ngIf",r.completed),fe(),ye("ngIf",r.submitted&&r.vehiculoForm.invalid)}},dependencies:[An,Pr,au,iu,Cm,Dm,Bo,Js,ou,nu,ru,Xs,ea],styles:[".alta-vehiculo-container[_ngcontent-%COMP%]{background-color:#f4f4f4;padding:30px;border-radius:12px;box-shadow:0 8px 20px #0000001a;max-width:600px;margin:0 auto}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{font-size:1.1em;color:#333;font-weight:600;display:block;margin-bottom:5px}.input-field[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1em;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease-in-out}.input-field[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;box-shadow:0 0 5px #007bff4d}.error-msg[_ngcontent-%COMP%]{color:#e74c3c;font-size:.9em;margin-top:5px}.btn-crear[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#007bff;border:none;border-radius:8px;font-size:1.1em;color:#fff;cursor:pointer;transition:background-color .3s ease-in-out}.btn-crear[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.btn-crear[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.alta-vehiculo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:.2vh;font-size:1.5rem;font-weight:700;color:#333;background-color:#f4f4f9;border:2px solid #ccc;border-radius:10px;box-shadow:0 4px 6px #0000001a;padding:20px;text-align:center}.spinner-container[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;background:#fffc;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;pointer-events:none;top:50%;left:50%}.loading-message[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:10px;animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out;text-align:center}.spinner[_ngcontent-%COMP%]{border:8px solid rgba(255,255,255,.3);border-top:8px solid #3498db;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}.spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:9999}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.confirmation-message[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:20px 30px;border-radius:12px;box-shadow:0 8px 30px #0003;font-size:1.2rem;color:#333;text-align:center;z-index:9999;width:90%;max-width:400px}.confirmation-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:none;border:none;font-size:1.5rem;color:#999;cursor:pointer;transition:color .3s ease}.close-button[_ngcontent-%COMP%]:hover{color:#ff4d4d}"]})};function K5(n,e){n&1&&(z(0,"div",15),Je(1,"div",16),U())}function Q5(n,e){if(n&1){let t=or();z(0,"div",17)(1,"button",18),je("click",function(){Dn(t);let i=sr();return Tn(i.closeMessage())}),Y(2,"\u2716"),U(),z(3,"p"),Y(4,"\u{1F60A} Transporte eliminado satisfactoriamente! \u{1F60A}"),U()()}}function Z5(n,e){n&1&&(z(0,"p",19),Y(1,` Por favor completa todos los campos obligatorios.
`),U())}var Am=class n{constructor(e,t){this.fb=e;this.vehiculoService=t;this.bajaForm=this.fb.group({nombre:[{value:"",disabled:!0}],tipo:[{value:"",disabled:!0}],cantidadRuedas:[{value:"",disabled:!0}],capacidad:[{value:"",disabled:!0}],confirmarBaja:[!1,st.requiredTrue]})}vehiculo=null;vehiculoEliminado=new Le;bajaForm;isLoading=!1;completed=!1;submitted=!1;msjError="";ngOnInit(){this.cargarDatosVehiculo()}ngOnChanges(){this.cargarDatosVehiculo()}cargarDatosVehiculo(){this.vehiculo?this.bajaForm.patchValue({nombre:this.vehiculo.nombre,tipo:this.vehiculo.tipo,cantidadRuedas:this.vehiculo.cantidadRuedas,capacidad:this.vehiculo.capacidad}):this.bajaForm.reset()}bajarVehiculo(){this.bajaForm.valid&&this.vehiculo&&(this.isLoading=!0,this.completed=!1,this.vehiculoService.eliminarVehiculo(this.vehiculo.id).then(()=>{console.log("Veh\xEDculo eliminado con \xE9xito"),this.completed=!0,this.bajaForm.reset(),this.vehiculoEliminado.emit()}).catch(e=>{console.error("Error al eliminar el veh\xEDculo:",e)}).finally(()=>{this.isLoading=!1}))}closeMessage(){this.completed=!1}static \u0275fac=function(t){return new(t||n)(re(su),re(Gn))};static \u0275cmp=pn({type:n,selectors:[["app-baja-vehiculo"]],inputs:{vehiculo:"vehiculo"},outputs:{vehiculoEliminado:"vehiculoEliminado"},standalone:!0,features:[gn,yn],decls:29,vars:9,consts:[[1,"baja-vehiculo"],[1,"eliminar-vehiculo-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["formControlName","nombre","type","text",1,"input-field",3,"value"],["formControlName","tipo","type","text",1,"input-field",3,"value"],["formControlName","cantidadRuedas","type","number",1,"input-field",3,"value"],["formControlName","capacidad","type","number",1,"input-field",3,"value"],[1,"form-group","confirmacion"],["for","confirmarBaja"],["id","confirmarBaja","type","checkbox","formControlName","confirmarBaja"],["type","submit",1,"btn-baja",3,"disabled"],["class","spinner-overlay",4,"ngIf"],["class","confirmation-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"spinner-overlay"],[1,"spinner"],[1,"confirmation-message"],[1,"close-button",3,"click"],[1,"error-message"]],template:function(t,r){t&1&&(z(0,"p",0),Y(1,"Baja Veh\xEDculo"),U(),z(2,"div",1)(3,"form",2),je("ngSubmit",function(){return r.bajarVehiculo()}),z(4,"div",3)(5,"label"),Y(6,"Nombre del veh\xEDculo:"),U(),Je(7,"input",4),U(),z(8,"div",3)(9,"label"),Y(10,"Tipo:"),U(),Je(11,"input",5),U(),z(12,"div",3)(13,"label"),Y(14,"Cantidad de ruedas:"),U(),Je(15,"input",6),U(),z(16,"div",3)(17,"label"),Y(18,"Capacidad:"),U(),Je(19,"input",7),U(),z(20,"div",8)(21,"label",9),Y(22,"\xBFConfirma la baja del veh\xEDculo?"),U(),Je(23,"input",10),U(),z(24,"button",11),Y(25,"Eliminar Veh\xEDculo"),U()(),it(26,K5,2,0,"div",12)(27,Q5,5,0,"div",13)(28,Z5,2,0,"p",14),U()),t&2&&(fe(3),ye("formGroup",r.bajaForm),fe(4),ye("value",r.vehiculo==null?null:r.vehiculo.nombre),fe(4),ye("value",r.vehiculo==null?null:r.vehiculo.tipo),fe(4),ye("value",r.vehiculo==null?null:r.vehiculo.cantidadRuedas),fe(4),ye("value",r.vehiculo==null?null:r.vehiculo.capacidad),fe(5),ye("disabled",r.bajaForm.invalid),fe(2),ye("ngIf",r.isLoading),fe(),ye("ngIf",r.completed),fe(),ye("ngIf",r.submitted&&r.bajaForm.invalid))},dependencies:[au,iu,Bo,Js,ME,nu,ru,Xs,ea,An,Pr],styles:[".eliminar-vehiculo-container[_ngcontent-%COMP%]{background-color:#f4f4f4;padding:30px;border-radius:12px;box-shadow:0 8px 20px #0000001a;max-width:600px;margin:0 auto}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{font-size:1.1em;color:#333;font-weight:600;display:block;margin-bottom:5px}.input-field[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1em;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease-in-out}.input-field[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;box-shadow:0 0 5px #007bff4d}.error-msg[_ngcontent-%COMP%]{color:#e74c3c;font-size:.9em;margin-top:5px}.btn-baja[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#007bff;border:none;border-radius:8px;font-size:1.1em;color:#fff;cursor:pointer;transition:background-color .3s ease-in-out}.btn-baja[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.btn-baja[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.baja-vehiculo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:.2vh;font-size:1.5rem;font-weight:700;color:#333;background-color:#f4f4f9;border:2px solid #ccc;border-radius:10px;box-shadow:0 4px 6px #0000001a;padding:20px;text-align:center}.spinner-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffc;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;pointer-events:none}.loading-message[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:10px;animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out;text-align:center}.spinner[_ngcontent-%COMP%]{border:8px solid rgba(255,255,255,.3);border-top:8px solid #3498db;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}.spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:9999}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.confirmation-message[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:20px 30px;border-radius:12px;box-shadow:0 8px 30px #0003;font-size:1.2rem;color:#333;text-align:center;z-index:9999;width:90%;max-width:400px}.confirmation-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:none;border:none;font-size:1.5rem;color:#999;cursor:pointer;transition:color .3s ease}.close-button[_ngcontent-%COMP%]:hover{color:#ff4d4d}"]})};function Y5(n,e){n&1&&(z(0,"div",21)(1,"small"),Y(2,"Nombre es requerido y solo puede contener letras."),U()())}function J5(n,e){n&1&&(z(0,"div",21)(1,"small"),Y(2,"El tipo es requerido."),U()())}function X5(n,e){n&1&&(z(0,"div",21)(1,"small"),Y(2,"La cantidad m\xE1xima de ruedas es 6."),U()())}function e3(n,e){n&1&&(z(0,"div",21)(1,"small"),Y(2,"La capacidad debe estar entre 2 y 100 pasajeros."),U()())}function t3(n,e){n&1&&(z(0,"div",22),Je(1,"div",23),U())}function n3(n,e){if(n&1){let t=or();z(0,"div",24)(1,"button",25),je("click",function(){Dn(t);let i=sr();return Tn(i.closeMessage())}),Y(2,"\u2716"),U(),z(3,"p"),Y(4,"\u{1F60A} Transporte modificado satisfactoriamente. \xA1Modificaci\xF3n terminada! \u{1F60A}"),U()()}}function r3(n,e){n&1&&(z(0,"p",26),Y(1,` Por favor completa todos los campos obligatorios.
`),U())}var xm=class n{constructor(e,t){this.fb=e;this.vehiculoService=t;this.vehiculoForm=this.fb.group({nombre:["",[st.required,st.pattern(/^[a-zA-Z ]+$/)]],tipo:["",st.required],cantidadRuedas:["",[st.required,st.max(6)]],capacidad:["",[st.required,st.min(2),st.max(100)]]})}vehiculo;vehiculoForm;isLoading=!1;completed=!1;submitted=!1;msjError="";vehiculos;onVehiculoEliminado(){this.resetearContenedorModificacion()}resetearContenedorModificacion(){this.vehiculos=null}ngOnInit(){this.cargarDatosVehiculo()}ngOnChanges(e){e.vehiculo&&e.vehiculo.currentValue?this.cargarDatosVehiculo():this.vehiculo||this.vehiculoForm.reset()}cargarDatosVehiculo(){this.vehiculo&&this.vehiculoForm.patchValue({nombre:this.vehiculo.nombre,tipo:this.vehiculo.tipo,cantidadRuedas:this.vehiculo.cantidadRuedas,capacidad:this.vehiculo.capacidad})}modificarVehiculo(){return F(this,null,function*(){if(this.vehiculo&&this.vehiculoForm.valid){this.isLoading=!0,this.completed=!1;try{yield this.vehiculoService.modificarVehiculo(this.vehiculo.id,this.vehiculoForm.value),console.log("Veh\xEDculo modificado correctamente"),this.vehiculoForm.reset(),this.completed=!0}catch(e){console.error("Error al modificar el veh\xEDculo:",e)}finally{this.isLoading=!1}}})}closeMessage(){this.completed=!1}static \u0275fac=function(t){return new(t||n)(re(su),re(Gn))};static \u0275cmp=pn({type:n,selectors:[["app-modificacion-vehiculo"]],inputs:{vehiculo:"vehiculo"},standalone:!0,features:[gn,yn],decls:37,vars:9,consts:[[1,"modificacion-vehiculo"],[1,"modificar-vehiculo-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["id","nombre","formControlName","nombre","type","text",1,"input-field"],["class","error-msg",4,"ngIf"],["for","tipo"],["id","tipo","formControlName","tipo",1,"input-field"],["value",""],["value","terrestre"],["value","aereo"],["value","maritimo"],["for","ruedas"],["id","ruedas","formControlName","cantidadRuedas","type","number",1,"input-field"],["for","capacidad"],["id","capacidad","formControlName","capacidad","type","number",1,"input-field"],["type","submit",1,"btn-guardar",3,"disabled"],["class","spinner-overlay",4,"ngIf"],["class","confirmation-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"error-msg"],[1,"spinner-overlay"],[1,"spinner"],[1,"confirmation-message"],[1,"close-button",3,"click"],[1,"error-message"]],template:function(t,r){if(t&1&&(z(0,"p",0),Y(1,"modificacion vehiculo"),U(),z(2,"div",1)(3,"form",2),je("ngSubmit",function(){return r.modificarVehiculo()}),z(4,"div",3)(5,"label",4),Y(6,"Nombre del veh\xEDculo:"),U(),Je(7,"input",5),it(8,Y5,3,0,"div",6),U(),z(9,"div",3)(10,"label",7),Y(11,"Tipo:"),U(),z(12,"select",8)(13,"option",9),Y(14,"Seleccione un tipo"),U(),z(15,"option",10),Y(16,"Terrestre"),U(),z(17,"option",11),Y(18,"A\xE9reo"),U(),z(19,"option",12),Y(20,"Mar\xEDtimo"),U()(),it(21,J5,3,0,"div",6),U(),z(22,"div",3)(23,"label",13),Y(24,"Cantidad de ruedas:"),U(),Je(25,"input",14),it(26,X5,3,0,"div",6),U(),z(27,"div",3)(28,"label",15),Y(29,"Capacidad promedio:"),U(),Je(30,"input",16),it(31,e3,3,0,"div",6),U(),z(32,"button",17),Y(33,"Guardar Cambios"),U()()(),it(34,t3,2,0,"div",18)(35,n3,5,0,"div",19)(36,r3,2,0,"p",20)),t&2){let i,o,s,a;fe(3),ye("formGroup",r.vehiculoForm),fe(5),ye("ngIf",((i=r.vehiculoForm.get("nombre"))==null?null:i.invalid)&&((i=r.vehiculoForm.get("nombre"))==null?null:i.touched)),fe(13),ye("ngIf",((o=r.vehiculoForm.get("tipo"))==null?null:o.invalid)&&((o=r.vehiculoForm.get("tipo"))==null?null:o.touched)),fe(5),ye("ngIf",((s=r.vehiculoForm.get("cantidadRuedas"))==null?null:s.invalid)&&((s=r.vehiculoForm.get("cantidadRuedas"))==null?null:s.touched)),fe(5),ye("ngIf",((a=r.vehiculoForm.get("capacidad"))==null?null:a.invalid)&&((a=r.vehiculoForm.get("capacidad"))==null?null:a.touched)),fe(),ye("disabled",r.vehiculoForm.invalid),fe(2),ye("ngIf",r.isLoading),fe(),ye("ngIf",r.completed),fe(),ye("ngIf",r.submitted&&r.vehiculoForm.invalid)}},dependencies:[An,Pr,au,iu,Cm,Dm,Bo,Js,ou,nu,ru,Xs,ea],styles:[".modificar-vehiculo-container[_ngcontent-%COMP%]{background-color:#f4f4f4;padding:30px;border-radius:12px;box-shadow:0 8px 20px #0000001a;max-width:600px;margin:0 auto}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{font-size:1.1em;color:#333;font-weight:600;display:block;margin-bottom:5px}.input-field[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1em;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease-in-out}.input-field[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;box-shadow:0 0 5px #007bff4d}.error-msg[_ngcontent-%COMP%]{color:#e74c3c;font-size:.9em;margin-top:5px}.btn-guardar[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#007bff;border:none;border-radius:8px;font-size:1.1em;color:#fff;cursor:pointer;transition:background-color .3s ease-in-out}.btn-guardar[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.btn-guardar[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.modificacion-vehiculo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:.2vh;font-size:1.5rem;font-weight:700;color:#333;background-color:#f4f4f9;border:2px solid #ccc;border-radius:10px;box-shadow:0 4px 6px #0000001a;padding:20px;text-align:center}.spinner-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffc;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;pointer-events:none}.loading-message[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:10px;animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out;text-align:center}.spinner[_ngcontent-%COMP%]{border:8px solid rgba(255,255,255,.3);border-top:8px solid #3498db;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}.spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:9999}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.confirmation-message[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:20px 30px;border-radius:12px;box-shadow:0 8px 30px #0003;font-size:1.2rem;color:#333;text-align:center;z-index:9999;width:90%;max-width:400px}.confirmation-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:none;border:none;font-size:1.5rem;color:#999;cursor:pointer;transition:color .3s ease}.close-button[_ngcontent-%COMP%]:hover{color:#ff4d4d}"]})};function i3(n,e){if(n&1){let t=or();z(0,"tr",4),je("click",function(){let i=Dn(t).$implicit,o=sr();return Tn(o.seleccionarVehiculo(i))}),z(1,"td"),Y(2),U(),z(3,"td"),Y(4),U(),z(5,"td"),Y(6),U(),z(7,"td"),Y(8),U()()}if(n&2){let t=e.$implicit;fe(2),so(t.nombre),fe(2),so(t.tipo),fe(2),so(t.cantidadRuedas),fe(2),so(t.capacidad)}}function o3(n,e){n&1&&(z(0,"div",5)(1,"p"),Y(2,"No hay veh\xEDculos registrados."),U()())}var Mm=class n{constructor(e){this.vehiculoService=e}vehiculos=[];vehiculoSeleccionado=new Le;vehiculoEliminado=new Le;ngOnInit(){this.cargarVehiculos()}cargarVehiculos(){this.vehiculoService.obtenerVehiculos().subscribe(e=>{this.vehiculos=e})}seleccionarVehiculo(e){this.vehiculoSeleccionado.emit(e)}eliminarVehiculo(e){return F(this,null,function*(){yield this.vehiculoService.eliminarVehiculo(e),this.vehiculoEliminado.emit(),this.cargarVehiculos()})}static \u0275fac=function(t){return new(t||n)(re(Gn))};static \u0275cmp=pn({type:n,selectors:[["app-tabla-vehiculos"]],outputs:{vehiculoSeleccionado:"vehiculoSeleccionado",vehiculoEliminado:"vehiculoEliminado"},standalone:!0,features:[yn],decls:16,vars:2,consts:[[1,"titulo-listado"],[1,"table-vehiculos"],[3,"click",4,"ngFor","ngForOf"],["class","no-vehiculos",4,"ngIf"],[3,"click"],[1,"no-vehiculos"]],template:function(t,r){t&1&&(z(0,"h3",0),Y(1,"Listado de Veh\xEDculos"),U(),z(2,"table",1)(3,"thead")(4,"tr")(5,"th"),Y(6,"Nombre"),U(),z(7,"th"),Y(8,"Tipo"),U(),z(9,"th"),Y(10,"Cantidad de Ruedas"),U(),z(11,"th"),Y(12,"Capacidad"),U()()(),z(13,"tbody"),it(14,i3,9,4,"tr",2),U()(),it(15,o3,3,0,"div",3)),t&2&&(fe(14),ye("ngForOf",r.vehiculos),fe(),ye("ngIf",r.vehiculos.length===0))},dependencies:[An,eS,Pr],styles:[".titulo-listado[_ngcontent-%COMP%]{font-size:2em;color:#333;margin-bottom:20px;text-align:center;font-weight:600;letter-spacing:1px;border-bottom:2px solid #007bff;padding-bottom:10px}.table-vehiculos[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:20px 0;font-size:1.1em;background-color:#fff;border-radius:8px;overflow:hidden;box-shadow:0 6px 15px #0000001a}.table-vehiculos[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;text-align:left;font-weight:700}.table-vehiculos[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px 20px;text-transform:uppercase;letter-spacing:1px;font-size:.9em}.table-vehiculos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #dddddd}.table-vehiculos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(2n){background-color:#f4f4f4}.table-vehiculos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type{border-bottom:2px solid #007bff}.table-vehiculos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 20px;color:#555}.table-vehiculos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#eaf2fd;cursor:pointer}.no-vehiculos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;padding:20px;font-size:1.2em;color:#666;background-color:#f8f9fa;border-radius:5px}"]})};var c1=class n{constructor(e){this.firestore=e}choferesPath="choferes";agregarChofer(e){let t=Bc(Oo(this.firestore,"choferes"));return zg(t,e)}obtenerChoferes(){let e=Oo(this.firestore,this.choferesPath);return $g(e,{idField:"id"})}static \u0275fac=function(t){return new(t||n)(ne(ur))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var u1=class n{constructor(e){this.vehiculoService=e}vehiculo=null;listaVehiculos=[];ngOnInit(){this.cargarVehiculos()}vehiculoSeleccionado(e){this.vehiculo=e}cargarVehiculos(){this.vehiculoService.obtenerVehiculos().subscribe(e=>{this.listaVehiculos=e})}onVehiculoEliminado(){this.vehiculo=null}static \u0275fac=function(t){return new(t||n)(re(Gn))};static \u0275cmp=pn({type:n,selectors:[["app-vehiculos"]],standalone:!0,features:[yn],decls:12,vars:2,consts:[[1,"vehiculo-container"],[1,"listado"],[3,"vehiculoSeleccionado"],[1,"acciones-vehiculo"],[1,"alta"],[1,"modificacion"],[3,"vehiculo"],[1,"baja"],[3,"vehiculoEliminado","vehiculo"]],template:function(t,r){t&1&&(Je(0,"app-header"),z(1,"body")(2,"div",0)(3,"div",1)(4,"app-tabla-vehiculos",2),je("vehiculoSeleccionado",function(o){return r.vehiculoSeleccionado(o)}),U()(),z(5,"div",3)(6,"div",4),Je(7,"app-alta-vehiculo"),U(),z(8,"div",5),Je(9,"app-modificacion-vehiculo",6),U(),z(10,"div",7)(11,"app-baja-vehiculo",8),je("vehiculoEliminado",function(){return r.onVehiculoEliminado()}),U()()()()()),t&2&&(fe(9),ye("vehiculo",r.vehiculo),fe(2),ye("vehiculo",r.vehiculo))},dependencies:[Mm,Sm,Am,xm,dm,An],styles:[".button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px}.button-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;top:30px;left:30px;background-color:#00000080;padding:10px;border-radius:50px;box-shadow:0 4px 6px #0000001a;transition:background-color .3s ease,box-shadow .3s ease}.button-box[_ngcontent-%COMP%]:hover{background-color:#000000b3;box-shadow:0 6px 12px #0003}.button-elem[_ngcontent-%COMP%]{display:block;width:24px;height:24px;margin:0 12px;transform:rotate(180deg);fill:#fff;transition:fill .3s ease,transform .3s ease}.button-elem[_ngcontent-%COMP%]:hover{fill:#00bcd4;transform:rotate(180deg) scale(1.1)}.vehiculo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:20px;max-width:100%;margin:0 auto}.listado[_ngcontent-%COMP%]{width:100%;background-color:#f9f9f9;padding:20px;box-shadow:0 8px 20px #0000001a;border-radius:12px}.acciones-vehiculo[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px}.alta[_ngcontent-%COMP%], .modificacion[_ngcontent-%COMP%], .baja[_ngcontent-%COMP%]{flex:1;background-color:#f4f4f4;padding:20px;box-shadow:0 8px 20px #0000001a;border-radius:12px;max-width:30%}@media (max-width: 768px){.acciones-vehiculo[_ngcontent-%COMP%]{flex-direction:column}}"]})};export{Ie as a,Ye as b,yy as c,Hi as d,qi as e,ze as f,ue as g,le as h,DN as i,tn as j,Zr as k,LI as l,Er as m,jI as n,tf as o,AN as p,nf as q,Bt as r,xN as s,X as t,Mr as u,te as v,ne as w,$ as x,Wt as y,pn as z,Rr as A,Dn as B,Tn as C,i8 as D,o8 as E,Le as F,Oe as G,$n as H,$O as I,fe as J,re as K,it as L,ye as M,z as N,U as O,Je as P,or as Q,je as R,sr as S,xV as T,NT as U,u8 as V,MV as W,RV as X,PT as Y,Y as Z,so as _,OT as $,PV as aa,l8 as ba,OV as ca,yn as da,d8 as ea,VT as fa,h8 as ga,f8 as ha,eS as ia,Pr as ja,An as ka,fp as la,Fw as ma,J8 as na,IW as oa,D$ as pa,Pn as qa,mQ as ra,yQ as sa,vQ as ta,Is as ua,Xa as va,ec as wa,oL as xa,zW as ya,HW as za,Ds as Aa,V7 as Ba,L7 as Ca,gj as Da,gi as Ea,Y7 as Fa,B as Ga,lt as Ha,Mt as Ia,Q as Ja,X7 as Ka,vc as La,aU as Ma,Fe as Na,tM as Oa,ht as Pa,nM as Qa,cU as Ra,Nb as Sa,rM as Ta,iM as Ua,nK as Va,ln as Wa,uU as Xa,lU as Ya,dU as Za,hU as _a,fU as $a,pU as ab,gU as bb,mU as cb,Pc as db,Ao as eb,Ul as fb,wU as gb,_U as hb,bU as ib,EU as jb,IU as kb,CU as lb,DU as mb,TU as nb,SU as ob,Mg as pb,xo as qb,gc as rb,Mo as sb,xU as tb,MU as ub,RU as vb,NU as wb,PU as xb,OU as yb,kU as zb,yM as Ab,vM as Bb,wM as Cb,_M as Db,Vb as Eb,FU as Fb,Bg as Gb,AA as Hb,LU as Ib,jU as Jb,BU as Kb,UU as Lb,$U as Mb,zU as Nb,ur as Ob,ZK as Pb,TM as Qb,Oo as Rb,Bc as Sb,YK as Tb,zg as Ub,um as Vb,lm as Wb,dm as Xb,ME as Yb,Bo as Zb,st as _b,nu as $b,ru as ac,w5 as bc,E5 as cc,iu as dc,Js as ec,Xs as fc,ea as gc,ou as hc,Cm as ic,Dm as jc,P5 as kc,s1 as lc,F5 as mc,L5 as nc,B5 as oc,su as pc,GQ as qc,au as rc,Gn as sc,Sm as tc,Am as uc,xm as vc,Mm as wc,u1 as xc,c1 as yc};
